<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>ListSetExtras.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="alectryon.css" rel="stylesheet"><link href="pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script></head><body><article class="alectryon-root alectryon-windowed alectryon-coqdoc"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.13.0+0.13.0. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+↑</kbd> <kbd>Ctrl+↓</kbd> to navigate, <kbd>Ctrl+🖱️</kbd> to focus. On Mac, use <kbd>⌘</kbd> instead of <kbd>Ctrl</kbd>.</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> stdpp <span class="kn">Require Import</span> prelude.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM <span class="kn">Require Import</span> Lib.Preamble Lib.ListExtras Lib.StdppExtras Lib.StdppListSet.</span></span></pre><div class="doc">
<a id="lab1"></a><h1 class="section">List set utility definitions and lemmas</h1>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">set_eq</span> {<span class="nv">A</span>} (<span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A) : <span class="kt">Prop</span> :=
  s1 ⊆ s2 /\ s2 ⊆ s1.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk0"><span class="kn">Global Instance</span> <span class="nf">set_eq_dec</span> `{EqDecision A} : RelDecision (@set_eq A).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision set_eq</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision set_eq</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2"><span class="nb">intros</span> s1 s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision (set_eq s1 s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> and_dec; <span class="nb">apply</span> list_subseteq_dec; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk3"><span class="kn">Lemma</span> <span class="nf">set_eq_extract_forall</span>
  {<span class="nv">A</span> : <span class="kt">Type</span>}
  (<span class="nv">l1</span> <span class="nv">l2</span> : <span class="nb">set</span> A)
  : set_eq l1 l2 &lt;-&gt; <span class="kr">forall</span> <span class="nv">a</span>, (a ∈ l1 &lt;-&gt; a ∈ l2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq l1 l2 ↔ (<span class="kr">∀</span> <span class="nv">a</span> : A, a ∈ l1 ↔ a ∈ l2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq l1 l2 ↔ (<span class="kr">∀</span> <span class="nv">a</span> : A, a ∈ l1 ↔ a ∈ l2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk5"><span class="nb">unfold</span> set_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l1 ⊆ l2 ⊆ l1 ↔ (<span class="kr">∀</span> <span class="nv">a</span> : A, a ∈ l1 ↔ a ∈ l2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> forall_and_commute.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk6"><span class="kn">Lemma</span> <span class="nf">set_eq_proj1</span> {<span class="nv">A</span>} : <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A),
  set_eq s1 s2 -&gt;
  s1 ⊆ s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A, set_eq s1 s2 → s1 ⊆ s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A, set_eq s1 s2 → s1 ⊆ s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk8"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_eq s1 s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 ⊆ s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk9"><span class="nb">destruct</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>s1 ⊆ s2</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>s2 ⊆ s1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 ⊆ s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chka"><span class="kn">Lemma</span> <span class="nf">set_eq_proj2</span> {<span class="nv">A</span>} : <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A),
  set_eq s1 s2 -&gt;
  s2 ⊆ s1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A, set_eq s1 s2 → s2 ⊆ s1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A, set_eq s1 s2 → s2 ⊆ s1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkc"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_eq s1 s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s2 ⊆ s1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkd"><span class="nb">destruct</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>s1 ⊆ s2</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>s2 ⊆ s1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s2 ⊆ s1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chke"><span class="kn">Lemma</span> <span class="nf">set_eq_refl</span> {<span class="nv">A</span>} : <span class="kr">forall</span> (<span class="nv">s</span> : list A), set_eq s s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s</span> : list A, set_eq s s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkf"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s</span> : list A, set_eq s s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">induction</span> s;<span class="nb">split</span>; <span class="nb">intro</span>; <span class="nb">intro</span>; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk10"><span class="kn">Lemma</span> <span class="nf">set_eq_comm</span> {<span class="nv">A</span>} : <span class="kr">forall</span> <span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A,
  set_eq s1 s2 &lt;-&gt; set_eq s2 s1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A, set_eq s1 s2 ↔ set_eq s2 s1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk11"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A, set_eq s1 s2 ↔ set_eq s2 s1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span>; <span class="nb">split</span>; <span class="nb">intro</span>; <span class="nb">destruct</span> H; <span class="nb">split</span>; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk12"><span class="kn">Lemma</span> <span class="nf">set_eq_tran</span> {<span class="nv">A</span>} : <span class="kr">forall</span> <span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">s3</span> : <span class="nb">set</span> A,
  set_eq s1 s2 -&gt;
  set_eq s2 s3 -&gt;
  set_eq s1 s3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">s3</span> : <span class="nb">set</span> A,
  set_eq s1 s2 → set_eq s2 s3 → set_eq s1 s3</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk13"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">s3</span> : <span class="nb">set</span> A,
  set_eq s1 s2 → set_eq s2 s3 → set_eq s1 s3</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk14"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s1, s2, s3</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_eq s1 s2</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>set_eq s2 s3</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq s1 s3</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>; <span class="nb">apply</span> PreOrder_Transitive <span class="kr">with</span> s2; <span class="nb">apply</span> H || <span class="nb">apply</span> H0.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk15"><span class="kn">Lemma</span> <span class="nf">set_eq_empty_iff</span>
  {<span class="nv">A</span>}
  : <span class="kr">forall</span> (<span class="nv">l</span> : list A),
    set_eq l [] &lt;-&gt; l = [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">l</span> : list A, set_eq l [] ↔ l = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk16"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">l</span> : list A, set_eq l [] ↔ l = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk17"><span class="nb">split</span>; <span class="nb">intros</span>; [|<span class="nb">subst</span>; <span class="nb">apply</span> set_eq_refl].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_eq l []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk18"><span class="nb">destruct</span> l <span class="kr">as</span> [|hd tl].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_eq [] []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] = []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk19" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_eq (hd :: tl) []</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk19"><hr></label><div class="goal-conclusion">hd :: tl = []</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_eq [] []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] = []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_eq (hd :: tl) []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hd :: tl = []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1c"><span class="nb">destruct</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hd :: tl ⊆ []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>[] ⊆ hd :: tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hd :: tl = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1d">spec H hd (elem_of_list_here hd tl).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>[] ⊆ hd :: tl</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hd ∈ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hd :: tl = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">inversion</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1e"><span class="kn">Lemma</span> <span class="nf">set_eq_cons</span> {<span class="nv">A</span>} : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A),
  set_eq s1 s2 -&gt;
  set_eq (a :: s1) (a :: s2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">a</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A),
  set_eq s1 s2 → set_eq (a :: s1) (a :: s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">a</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A),
  set_eq s1 s2 → set_eq (a :: s1) (a :: s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk20"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_eq s1 s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (a :: s1) (a :: s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>; <span class="nb">intros</span> x Hx; <span class="nb">apply</span> elem_of_cons <span class="kr">in</span> Hx; <span class="nb">destruct</span> Hx; <span class="nb">subst</span>
  ; (<span class="nb">left</span>; <span class="bp">reflexivity</span>) || (<span class="nb">right</span>; <span class="nb">apply</span> H; <span class="bp">assumption</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk21"><span class="kn">Lemma</span> <span class="nf">set_eq_Forall</span>
  {<span class="nv">A</span> : <span class="kt">Type</span>}
  (<span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A)
  (<span class="nv">H12</span> : set_eq s1 s2)
  (<span class="nv">P</span> : A -&gt; <span class="kt">Prop</span>)
  : Forall P s1 &lt;-&gt; Forall P s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>set_eq s1 s2</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A → <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall P s1 ↔ Forall P s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk22"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>set_eq s1 s2</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A → <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall P s1 ↔ Forall P s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk23"><span class="nb">split</span>; <span class="nb">intros</span> H; <span class="nb">rewrite</span> Forall_forall <span class="kr">in</span> *; <span class="nb">intros</span> x Hx
  ; <span class="nb">apply</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>set_eq s1 s2</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ s1 → P x</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s1</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk24" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>set_eq s1 s2</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ s2 → P x</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ s1</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk24"><hr></label><div class="goal-conclusion">x ∈ s2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk25">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>set_eq s1 s2</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ s1 → P x</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> H12; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk26">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>set_eq s1 s2</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ s2 → P x</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ s1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> H12; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk27"><span class="kn">Lemma</span> <span class="nf">set_union_comm</span> `{EqDecision A}  : <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  set_eq (set_union s1 s2) (set_union s2 s1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s1</span> <span class="nv">s2</span> : list A,
  set_eq (set_union s1 s2) (set_union s2 s1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk28"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s1</span> <span class="nv">s2</span> : list A,
  set_eq (set_union s1 s2) (set_union s2 s1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span>; <span class="nb">split</span>; <span class="nb">intro</span> x; <span class="nb">intros</span>; <span class="nb">apply</span> set_union_iff <span class="kr">in</span> H; <span class="nb">apply</span> set_union_iff; <span class="nb">destruct</span> H;
  (<span class="nb">left</span> ; <span class="bp">assumption</span>) || (<span class="nb">right</span>; <span class="bp">assumption</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk29"><span class="kn">Lemma</span> <span class="nf">set_union_empty</span> `{EqDecision A}  : <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  set_union s1 s2 = [] -&gt;
  s1 = [] /\ s2 = [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s1</span> <span class="nv">s2</span> : list A,
  set_union s1 s2 = [] → s1 = [] ∧ s2 = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s1</span> <span class="nv">s2</span> : list A,
  set_union s1 s2 = [] → s1 = [] ∧ s2 = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2b"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_union s1 s2 = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 = [] ∧ s2 = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2c"><span class="nb">destruct</span> s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_union s1 [] = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 = [] ∧ [] = []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk2d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_union s1 (a :: s2) = []</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk2d"><hr></label><div class="goal-conclusion">s1 = [] ∧ a :: s2 = []</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_union s1 [] = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 = [] ∧ [] = []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2f"><span class="nb">destruct</span> (set_union_comm s1 nil).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_union s1 [] = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>set_union s1 [] ⊆ set_union [] s1</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>set_union [] s1 ⊆ set_union s1 []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 = [] ∧ [] = []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk30"><span class="nb">rewrite</span> H <span class="kr">in</span> H1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_union s1 [] = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>set_union s1 [] ⊆ set_union [] s1</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>set_union [] s1 ⊆ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 = [] ∧ [] = []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk31"><span class="nb">destruct</span> s1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_union [] [] = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>set_union [] [] ⊆ set_union [] []</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>set_union [] [] ⊆ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] = [] ∧ [] = []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk32" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_union (a :: s1) [] = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>set_union (a :: s1) [] ⊆ set_union [] (a :: s1)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>set_union [] (a :: s1) ⊆ []</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk32"><hr></label><div class="goal-conclusion">a :: s1 = [] ∧ [] = []</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk33">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_union [] [] = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>set_union [] [] ⊆ set_union [] []</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>set_union [] [] ⊆ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] = [] ∧ [] = []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>; <span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk34">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_union (a :: s1) [] = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>set_union (a :: s1) [] ⊆ set_union [] (a :: s1)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>set_union [] (a :: s1) ⊆ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a :: s1 = [] ∧ [] = []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk35"><span class="nb">simpl</span> <span class="kr">in</span> H1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_union (a :: s1) [] = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>set_union (a :: s1) [] ⊆ set_union [] (a :: s1)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>set_add a (set_union [] s1) ⊆ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a :: s1 = [] ∧ [] = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk36"><span class="nb">pose proof</span> set_add_intro a a (set_union [] s1) (or_introl (eq_refl a)) <span class="kr">as</span> Hadd.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_union (a :: s1) [] = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>set_union (a :: s1) [] ⊆ set_union [] (a :: s1)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>set_add a (set_union [] s1) ⊆ []</span></span></span><br><span><var>Hadd</var><span class="hyp-type"><b>: </b><span>a ∈ set_add a (set_union [] s1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a :: s1 = [] ∧ [] = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk37"><span class="nb">pose proof</span> H1 a Hadd <span class="kr">as</span> Ha.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_union (a :: s1) [] = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>set_union (a :: s1) [] ⊆ set_union [] (a :: s1)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>set_add a (set_union [] s1) ⊆ []</span></span></span><br><span><var>Hadd</var><span class="hyp-type"><b>: </b><span>a ∈ set_add a (set_union [] s1)</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ∈ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a :: s1 = [] ∧ [] = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">inversion</span> Ha.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk38">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_union s1 (a :: s2) = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 = [] ∧ a :: s2 = []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk39"><span class="nb">simpl</span> <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_add a (set_union s1 s2) = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 = [] ∧ a :: s2 = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk3a"><span class="nb">pose proof</span> (@list_subseteq_nil A []).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_add a (set_union s1 s2) = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>[] ⊆ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 = [] ∧ a :: s2 = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk3b"><span class="nb">rewrite</span> &lt;- H <span class="kr">in</span> H0 <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_add a (set_union s1 s2) = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>set_add a (set_union s1 s2) ⊆ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 = [] ∧ a :: s2 = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk3c"><span class="nb">pose proof</span> set_add_intro a a (set_union s1 s2) (or_introl (eq_refl a)) <span class="kr">as</span> Hadd.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_add a (set_union s1 s2) = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>set_add a (set_union s1 s2) ⊆ []</span></span></span><br><span><var>Hadd</var><span class="hyp-type"><b>: </b><span>a ∈ set_add a (set_union s1 s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 = [] ∧ a :: s2 = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk3d"><span class="nb">pose proof</span> H0 a Hadd <span class="kr">as</span> Ha.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_add a (set_union s1 s2) = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>set_add a (set_union s1 s2) ⊆ []</span></span></span><br><span><var>Hadd</var><span class="hyp-type"><b>: </b><span>a ∈ set_add a (set_union s1 s2)</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ∈ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 = [] ∧ a :: s2 = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">inversion</span> Ha.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk3e"><span class="kn">Lemma</span> <span class="nf">set_union_nodup_left</span> `{EqDecision A} (l l&#39; : <span class="nb">set</span> A)
  : NoDup l -&gt; NoDup (set_union l l&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l, l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup l → NoDup (set_union l l&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk3f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l, l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup l → NoDup (set_union l l&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk40"><span class="nb">intro</span> Hl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l, l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_union l l&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk41"><span class="nb">induction</span> l&#39; <span class="kr">as</span> [|x&#39; l&#39; IH]; [<span class="nb">trivial</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>NoDup (set_union l l&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_union l (x&#39; :: l&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">apply</span> set_add_nodup.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk42"><span class="kn">Lemma</span> <span class="nf">set_union_subseteq_left</span> `{EqDecision A}  : <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  s1 ⊆ (set_union s1 s2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s1</span> <span class="nv">s2</span> : list A, s1 ⊆ set_union s1 s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk43"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s1</span> <span class="nv">s2</span> : list A, s1 ⊆ set_union s1 s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk44"><span class="nb">intros</span>; <span class="nb">intros</span> x H; <span class="nb">apply</span> set_union_intro.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∈ s1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s1 ∨ x ∈ s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">left</span>; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk45"><span class="kn">Lemma</span> <span class="nf">set_union_subseteq_right</span> `{EqDecision A}  : <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  s2 ⊆ (set_union s1 s2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s1</span> <span class="nv">s2</span> : list A, s2 ⊆ set_union s1 s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk46"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s1</span> <span class="nv">s2</span> : list A, s2 ⊆ set_union s1 s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk47"><span class="nb">intros</span>; <span class="nb">intros</span> x H; <span class="nb">apply</span> set_union_intro.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∈ s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s1 ∨ x ∈ s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">right</span>; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk48"><span class="kn">Lemma</span> <span class="nf">set_union_subseteq_iff</span> `{EqDecision A}  : <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">s</span> : list A),
  set_union s1 s2 ⊆ s &lt;-&gt; s1 ⊆ s /\ s2 ⊆ s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">s</span> : list A,
  set_union s1 s2 ⊆ s ↔ s1 ⊆ s ∧ s2 ⊆ s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk49"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">s</span> : list A,
  set_union s1 s2 ⊆ s ↔ s1 ⊆ s ∧ s2 ⊆ s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk4a"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2, s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_union s1 s2 ⊆ s ↔ s1 ⊆ s ∧ s2 ⊆ s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk4b"><span class="nb">unfold</span> subseteq, list_subseteq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2, s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ set_union s1 s2 → x ∈ s)
↔ (<span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ s1 → x ∈ s)
  ∧ (<span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ s2 → x ∈ s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk4c"><span class="nb">setoid_rewrite</span> set_union_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2, s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ s1 ∨ x ∈ s2 → x ∈ s)
↔ (<span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ s1 → x ∈ s)
  ∧ (<span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ s2 → x ∈ s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk4d"><span class="kn">Lemma</span> <span class="nf">set_union_iterated_nodup</span> `{EqDecision A}
  (ss : list (list A))
  (H : <span class="kr">forall</span> <span class="nv">s</span>, s ∈ ss -&gt; NoDup s) :
  NoDup (fold_right set_union [] ss).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (foldr set_union [] ss)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk4e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (foldr set_union [] ss)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk4f"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (foldr set_union [] ss)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk50"><span class="nb">generalize dependent</span> ss.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">ss</span> : list (list A),
  (<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
  → NoDup (foldr set_union [] ss)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk51"><span class="nb">induction</span> ss.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ [] → NoDup s)
→ NoDup (foldr set_union [] [])</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk52" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk52"><hr></label><div class="goal-conclusion">(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → NoDup s)
→ NoDup (foldr set_union [] (a :: ss))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk53">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ [] → NoDup s)
→ NoDup (foldr set_union [] [])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk54"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ [] → NoDup s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (foldr set_union [] [])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk55"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ [] → NoDup s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk56"><span class="nb">apply</span> NoDup_nil.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ [] → NoDup s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">True</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">trivial</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk57">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → NoDup s)
→ NoDup (foldr set_union [] (a :: ss))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk58"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → NoDup s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (foldr set_union [] (a :: ss))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk59"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → NoDup s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_union a (foldr set_union [] ss))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk5a"><span class="nb">apply</span> set_union_nodup.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → NoDup s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk5b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → NoDup s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk5b"><hr></label><div class="goal-conclusion">NoDup (foldr set_union [] ss)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk5c"><span class="nb">specialize</span> (H a).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a ∈ a :: ss → NoDup a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk5d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → NoDup s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk5d"><hr></label><div class="goal-conclusion">NoDup (foldr set_union [] ss)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk5e"><span class="nb">apply</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a ∈ a :: ss → NoDup a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ a :: ss</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk5f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → NoDup s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk5f"><hr></label><div class="goal-conclusion">NoDup (foldr set_union [] ss)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk60"><span class="nb">apply</span> elem_of_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a ∈ a :: ss → NoDup a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a = a ∨ a ∈ ss</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk61" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → NoDup s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk61"><hr></label><div class="goal-conclusion">NoDup (foldr set_union [] ss)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk62"><span class="nb">left</span>; <span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → NoDup s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (foldr set_union [] ss)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk63"><span class="nb">apply</span> IHss.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → NoDup s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk64"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → NoDup s</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>s ∈ ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk65"><span class="nb">specialize</span> (H s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>s ∈ a :: ss → NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>s ∈ ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk66">spec H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>s ∈ a :: ss → NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>s ∈ ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s ∈ a :: ss</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk67" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>s ∈ ss</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk67"><hr></label><div class="goal-conclusion">NoDup s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk68"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>s ∈ a :: ss → NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>s ∈ ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s ∈ a :: ss</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk69" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>s ∈ ss</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk69"><hr></label><div class="goal-conclusion">NoDup s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk6a"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>s ∈ a :: ss → NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>s ∈ ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s ∈ ss</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk6b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>s ∈ ss</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk6b"><hr></label><div class="goal-conclusion">NoDup s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk6c"><span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → NoDup s)
→ NoDup (foldr set_union [] ss)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>s ∈ ss</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk6d"><span class="kn">Lemma</span> <span class="nf">set_union_in_iterated</span>
  `{EqDecision A}
  (ss : list (<span class="nb">set</span> A))
  (a : A)
  : a ∈ (fold_right set_union [] ss) &lt;-&gt; Exists (<span class="kr">fun</span> <span class="nv">s</span> =&gt; a ∈ s) ss.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ foldr set_union [] ss
↔ Exists (<span class="kr">λ</span> <span class="nv">s</span> : <span class="nb">set</span> A, a ∈ s) ss</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk6e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ foldr set_union [] ss
↔ Exists (<span class="kr">λ</span> <span class="nv">s</span> : <span class="nb">set</span> A, a ∈ s) ss</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk6f"><span class="nb">rewrite</span> Exists_exists.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk70"><span class="nb">induction</span> ss; <span class="nb">split</span>; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ [] → <span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ [] ∧ a ∈ x</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk71" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk71"><hr></label><div class="goal-conclusion">(<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ [] ∧ a ∈ x) → a ∈ []</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk72" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk72"><hr></label><div class="goal-conclusion">a ∈ set_union a0 (foldr set_union [] ss)
→ <span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ a0 :: ss ∧ a ∈ x</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk73" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk73"><hr></label><div class="goal-conclusion">(<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ a0 :: ss ∧ a ∈ x)
→ a ∈ set_union a0 (foldr set_union [] ss)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk74">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ [] → <span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ [] ∧ a ∈ x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intro</span> H; <span class="nb">inversion</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk75">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ [] ∧ a ∈ x) → a ∈ []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> [x [Hin _]]; <span class="nb">inversion</span> Hin.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk76">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ set_union a0 (foldr set_union [] ss)
→ <span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ a0 :: ss ∧ a ∈ x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk77"><span class="nb">intro</span> Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a ∈ set_union a0 (foldr set_union [] ss)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ a0 :: ss ∧ a ∈ x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk78"><span class="nb">apply</span> set_union_iff <span class="kr">in</span> Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a ∈ a0 ∨ a ∈ foldr set_union [] ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ a0 :: ss ∧ a ∈ x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk79"><span class="nb">destruct</span> Hin <span class="kr">as</span> [Hina0 | Hinss].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>Hina0</var><span class="hyp-type"><b>: </b><span>a ∈ a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ a0 :: ss ∧ a ∈ x</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk7a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>Hinss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk7a"><hr></label><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ a0 :: ss ∧ a ∈ x</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk7b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>Hina0</var><span class="hyp-type"><b>: </b><span>a ∈ a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ a0 :: ss ∧ a ∈ x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk7c"><span class="kr">exists</span> <span class="nv">a0</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>Hina0</var><span class="hyp-type"><b>: </b><span>a ∈ a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ a0 :: ss ∧ a ∈ a0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk7d"><span class="nb">split</span>; <span class="kp">try</span> <span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>Hina0</var><span class="hyp-type"><b>: </b><span>a ∈ a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ a0 :: ss</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk7e"><span class="nb">apply</span> elem_of_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>Hina0</var><span class="hyp-type"><b>: </b><span>a ∈ a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 = a0 ∨ a0 ∈ ss</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk7f"><span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>Hina0</var><span class="hyp-type"><b>: </b><span>a ∈ a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 = a0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk80">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>Hinss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ a0 :: ss ∧ a ∈ x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk81"><span class="nb">apply</span> IHss <span class="kr">in</span> Hinss.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>Hinss</var><span class="hyp-type"><b>: </b><span><span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ a0 :: ss ∧ a ∈ x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk82"><span class="nb">destruct</span> Hinss <span class="kr">as</span> [x [Hinss Hinx]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hinss</var><span class="hyp-type"><b>: </b><span>x ∈ ss</span></span></span><br><span><var>Hinx</var><span class="hyp-type"><b>: </b><span>a ∈ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ a0 :: ss ∧ a ∈ x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk83"><span class="kr">exists</span> <span class="nv">x</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hinss</var><span class="hyp-type"><b>: </b><span>x ∈ ss</span></span></span><br><span><var>Hinx</var><span class="hyp-type"><b>: </b><span>a ∈ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ a0 :: ss ∧ a ∈ x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk84"><span class="nb">split</span>; <span class="kp">try</span> <span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hinss</var><span class="hyp-type"><b>: </b><span>x ∈ ss</span></span></span><br><span><var>Hinx</var><span class="hyp-type"><b>: </b><span>a ∈ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ a0 :: ss</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk85"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hinss</var><span class="hyp-type"><b>: </b><span>x ∈ ss</span></span></span><br><span><var>Hinx</var><span class="hyp-type"><b>: </b><span>a ∈ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ ss</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk86">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ a0 :: ss ∧ a ∈ x)
→ a ∈ set_union a0 (foldr set_union [] ss)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk87"><span class="nb">rewrite</span> set_union_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ a0 :: ss ∧ a ∈ x)
→ a ∈ a0 ∨ a ∈ foldr set_union [] ss</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk88"><span class="nb">intros</span> [x [Hx Ha]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ a0 :: ss</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ∈ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ a0 ∨ a ∈ foldr set_union [] ss</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk89"><span class="nb">apply</span> elem_of_cons <span class="kr">in</span> Hx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x = a0 ∨ x ∈ ss</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ∈ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ a0 ∨ a ∈ foldr set_union [] ss</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk8a"><span class="nb">destruct</span> Hx; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ∈ a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ a0 ∨ a ∈ foldr set_union [] ss</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk8b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∈ ss</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ∈ x</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk8b"><hr></label><div class="goal-conclusion">a ∈ a0 ∨ a ∈ foldr set_union [] ss</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk8c">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ∈ a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ a0 ∨ a ∈ foldr set_union [] ss</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk8d"><span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ∈ a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ a0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk8e">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∈ ss</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ∈ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ a0 ∨ a ∈ foldr set_union [] ss</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk8f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk8f"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∈ ss</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ∈ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ foldr set_union [] ss</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk90" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk90"><span class="nb">apply</span> IHss.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∈ ss</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ∈ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk91"><span class="kr">exists</span> <span class="nv">x</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∈ ss</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ∈ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ ss ∧ a ∈ x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk92"><span class="nb">split</span>; [|<span class="bp">assumption</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss
↔ (<span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∈ ss</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ∈ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ ss</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk93"><span class="kn">Lemma</span> <span class="nf">set_union_iterated_subseteq</span>
  `{EqDecision A}
  (ss ss&#39;: list (<span class="nb">set</span> A))
  (Hincl : ss ⊆ ss&#39;) :
  (fold_right set_union [] ss) ⊆
  (fold_right set_union [] ss&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss, ss'</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>ss ⊆ ss&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldr set_union [] ss ⊆ foldr set_union [] ss&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk94"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss, ss'</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>ss ⊆ ss&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldr set_union [] ss ⊆ foldr set_union [] ss&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk95"><span class="nb">intros</span> a H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss, ss'</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>ss ⊆ ss&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ foldr set_union [] ss&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk96"><span class="nb">apply</span> set_union_in_iterated <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss, ss'</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>ss ⊆ ss&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Exists (<span class="kr">λ</span> <span class="nv">s</span> : <span class="nb">set</span> A, a ∈ s) ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ foldr set_union [] ss&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk97"><span class="nb">apply</span> set_union_in_iterated.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss, ss'</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>ss ⊆ ss&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Exists (<span class="kr">λ</span> <span class="nv">s</span> : <span class="nb">set</span> A, a ∈ s) ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Exists (<span class="kr">λ</span> <span class="nv">s</span> : <span class="nb">set</span> A, a ∈ s) ss&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk98"><span class="nb">rewrite</span> Exists_exists <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss, ss'</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>ss ⊆ ss&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss&#39; ∧ a ∈ x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk99"><span class="nb">destruct</span> H <span class="kr">as</span> [x [Hx Ha]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss, ss'</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>ss ⊆ ss&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ ss</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ∈ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss&#39; ∧ a ∈ x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk9a"><span class="kr">exists</span> <span class="nv">x</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss, ss'</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>ss ⊆ ss&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ ss</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ∈ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ ss&#39; ∧ a ∈ x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk9b"><span class="nb">unfold</span> incl <span class="kr">in</span> Hincl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss, ss'</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>ss ⊆ ss&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ ss</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ∈ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ ss&#39; ∧ a ∈ x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk9c"><span class="nb">split</span>; [|<span class="bp">assumption</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss, ss'</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>ss ⊆ ss&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ ss</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ∈ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ ss&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk9d"><span class="nb">apply</span> Hincl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss, ss'</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>ss ⊆ ss&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ ss</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ∈ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ ss</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk9e"><span class="kn">Lemma</span> <span class="nf">set_union_empty_left</span> `{EqDecision A}  : <span class="kr">forall</span> (<span class="nv">s</span> : list A),
  NoDup s -&gt; set_eq (set_union [] s) s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s</span> : list A, NoDup s → set_eq (set_union [] s) s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk9f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s</span> : list A, NoDup s → set_eq (set_union [] s) s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chka0"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (set_union [] s) s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chka1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chka1"><span class="nb">split</span>; <span class="nb">intros</span> x Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ∈ set_union [] s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chka2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chka2"><hr></label><div class="goal-conclusion">x ∈ set_union [] s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chka3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ∈ set_union [] s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chka4"><span class="nb">apply</span> set_union_elim <span class="kr">in</span> Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ∈ [] ∨ x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chka5"><span class="nb">destruct</span> Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ∈ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chka6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chka6"><hr></label><div class="goal-conclusion">x ∈ s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chka7">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ∈ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">inversion</span> H0.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chka8">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chka9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ set_union [] s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkaa"><span class="nb">apply</span> set_union_intro.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ [] ∨ x ∈ s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkab"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkac"><span class="kn">Lemma</span> <span class="nf">map_list_subseteq</span> {<span class="nv">A</span> <span class="nv">B</span>} : <span class="kr">forall</span> (<span class="nv">f</span> : B -&gt; A) (<span class="nv">s</span> <span class="nv">s&#39;</span> : list B),
  s ⊆ s&#39; -&gt; (map f s) ⊆ (map f s&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">f</span> : B → A) (<span class="nv">s</span> <span class="nv">s&#39;</span> : list B),
  s ⊆ s&#39; → map f s ⊆ map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkad" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkad"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">f</span> : B → A) (<span class="nv">s</span> <span class="nv">s&#39;</span> : list B),
  s ⊆ s&#39; → map f s ⊆ map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkae" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkae"><span class="nb">intro</span> f; <span class="nb">induction</span> s; <span class="nb">intros</span>; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>[] ⊆ s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] ⊆ map f s&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkaf" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : list B, s ⊆ s&#39; → map f s ⊆ map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkaf"><hr></label><div class="goal-conclusion">f a :: map f s ⊆ map f s&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkb0">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>[] ⊆ s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] ⊆ map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> list_subseteq_nil.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkb1">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : list B, s ⊆ s&#39; → map f s ⊆ map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a :: map f s ⊆ map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkb2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkb2"><span class="nb">assert</span> (s ⊆ s&#39;) <span class="kr">as</span> Hs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : list B, s ⊆ s&#39; → map f s ⊆ map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s ⊆ s&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkb3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : list B, s ⊆ s&#39; → map f s ⊆ map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>s ⊆ s&#39;</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkb3"><hr></label><div class="goal-conclusion">f a :: map f s ⊆ map f s&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkb4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkb4">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : list B, s ⊆ s&#39; → map f s ⊆ map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s ⊆ s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkb5"><span class="nb">intros</span> b Hs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : list B, s ⊆ s&#39; → map f s ⊆ map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>b ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">b ∈ s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkb6"><span class="nb">apply</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : list B, s ⊆ s&#39; → map f s ⊆ map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>b ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">b ∈ a :: s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">right</span>; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkb7">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : list B, s ⊆ s&#39; → map f s ⊆ map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>s ⊆ s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a :: map f s ⊆ map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkb8">spec IHs s&#39; Hs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>s ⊆ s&#39;</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>map f s ⊆ map f s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a :: map f s ⊆ map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkb9"><span class="nb">intros</span> b Hs&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>s ⊆ s&#39;</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>map f s ⊆ map f s&#39;</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>b ∈ f a :: map f s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">b ∈ map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkba" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkba"><span class="nb">apply</span> elem_of_cons <span class="kr">in</span> Hs&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>s ⊆ s&#39;</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>map f s ⊆ map f s&#39;</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>b = f a ∨ b ∈ map f s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">b ∈ map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkbb"><span class="nb">destruct</span> Hs&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>s ⊆ s&#39;</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>map f s ⊆ map f s&#39;</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>b = f a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">b ∈ map f s&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkbc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>s ⊆ s&#39;</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>map f s ⊆ map f s&#39;</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>b ∈ map f s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkbc"><hr></label><div class="goal-conclusion">b ∈ map f s&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkbd">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>s ⊆ s&#39;</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>map f s ⊆ map f s&#39;</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>b = f a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">b ∈ map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkbe" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkbe"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>s ⊆ s&#39;</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>map f s ⊆ map f s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a ∈ map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkbf"><span class="nb">apply</span> elem_of_list_fmap_1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>s ⊆ s&#39;</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>map f s ⊆ map f s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkc0"><span class="nb">apply</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>s ⊆ s&#39;</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>map f s ⊆ map f s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ a :: s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkc1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkc1">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>s ⊆ s&#39;</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>map f s ⊆ map f s&#39;</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>b ∈ map f s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">b ∈ map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkc2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkc2"><span class="nb">apply</span> IHs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>s ⊆ s&#39;</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>map f s ⊆ map f s&#39;</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>b ∈ map f s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">b ∈ map f s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkc3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkc3"><span class="kn">Lemma</span> <span class="nf">map_set_eq</span> {<span class="nv">A</span> <span class="nv">B</span>} (<span class="nv">f</span> : B -&gt; A) : <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">s&#39;</span>,
  set_eq s s&#39; -&gt;
  set_eq (map f s) (map f s&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  set_eq s s&#39; → set_eq (map f s) (map f s&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkc4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkc4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  set_eq s s&#39; → set_eq (map f s) (map f s&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>; <span class="nb">apply</span> map_list_subseteq; <span class="nb">apply</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkc5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkc5"><span class="kn">Lemma</span> <span class="nf">set_map_nodup</span> {<span class="nv">A</span> <span class="nv">B</span>} `{EqDecision A} (f : B -&gt; A) : <span class="kr">forall</span> (<span class="nv">s</span> : <span class="nb">set</span> B),
  NoDup (set_map f s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s</span> : <span class="nb">set</span> B, NoDup (set_map f s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkc6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkc6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s</span> : <span class="nb">set</span> B, NoDup (set_map f s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkc7"><span class="nb">induction</span> s; <span class="nb">simpl</span>; <span class="kp">try</span> <span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_map f s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_add (f a) (set_map f s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkc8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkc8"><span class="nb">apply</span> set_add_nodup.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_map f s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_map f s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkc9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkc9"><span class="kn">Lemma</span> <span class="nf">set_map_elem_of</span> {<span class="nv">A</span> <span class="nv">B</span>} `{EqDecision A} (f : B -&gt; A) : <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">s</span>,
  x ∈ s -&gt;
  (f x) ∈ (set_map f s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> : B) (<span class="nv">s</span> : <span class="nb">set</span> B), x ∈ s → f x ∈ set_map f s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkca" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkca"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> : B) (<span class="nv">s</span> : <span class="nb">set</span> B), x ∈ s → f x ∈ set_map f s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkcb" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkcb"><span class="nb">induction</span> s; <span class="nb">intros</span>; <span class="nb">inversion</span> H; <span class="nb">subst</span>; <span class="nb">clear</span> H; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>a ∈ s → f a ∈ set_map f s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a ∈ set_add (f a) (set_map f s)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkcc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>x ∈ s → f x ∈ set_map f s</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkcc"><hr></label><div class="goal-conclusion">f x ∈ set_add (f a) (set_map f s)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkcd" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkcd">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>a ∈ s → f a ∈ set_map f s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a ∈ set_add (f a) (set_map f s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkce" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkce"><span class="nb">apply</span> set_add_intro2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>a ∈ s → f a ∈ set_map f s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a = f a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkcf" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkcf">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>x ∈ s → f x ∈ set_map f s</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f x ∈ set_add (f a) (set_map f s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkd0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkd0"><span class="nb">apply</span> set_add_intro1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>x ∈ s → f x ∈ set_map f s</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f x ∈ set_map f s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkd1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkd1"><span class="nb">apply</span> IHs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>x ∈ s → f x ∈ set_map f s</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkd2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkd2"><span class="kn">Lemma</span> <span class="nf">set_map_exists</span> {<span class="nv">A</span> <span class="nv">B</span>} `{EqDecision A} (f : B -&gt; A) : <span class="kr">forall</span> <span class="nv">y</span> <span class="nv">s</span>,
  y ∈ (set_map f s) &lt;-&gt;
  <span class="kr">exists</span> <span class="nv">x</span>, x ∈ s /\ f x = y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">y</span> : A) (<span class="nv">s</span> : <span class="nb">set</span> B),
  y ∈ set_map f s ↔ (<span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ s ∧ f x = y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkd3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkd3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">y</span> : A) (<span class="nv">s</span> : <span class="nb">set</span> B),
  y ∈ set_map f s ↔ (<span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ s ∧ f x = y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkd4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkd4"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ∈ set_map f s ↔ (<span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ s ∧ f x = y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkd5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkd5"><span class="nb">induction</span> s; <span class="nb">split</span>; <span class="nb">intros</span>; <span class="nb">simpl</span> <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>y ∈ empty_set</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ [] ∧ f x = y</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkd6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ [] ∧ f x = y</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkd6"><hr></label><div class="goal-conclusion">y ∈ set_map f []</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkd7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>y ∈ set_map f s ↔ (<span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ s ∧ f x = y)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>y ∈ set_add (f a) (set_map f s)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkd7"><hr></label><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ a :: s ∧ f x = y</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkd8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>y ∈ set_map f s ↔ (<span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ s ∧ f x = y)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ a :: s ∧ f x = y</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkd8"><hr></label><div class="goal-conclusion">y ∈ set_map f (a :: s)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkd9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkd9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>y ∈ empty_set</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ [] ∧ f x = y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">inversion</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkda" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkda">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ [] ∧ f x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ∈ set_map f []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkdb" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkdb"><span class="nb">destruct</span> H <span class="kr">as</span> [x [Hx Hf]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ []</span></span></span><br><span><var>Hf</var><span class="hyp-type"><b>: </b><span>f x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ∈ set_map f []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">inversion</span> Hx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkdc" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkdc">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>y ∈ set_map f s ↔ (<span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ s ∧ f x = y)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>y ∈ set_add (f a) (set_map f s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ a :: s ∧ f x = y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkdd" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkdd"><span class="nb">apply</span> set_add_iff <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>y ∈ set_map f s ↔ (<span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ s ∧ f x = y)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>y = f a ∨ y ∈ set_map f s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ a :: s ∧ f x = y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkde" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkde"><span class="nb">destruct</span> H <span class="kr">as</span> [Heq | Hin]; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f a ∈ set_map f s ↔ (<span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ s ∧ f x = f a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ a :: s ∧ f x = f a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkdf" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>y ∈ set_map f s ↔ (<span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ s ∧ f x = y)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>y ∈ set_map f s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkdf"><hr></label><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ a :: s ∧ f x = y</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chke0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chke0">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f a ∈ set_map f s ↔ (<span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ s ∧ f x = f a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ a :: s ∧ f x = f a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chke1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chke1"><span class="kr">exists</span> <span class="nv">a</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f a ∈ set_map f s ↔ (<span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ s ∧ f x = f a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ a :: s ∧ f a = f a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chke2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chke2"><span class="nb">split</span>; <span class="kp">try</span> <span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f a ∈ set_map f s ↔ (<span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ s ∧ f x = f a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ a :: s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">left</span>; <span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chke3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chke3">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>y ∈ set_map f s ↔ (<span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ s ∧ f x = y)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>y ∈ set_map f s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ a :: s ∧ f x = y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chke4"><span class="nb">apply</span> IHs <span class="kr">in</span> Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>y ∈ set_map f s ↔ (<span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ s ∧ f x = y)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span><span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ s ∧ f x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ a :: s ∧ f x = y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chke5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chke5"><span class="nb">destruct</span> Hin <span class="kr">as</span> [x [Hin Heq]]; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f x ∈ set_map f s
↔ (<span class="kr">∃</span> <span class="nv">x0</span> : B, x0 ∈ s ∧ f x0 = f x)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x0</span> : B, x0 ∈ a :: s ∧ f x0 = f x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chke6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chke6"><span class="kr">exists</span> <span class="nv">x</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f x ∈ set_map f s
↔ (<span class="kr">∃</span> <span class="nv">x0</span> : B, x0 ∈ s ∧ f x0 = f x)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ a :: s ∧ f x = f x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chke7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chke7"><span class="nb">split</span>; <span class="kp">try</span> <span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f x ∈ set_map f s
↔ (<span class="kr">∃</span> <span class="nv">x0</span> : B, x0 ∈ s ∧ f x0 = f x)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ a :: s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">right</span>; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chke8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chke8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>y ∈ set_map f s ↔ (<span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ s ∧ f x = y)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ a :: s ∧ f x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ∈ set_map f (a :: s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chke9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chke9"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>y ∈ set_map f s ↔ (<span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ s ∧ f x = y)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∃</span> <span class="nv">x</span> : B, x ∈ a :: s ∧ f x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ∈ set_add (f a) (set_map f s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkea" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkea"><span class="nb">destruct</span> H <span class="kr">as</span> [x [Hx Hf]]; <span class="nb">subst</span>; <span class="nb">simpl</span>; <span class="nb">apply</span> set_add_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f x ∈ set_map f s
↔ (<span class="kr">∃</span> <span class="nv">x0</span> : B, x0 ∈ s ∧ f x0 = f x)</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ a :: s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f x = f a ∨ f x ∈ set_map f s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkeb" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkeb"><span class="nb">apply</span> elem_of_cons <span class="kr">in</span> Hx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f x ∈ set_map f s
↔ (<span class="kr">∃</span> <span class="nv">x0</span> : B, x0 ∈ s ∧ f x0 = f x)</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x = a ∨ x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f x = f a ∨ f x ∈ set_map f s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkec" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkec"><span class="nb">destruct</span> Hx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f x ∈ set_map f s
↔ (<span class="kr">∃</span> <span class="nv">x0</span> : B, x0 ∈ s ∧ f x0 = f x)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f x = f a ∨ f x ∈ set_map f s</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chked" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f x ∈ set_map f s
↔ (<span class="kr">∃</span> <span class="nv">x0</span> : B, x0 ∈ s ∧ f x0 = f x)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chked"><hr></label><div class="goal-conclusion">f x = f a ∨ f x ∈ set_map f s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkee">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f x ∈ set_map f s
↔ (<span class="kr">∃</span> <span class="nv">x0</span> : B, x0 ∈ s ∧ f x0 = f x)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f x = f a ∨ f x ∈ set_map f s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">subst</span>; <span class="nb">left</span>; <span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkef" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkef">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f x ∈ set_map f s
↔ (<span class="kr">∃</span> <span class="nv">x0</span> : B, x0 ∈ s ∧ f x0 = f x)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f x = f a ∨ f x ∈ set_map f s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkf0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkf0"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f x ∈ set_map f s
↔ (<span class="kr">∃</span> <span class="nv">x0</span> : B, x0 ∈ s ∧ f x0 = f x)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f x ∈ set_map f s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkf1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkf1"><span class="nb">apply</span> IHs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f x ∈ set_map f s
↔ (<span class="kr">∃</span> <span class="nv">x0</span> : B, x0 ∈ s ∧ f x0 = f x)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">x0</span> : B, x0 ∈ s ∧ f x0 = f x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkf2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkf2"><span class="kr">exists</span> <span class="nv">x</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f x ∈ set_map f s
↔ (<span class="kr">∃</span> <span class="nv">x0</span> : B, x0 ∈ s ∧ f x0 = f x)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s ∧ f x = f x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkf3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkf3"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f x ∈ set_map f s
↔ (<span class="kr">∃</span> <span class="nv">x0</span> : B, x0 ∈ s ∧ f x0 = f x)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkf4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f x ∈ set_map f s
↔ (<span class="kr">∃</span> <span class="nv">x0</span> : B, x0 ∈ s ∧ f x0 = f x)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkf4"><hr></label><div class="goal-conclusion">f x = f x</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkf5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkf5">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f x ∈ set_map f s
↔ (<span class="kr">∃</span> <span class="nv">x0</span> : B, x0 ∈ s ∧ f x0 = f x)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkf6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkf6">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f x ∈ set_map f s
↔ (<span class="kr">∃</span> <span class="nv">x0</span> : B, x0 ∈ s ∧ f x0 = f x)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f x = f x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkf7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkf7"><span class="kn">Lemma</span> <span class="nf">set_map_subseteq</span> {<span class="nv">A</span> <span class="nv">B</span>} `{EqDecision A} (f : B -&gt; A) : <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">s&#39;</span>,
  s ⊆ s&#39; -&gt;
  (set_map f s) ⊆ (set_map f s&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B, s ⊆ s&#39; → set_map f s ⊆ set_map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkf8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkf8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B, s ⊆ s&#39; → set_map f s ⊆ set_map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkf9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkf9"><span class="nb">induction</span> s; <span class="nb">intros</span>; <span class="nb">intro</span> msg; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>[] ⊆ s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>msg ∈ set_map f []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ set_map f s&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkfa" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  s ⊆ s&#39; → set_map f s ⊆ set_map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>msg ∈ set_map f (a :: s)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkfa"><hr></label><div class="goal-conclusion">msg ∈ set_map f s&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkfb" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkfb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>[] ⊆ s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>msg ∈ set_map f []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ set_map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">inversion</span> H0.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkfc" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkfc">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  s ⊆ s&#39; → set_map f s ⊆ set_map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>msg ∈ set_map f (a :: s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ set_map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkfd" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkfd"><span class="nb">simpl</span> <span class="kr">in</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  s ⊆ s&#39; → set_map f s ⊆ set_map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>msg ∈ set_add (f a) (set_map f s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ set_map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkfe" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkfe"><span class="nb">apply</span> set_add_elim <span class="kr">in</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  s ⊆ s&#39; → set_map f s ⊆ set_map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>msg = f a ∨ msg ∈ set_map f s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ set_map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkff" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkff"><span class="nb">destruct</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  s ⊆ s&#39; → set_map f s ⊆ set_map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>msg = f a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ set_map f s&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk100" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  s ⊆ s&#39; → set_map f s ⊆ set_map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>msg ∈ set_map f s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk100"><hr></label><div class="goal-conclusion">msg ∈ set_map f s&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk101" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk101">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  s ⊆ s&#39; → set_map f s ⊆ set_map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>msg = f a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ set_map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk102" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk102"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  s ⊆ s&#39; → set_map f s ⊆ set_map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a ∈ set_map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk103" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk103"><span class="nb">apply</span> set_map_elem_of.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  s ⊆ s&#39; → set_map f s ⊆ set_map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk104" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk104"><span class="nb">apply</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  s ⊆ s&#39; → set_map f s ⊆ set_map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ a :: s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk105" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk105">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  s ⊆ s&#39; → set_map f s ⊆ set_map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>msg ∈ set_map f s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ set_map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk106" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk106"><span class="nb">apply</span> IHs; <span class="kp">try</span> <span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  s ⊆ s&#39; → set_map f s ⊆ set_map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>msg ∈ set_map f s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s ⊆ s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk107" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk107"><span class="nb">intros</span> x; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  s ⊆ s&#39; → set_map f s ⊆ set_map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>msg ∈ set_map f s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk108" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk108"><span class="nb">apply</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  s ⊆ s&#39; → set_map f s ⊆ set_map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>msg ∈ set_map f s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ a :: s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk109" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk109"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  s ⊆ s&#39; → set_map f s ⊆ set_map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ⊆ s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>msg ∈ set_map f s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk10a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk10a"><span class="kn">Lemma</span> <span class="nf">set_map_eq</span> {<span class="nv">A</span> <span class="nv">B</span>} `{EqDecision A} (f : B -&gt; A) : <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">s&#39;</span>,
  set_eq s s&#39; -&gt;
  set_eq (set_map f s) (set_map f s&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  set_eq s s&#39; → set_eq (set_map f s) (set_map f s&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk10b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk10b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  set_eq s s&#39; → set_eq (set_map f s) (set_map f s&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk10c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk10c"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_eq s s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (set_map f s) (set_map f s&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>; <span class="nb">destruct</span> H; <span class="nb">apply</span> set_map_subseteq; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk10d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk10d"><span class="kn">Lemma</span> <span class="nf">set_map_singleton</span> {<span class="nv">A</span> <span class="nv">B</span>} `{EqDecision A} (f : B -&gt; A) : <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">a</span>,
  set_map f s = [a] -&gt;
  <span class="kr">forall</span> <span class="nv">b</span>, b ∈ s -&gt; f b = a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">s</span> : <span class="nb">set</span> B) (<span class="nv">a</span> : A),
  set_map f s = [a] → <span class="kr">∀</span> <span class="nv">b</span> : B, b ∈ s → f b = a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk10e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk10e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">s</span> : <span class="nb">set</span> B) (<span class="nv">a</span> : A),
  set_map f s = [a] → <span class="kr">∀</span> <span class="nv">b</span> : B, b ∈ s → f b = a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk10f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk10f"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_map f s = [a]</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>b ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f b = a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk110" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk110"><span class="nb">apply</span> (set_map_elem_of f) <span class="kr">in</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_map f s = [a]</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>f b ∈ set_map f s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f b = a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk111" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk111"><span class="nb">rewrite</span> H <span class="kr">in</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_map f s = [a]</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>f b ∈ [a]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f b = a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk112" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk112"><span class="nb">apply</span> elem_of_cons <span class="kr">in</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_map f s = [a]</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>f b = a ∨ f b ∈ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f b = a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk113" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk113"><span class="nb">destruct</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_map f s = [a]</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>f b = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f b = a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk114" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_map f s = [a]</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>f b ∈ []</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk114"><hr></label><div class="goal-conclusion">f b = a</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk115" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk115">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_map f s = [a]</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>f b = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f b = a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk116" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk116">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_map f s = [a]</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>f b ∈ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f b = a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">inversion</span> H0.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk117" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk117"><span class="kn">Lemma</span> <span class="nf">filter_set_add</span> `{StrictlyComparable X} P
  `{<span class="kr">∀</span> (<span class="nv">x</span>:X), Decision (P x)} :
  <span class="kr">forall</span> (<span class="nv">l</span>:list X) <span class="nv">x</span>, ~ P x -&gt;
  filter P l = filter P (set_add x l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">l</span> : list X) (<span class="nv">x</span> : X),
  ¬ P x → filter P l = filter P (set_add x l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk118" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk118"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">l</span> : list X) (<span class="nv">x</span> : X),
  ¬ P x → filter P l = filter P (set_add x l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk119" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk119"><span class="nb">induction</span> l <span class="kr">as</span> [|hd tl IHl]; <span class="nb">intros</span> x H_false.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>¬ P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">filter P [] = filter P (set_add x [])</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk11a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X,
  ¬ P x → filter P tl = filter P (set_add x tl)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>¬ P x</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk11a"><hr></label><div class="goal-conclusion">filter P (hd :: tl) = filter P (set_add x (hd :: tl))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk11b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk11b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>¬ P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">filter P [] = filter P (set_add x [])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk11c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk11c"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>¬ P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">filter P [] = filter P [x]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk11d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk11d"><span class="nb">rewrite</span> filter_nil.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>¬ P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] = filter P [x]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk11e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk11e"><span class="nb">rewrite</span> filter_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>¬ P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] =
(<span class="kr">if</span> decide (P x)
 <span class="kr">then</span> x :: filter P []
 <span class="kr">else</span> filter P [])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk11f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk11f"><span class="nb">destruct</span> (decide (P x)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>¬ P x</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] = x :: filter P []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk120" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false, n</var><span class="hyp-type"><b>: </b><span>¬ P x</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk120"><hr></label><div class="goal-conclusion">[] = filter P []</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk121" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk121">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>¬ P x</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] = x :: filter P []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">contradict</span> H_false; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk122" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk122">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false, n</var><span class="hyp-type"><b>: </b><span>¬ P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] = filter P []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk123" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk123"><span class="nb">rewrite</span> filter_nil.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false, n</var><span class="hyp-type"><b>: </b><span>¬ P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] = []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk124" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk124">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, ¬ P x → filter P tl = filter P (set_add x tl)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>¬ P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">filter P (hd :: tl) = filter P (set_add x (hd :: tl))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk125" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk125"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, ¬ P x → filter P tl = filter P (set_add x tl)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>¬ P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">filter P (hd :: tl) =
filter P
  (<span class="kr">if</span> decide (x = hd)
   <span class="kr">then</span> hd :: tl
   <span class="kr">else</span> hd :: set_add x tl)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk126" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk126"><span class="nb">destruct</span> (decide (x = hd)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, ¬ P x → filter P tl = filter P (set_add x tl)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>¬ P x</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>x = hd</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">filter P (hd :: tl) = filter P (hd :: tl)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk127" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X,
  ¬ P x → filter P tl = filter P (set_add x tl)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>¬ P x</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ hd</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk127"><hr></label><div class="goal-conclusion">filter P (hd :: tl) = filter P (hd :: set_add x tl)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk128" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk128">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, ¬ P x → filter P tl = filter P (set_add x tl)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>¬ P x</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>x = hd</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">filter P (hd :: tl) = filter P (hd :: tl)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk129" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk129"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, ¬ P x → filter P tl = filter P (set_add x tl)</span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>¬ P hd</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">filter P (hd :: tl) = filter P (hd :: tl)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk12a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk12a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, ¬ P x → filter P tl = filter P (set_add x tl)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>¬ P x</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ hd</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">filter P (hd :: tl) = filter P (hd :: set_add x tl)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk12b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk12b"><span class="nb">rewrite</span> <span class="mi">2</span> filter_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, ¬ P x → filter P tl = filter P (set_add x tl)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>¬ P x</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ hd</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (P hd)
 <span class="kr">then</span> hd :: filter P tl
 <span class="kr">else</span> filter P tl) =
(<span class="kr">if</span> decide (P hd)
 <span class="kr">then</span> hd :: filter P (set_add x tl)
 <span class="kr">else</span> filter P (set_add x tl))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> (decide (P hd)); <span class="nb">rewrite</span> (IHl x H_false); <span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk12c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk12c"><span class="kn">Lemma</span> <span class="nf">set_add_ignore</span> `{StrictlyComparable X} :
  <span class="kr">forall</span> (<span class="nv">l</span> : list X) (<span class="nv">x</span> : X),
    x ∈ l -&gt;
    set_add x l = l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">l</span> : list X) (<span class="nv">x</span> : X), x ∈ l → set_add x l = l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk12d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk12d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">l</span> : list X) (<span class="nv">x</span> : X), x ∈ l → set_add x l = l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk12e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk12e"><span class="nb">induction</span> l <span class="kr">as</span> [|hd tl IHl]; <span class="nb">intros</span> x H_in.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_in</var><span class="hyp-type"><b>: </b><span>x ∈ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_add x [] = []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk12f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, x ∈ tl → set_add x tl = tl</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_in</var><span class="hyp-type"><b>: </b><span>x ∈ hd :: tl</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk12f"><hr></label><div class="goal-conclusion">set_add x (hd :: tl) = hd :: tl</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk130" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk130">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_in</var><span class="hyp-type"><b>: </b><span>x ∈ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_add x [] = []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">inversion</span> H_in.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk131" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk131">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, x ∈ tl → set_add x tl = tl</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_in</var><span class="hyp-type"><b>: </b><span>x ∈ hd :: tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_add x (hd :: tl) = hd :: tl</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk132" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk132"><span class="nb">inversion</span> H_in.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, x ∈ tl → set_add x tl = tl</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_in</var><span class="hyp-type"><b>: </b><span>x ∈ hd :: tl</span></span></span><br><span><var>x0</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x0 = x</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x = hd</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>l = tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_add hd (hd :: tl) = hd :: tl</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk133" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, x ∈ tl → set_add x tl = tl</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_in</var><span class="hyp-type"><b>: </b><span>x ∈ hd :: tl</span></span></span><br><span><var>x0, y</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ∈ tl</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x0 = x</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y = hd</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>l = tl</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk133"><hr></label><div class="goal-conclusion">set_add x (hd :: tl) = hd :: tl</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk134" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk134">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, x ∈ tl → set_add x tl = tl</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_in</var><span class="hyp-type"><b>: </b><span>x ∈ hd :: tl</span></span></span><br><span><var>x0</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x0 = x</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x = hd</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>l = tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_add hd (hd :: tl) = hd :: tl</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk135" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk135"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, x ∈ tl → set_add x tl = tl</span></span></span><br><span><var>H_in</var><span class="hyp-type"><b>: </b><span>hd ∈ hd :: tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_add hd (hd :: tl) = hd :: tl</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk136" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk136"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, x ∈ tl → set_add x tl = tl</span></span></span><br><span><var>H_in</var><span class="hyp-type"><b>: </b><span>hd ∈ hd :: tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (hd = hd)
 <span class="kr">then</span> hd :: tl
 <span class="kr">else</span> hd :: set_add hd tl) = hd :: tl</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk137" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk137"><span class="nb">destruct</span> (decide (hd = hd)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, x ∈ tl → set_add x tl = tl</span></span></span><br><span><var>H_in</var><span class="hyp-type"><b>: </b><span>hd ∈ hd :: tl</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>hd = hd</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hd :: tl = hd :: tl</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk138" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, x ∈ tl → set_add x tl = tl</span></span></span><br><span><var>H_in</var><span class="hyp-type"><b>: </b><span>hd ∈ hd :: tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>hd ≠ hd</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk138"><hr></label><div class="goal-conclusion">hd :: set_add hd tl = hd :: tl</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk139" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk139"><span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, x ∈ tl → set_add x tl = tl</span></span></span><br><span><var>H_in</var><span class="hyp-type"><b>: </b><span>hd ∈ hd :: tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>hd ≠ hd</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hd :: set_add hd tl = hd :: tl</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">contradiction</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk13a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk13a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, x ∈ tl → set_add x tl = tl</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_in</var><span class="hyp-type"><b>: </b><span>x ∈ hd :: tl</span></span></span><br><span><var>x0, y</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ∈ tl</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x0 = x</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y = hd</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>l = tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_add x (hd :: tl) = hd :: tl</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk13b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk13b"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, x ∈ tl → set_add x tl = tl</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_in</var><span class="hyp-type"><b>: </b><span>x ∈ hd :: tl</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ∈ tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_add x (hd :: tl) = hd :: tl</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk13c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk13c">spec IHl x H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_in</var><span class="hyp-type"><b>: </b><span>x ∈ hd :: tl</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ∈ tl</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>set_add x tl = tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_add x (hd :: tl) = hd :: tl</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk13d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk13d"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_in</var><span class="hyp-type"><b>: </b><span>x ∈ hd :: tl</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ∈ tl</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>set_add x tl = tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (x = hd)
 <span class="kr">then</span> hd :: tl
 <span class="kr">else</span> hd :: set_add x tl) = hd :: tl</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk13e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk13e"><span class="nb">destruct</span> (decide (x = hd)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_in</var><span class="hyp-type"><b>: </b><span>x ∈ hd :: tl</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ∈ tl</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>set_add x tl = tl</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>x = hd</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hd :: tl = hd :: tl</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk13f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_in</var><span class="hyp-type"><b>: </b><span>x ∈ hd :: tl</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ∈ tl</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>set_add x tl = tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ hd</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk13f"><hr></label><div class="goal-conclusion">hd :: set_add x tl = hd :: tl</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk140" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk140"><span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_in</var><span class="hyp-type"><b>: </b><span>x ∈ hd :: tl</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ∈ tl</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>set_add x tl = tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ hd</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hd :: set_add x tl = hd :: tl</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk141" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk141"><span class="nb">rewrite</span> IHl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictlyComparable X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_in</var><span class="hyp-type"><b>: </b><span>x ∈ hd :: tl</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ∈ tl</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>set_add x tl = tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ hd</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hd :: tl = hd :: tl</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk142" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk142"><span class="kn">Lemma</span> <span class="nf">set_add_new</span> `{EqDecision A}:
  <span class="kr">forall</span> (<span class="nv">x</span>:A) <span class="nv">l</span>, ~x ∈ l -&gt; set_add x l = l++[x].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> : A) (<span class="nv">l</span> : <span class="nb">set</span> A), x ∉ l → set_add x l = l ++ [x]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk143" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk143"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> : A) (<span class="nv">l</span> : <span class="nb">set</span> A), x ∉ l → set_add x l = l ++ [x]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk144" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk144"><span class="nb">induction</span> l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∉ [] → set_add x [] = [] ++ [x]</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk145" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>x ∉ l → set_add x l = l ++ [x]</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk145"><hr></label><div class="goal-conclusion">x ∉ a :: l → set_add x (a :: l) = (a :: l) ++ [x]</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk146" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk146">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∉ [] → set_add x [] = [] ++ [x]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk147" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk147">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>x ∉ l → set_add x l = l ++ [x]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∉ a :: l → set_add x (a :: l) = (a :: l) ++ [x]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk148" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk148"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>x ∉ l → set_add x l = l ++ [x]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∉ a :: l
→ (<span class="kr">if</span> decide (x = a) <span class="kr">then</span> a :: l <span class="kr">else</span> a :: set_add x l) =
  a :: l ++ [x]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk149" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk149"><span class="nb">destruct</span> (decide (x = a)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>x ∉ l → set_add x l = l ++ [x]</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>x = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∉ a :: l → a :: l = a :: l ++ [x]</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk14a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>x ∉ l → set_add x l = l ++ [x]</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk14a"><hr></label><div class="goal-conclusion">x ∉ a :: l → a :: set_add x l = a :: l ++ [x]</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk14b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk14b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>x ∉ l → set_add x l = l ++ [x]</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>x = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∉ a :: l → a :: l = a :: l ++ [x]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk14c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk14c"><span class="nb">intro</span> H_not_in.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>x ∉ l → set_add x l = l ++ [x]</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>x = a</span></span></span><br><span><var>H_not_in</var><span class="hyp-type"><b>: </b><span>x ∉ a :: l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a :: l = a :: l ++ [x]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk14d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk14d"><span class="nb">exfalso</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>x ∉ l → set_add x l = l ++ [x]</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>x = a</span></span></span><br><span><var>H_not_in</var><span class="hyp-type"><b>: </b><span>x ∉ a :: l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk14e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk14e"><span class="nb">apply</span> H_not_in.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>x ∉ l → set_add x l = l ++ [x]</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>x = a</span></span></span><br><span><var>H_not_in</var><span class="hyp-type"><b>: </b><span>x ∉ a :: l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ a :: l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk14f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk14f"><span class="nb">rewrite</span> e.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>x ∉ l → set_add x l = l ++ [x]</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>x = a</span></span></span><br><span><var>H_not_in</var><span class="hyp-type"><b>: </b><span>x ∉ a :: l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ a :: l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk150" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk150">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>x ∉ l → set_add x l = l ++ [x]</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∉ a :: l → a :: set_add x l = a :: l ++ [x]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk151" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk151"><span class="nb">intro</span> H_not_in.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>x ∉ l → set_add x l = l ++ [x]</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br><span><var>H_not_in</var><span class="hyp-type"><b>: </b><span>x ∉ a :: l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a :: set_add x l = a :: l ++ [x]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk152" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk152"><span class="nb">rewrite</span> elem_of_cons <span class="kr">in</span> H_not_in.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>x ∉ l → set_add x l = l ++ [x]</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br><span><var>H_not_in</var><span class="hyp-type"><b>: </b><span>¬ (x = a ∨ x ∈ l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a :: set_add x l = a :: l ++ [x]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk153" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk153"><span class="nb">rewrite</span> IHl <span class="bp">by</span> <span class="bp">tauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>x ∉ l → set_add x l = l ++ [x]</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br><span><var>H_not_in</var><span class="hyp-type"><b>: </b><span>¬ (x = a ∨ x ∈ l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a :: l ++ [x] = a :: l ++ [x]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk154" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk154"><span class="kn">Lemma</span> <span class="nf">set_remove_not_elem_of</span> `{EqDecision A} : <span class="kr">forall</span> <span class="nv">x</span> (<span class="nv">s</span> : list A),
  ~ x ∈ s -&gt;
  set_remove x s = s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> : A) (<span class="nv">s</span> : list A), x ∉ s → set_remove x s = s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk155" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk155"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> : A) (<span class="nv">s</span> : list A), x ∉ s → set_remove x s = s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk156" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk156"><span class="nb">induction</span> s; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove x [] = []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk157" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>x ∉ s → set_remove x s = s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ a :: s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk157"><hr></label><div class="goal-conclusion">set_remove x (a :: s) = a :: s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk158" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk158">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove x [] = []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk159" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk159">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>x ∉ s → set_remove x s = s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ a :: s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove x (a :: s) = a :: s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk15a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk15a"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>x ∉ s → set_remove x s = s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ a :: s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (x = a) <span class="kr">then</span> s <span class="kr">else</span> a :: set_remove x s) =
a :: s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk15b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk15b"><span class="nb">destruct</span> (decide (x = a)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>x ∉ s → set_remove x s = s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ a :: s</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>x = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s = a :: s</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk15c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>x ∉ s → set_remove x s = s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ a :: s</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk15c"><hr></label><div class="goal-conclusion">a :: set_remove x s = a :: s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk15d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk15d">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>x ∉ s → set_remove x s = s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ a :: s</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>x = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s = a :: s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">subst</span>; <span class="bp">contradict</span> H; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk15e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk15e">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>x ∉ s → set_remove x s = s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ a :: s</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a :: set_remove x s = a :: s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk15f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk15f"><span class="nb">rewrite</span> IHs; [<span class="bp">reflexivity</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>x ∉ s → set_remove x s = s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ a :: s</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∉ s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk160" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk160"><span class="nb">rewrite</span> elem_of_cons <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>x ∉ s → set_remove x s = s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬ (x = a ∨ x ∈ s)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∉ s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">tauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk161" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk161"><span class="kn">Lemma</span> <span class="nf">set_remove_elim</span> `{EqDecision A} : <span class="kr">forall</span> <span class="nv">x</span> (<span class="nv">s</span> : list A),
  NoDup s -&gt; ~ x ∈ (set_remove x s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> : A) (<span class="nv">s</span> : list A), NoDup s → x ∉ set_remove x s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk162" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk162"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> : A) (<span class="nv">s</span> : list A), NoDup s → x ∉ set_remove x s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk163" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk163"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∉ set_remove x s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk164" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk164"><span class="nb">intro</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ∈ set_remove x s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk165" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk165"><span class="nb">apply</span> set_remove_iff <span class="kr">in</span> H0; <span class="kp">try</span> <span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ∈ s ∧ x ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk166" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk166"><span class="nb">destruct</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk167" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk167"><span class="nb">apply</span> H1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk168" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk168"><span class="kn">Lemma</span> <span class="nf">set_remove_first</span> `{EqDecision A} : <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> (<span class="nv">s</span> : list A),
  x = y -&gt; set_remove x (y::s) = s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> <span class="nv">y</span> : A) (<span class="nv">s</span> : list A),
  x = y → set_remove x (y :: s) = s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk169" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk169"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> <span class="nv">y</span> : A) (<span class="nv">s</span> : list A),
  x = y → set_remove x (y :: s) = s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk16a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk16a"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove x (y :: s) = s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk16b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk16b"><span class="nb">destruct</span> (decide (x = y)) <span class="nb">eqn</span>:Hcmp; <span class="nb">simpl</span>; <span class="nb">rewrite</span> Hcmp; <span class="kp">try</span> <span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ y</span></span></span><br><span><var>Hcmp</var><span class="hyp-type"><b>: </b><span>decide (x = y) = <span class="nb">right</span> n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y :: set_remove x s = s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk16c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk16c"><span class="nb">exfalso</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ y</span></span></span><br><span><var>Hcmp</var><span class="hyp-type"><b>: </b><span>decide (x = y) = <span class="nb">right</span> n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk16d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk16d"><span class="nb">apply</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ y</span></span></span><br><span><var>Hcmp</var><span class="hyp-type"><b>: </b><span>decide (x = y) = <span class="nb">right</span> n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk16e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk16e"><span class="kn">Lemma</span> <span class="nf">set_remove_nodup_1</span> `{EqDecision A} : <span class="kr">forall</span> <span class="nv">x</span> (<span class="nv">s</span> : list A),
  NoDup (set_remove x s) -&gt;
  ~ x ∈ (set_remove x s) -&gt;
  NoDup s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> : A) (<span class="nv">s</span> : list A),
  NoDup (set_remove x s)
  → x ∉ set_remove x s → NoDup s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk16f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk16f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> : A) (<span class="nv">s</span> : list A),
  NoDup (set_remove x s)
  → x ∉ set_remove x s → NoDup s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk170" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk170"><span class="nb">induction</span> s; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x [])</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ∉ set_remove x []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk171" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
→ x ∉ set_remove x s → NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x (a :: s))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ∉ set_remove x (a :: s)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk171"><hr></label><div class="goal-conclusion">NoDup (a :: s)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk172" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk172">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x [])</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ∉ set_remove x []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk173" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk173">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
→ x ∉ set_remove x s → NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x (a :: s))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ∉ set_remove x (a :: s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (a :: s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk174" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk174"><span class="nb">simpl</span> <span class="kr">in</span> H0 .</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
→ x ∉ set_remove x s → NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x (a :: s))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x
∉ (<span class="kr">if</span> decide (x = a)
   <span class="kr">then</span> s
   <span class="kr">else</span> a :: set_remove x s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (a :: s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk175" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk175"><span class="nb">destruct</span> (decide (x = a)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
→ x ∉ set_remove x s → NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x (a :: s))</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>x = a</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ∉ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (a :: s)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk176" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
→ x ∉ set_remove x s → NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x (a :: s))</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ∉ a :: set_remove x s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk176"><hr></label><div class="goal-conclusion">NoDup (a :: s)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk177" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk177">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
→ x ∉ set_remove x s → NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x (a :: s))</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>x = a</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ∉ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (a :: s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk178" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk178"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove a (a :: s))</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove a s)
→ a ∉ set_remove a s → NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>a ∉ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (a :: s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk179" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk179"><span class="nb">simpl</span> <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup
  (<span class="kr">if</span> decide (a = a)
   <span class="kr">then</span> s
   <span class="kr">else</span> a :: set_remove a s)</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove a s)
→ a ∉ set_remove a s → NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>a ∉ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (a :: s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk17a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk17a"><span class="nb">rewrite</span> decide_True <span class="kr">in</span> H; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove a s)
→ a ∉ set_remove a s → NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>a ∉ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (a :: s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">constructor</span>; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk17b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk17b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
→ x ∉ set_remove x s → NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x (a :: s))</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ∉ a :: set_remove x s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (a :: s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk17c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk17c"><span class="nb">rewrite</span> elem_of_cons <span class="kr">in</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
→ x ∉ set_remove x s → NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x (a :: s))</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>¬ (x = a ∨ x ∈ set_remove x s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (a :: s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk17d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk17d"><span class="nb">simpl</span> <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
→ x ∉ set_remove x s → NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup
  (<span class="kr">if</span> decide (x = a)
   <span class="kr">then</span> s
   <span class="kr">else</span> a :: set_remove x s)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>¬ (x = a ∨ x ∈ set_remove x s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (a :: s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk17e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk17e"><span class="nb">rewrite</span> decide_False <span class="kr">in</span> H; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
→ x ∉ set_remove x s → NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (a :: set_remove x s)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>¬ (x = a ∨ x ∈ set_remove x s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (a :: s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk17f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk17f"><span class="nb">inversion</span> H; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
→ x ∉ set_remove x s → NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (a :: set_remove x s)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>¬ (x = a ∨ x ∈ set_remove x s)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a ∉ set_remove x s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (a :: s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk180" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk180"><span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
→ x ∉ set_remove x s → NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (a :: set_remove x s)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>¬ (x = a ∨ x ∈ set_remove x s)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a ∉ set_remove x s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∉ s</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk181" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
→ x ∉ set_remove x s → NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (a :: set_remove x s)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>¬ (x = a ∨ x ∈ set_remove x s)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a ∉ set_remove x s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk181"><hr></label><div class="goal-conclusion">NoDup s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk182" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk182">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
→ x ∉ set_remove x s → NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (a :: set_remove x s)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>¬ (x = a ∨ x ∈ set_remove x s)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a ∉ set_remove x s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∉ s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intro</span> Ha; <span class="nb">apply</span> (set_remove_3 _ x) <span class="kr">in</span> Ha; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk183" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk183">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
→ x ∉ set_remove x s → NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (a :: set_remove x s)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>¬ (x = a ∨ x ∈ set_remove x s)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a ∉ set_remove x s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk184" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk184"><span class="nb">apply</span> IHs; [<span class="bp">assumption</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
→ x ∉ set_remove x s → NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (a :: set_remove x s)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>¬ (x = a ∨ x ∈ set_remove x s)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a ∉ set_remove x s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∉ set_remove x s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk185" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk185"><span class="nb">intro</span> Hx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
→ x ∉ set_remove x s → NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (a :: set_remove x s)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>¬ (x = a ∨ x ∈ set_remove x s)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a ∉ set_remove x s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ set_remove x s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk186" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk186"><span class="bp">contradict</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
→ x ∉ set_remove x s → NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (a :: set_remove x s)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a ∉ set_remove x s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ set_remove x s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = a ∨ x ∈ set_remove x s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">right</span>; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk187" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk187"><span class="kn">Lemma</span> <span class="nf">set_remove_elem_of_iff</span> `{EqDecision A} :  <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> (<span class="nv">s</span> : list A),
  NoDup s -&gt;
  y ∈ s -&gt;
  x ∈ s &lt;-&gt; x = y \/ x ∈ (set_remove y s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> <span class="nv">y</span> : A) (<span class="nv">s</span> : list A),
  NoDup s → y ∈ s → x ∈ s ↔ x = y ∨ x ∈ set_remove y s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk188" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk188"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> <span class="nv">y</span> : A) (<span class="nv">s</span> : list A),
  NoDup s → y ∈ s → x ∈ s ↔ x = y ∨ x ∈ set_remove y s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk189" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk189"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s ↔ x = y ∨ x ∈ set_remove y s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk18a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk18a"><span class="nb">split</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ∈ s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = y ∨ x ∈ set_remove y s</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk18b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ∈ s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x = y ∨ x ∈ set_remove y s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk18b"><hr></label><div class="goal-conclusion">x ∈ s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk18c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk18c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ∈ s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = y ∨ x ∈ set_remove y s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk18d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk18d"><span class="nb">destruct</span> (decide (x = y)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ∈ s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = y ∨ x ∈ set_remove y s</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk18e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ∈ s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ y</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk18e"><hr></label><div class="goal-conclusion">x = y ∨ x ∈ set_remove y s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk18f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk18f">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ∈ s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = y ∨ x ∈ set_remove y s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk190" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk190"><span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ∈ s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk191" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk191">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ∈ s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = y ∨ x ∈ set_remove y s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk192" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk192"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ∈ s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ set_remove y s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> set_remove_3; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk193" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk193">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ∈ s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x = y ∨ x ∈ set_remove y s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk194" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk194"><span class="nb">destruct</span> H1 <span class="kr">as</span> [Heq | Hin].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ∈ s</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk195" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ∈ s</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ∈ set_remove y s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk195"><hr></label><div class="goal-conclusion">x ∈ s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk196" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk196">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ∈ s</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">subst</span>; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk197" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk197">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ∈ s</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ∈ set_remove y s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk198" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk198"><span class="nb">apply</span> set_remove_1 <span class="kr">in</span> Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ∈ s</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk199" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk199"><span class="kn">Lemma</span> <span class="nf">set_add_length</span>
  `{EqDecision A}
  (x : A)
  (s : <span class="nb">set</span> A)
  (Hx : x ∉ s)
  : S (length s) = length (set_add x s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∉ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (length s) = length (set_add x s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk19a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk19a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∉ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (length s) = length (set_add x s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk19b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk19b"><span class="nb">revert</span> x Hx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">x</span> : A, x ∉ s → S (length s) = length (set_add x s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk19c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk19c"><span class="nb">induction</span> s; <span class="nb">intros</span>; [<span class="bp">reflexivity</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A,
  x ∉ s → S (length s) = length (set_add x s)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∉ a :: s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (length (a :: s)) = length (set_add x (a :: s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk19d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk19d"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A,
  x ∉ s → S (length s) = length (set_add x s)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∉ a :: s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (S (length s)) =
length
  (<span class="kr">if</span> decide (x = a) <span class="kr">then</span> a :: s <span class="kr">else</span> a :: set_add x s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk19e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk19e"><span class="nb">destruct</span> (decide (x = a)); [<span class="nb">subst</span>; <span class="nb">elim</span> Hx; <span class="nb">left</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A,
  x ∉ s → S (length s) = length (set_add x s)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∉ a :: s</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (S (length s)) = length (a :: set_add x s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk19f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk19f"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A,
  x ∉ s → S (length s) = length (set_add x s)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∉ a :: s</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (S (length s)) = S (length (set_add x s))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1a0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1a0"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A,
  x ∉ s → S (length s) = length (set_add x s)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∉ a :: s</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (length s) = length (set_add x s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1a1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1a1"><span class="nb">apply</span> IHs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A,
  x ∉ s → S (length s) = length (set_add x s)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∉ a :: s</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∉ s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1a2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1a2"><span class="nb">intro</span> Hs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A,
  x ∉ s → S (length s) = length (set_add x s)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∉ a :: s</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1a3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1a3"><span class="nb">elim</span> Hx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A,
  x ∉ s → S (length s) = length (set_add x s)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∉ a :: s</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ a :: s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1a4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1a4"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A,
  x ∉ s → S (length s) = length (set_add x s)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∉ a :: s</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1a5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1a5"><span class="kn">Lemma</span> <span class="nf">set_remove_length</span>
  `{EqDecision A}
  (x : A)
  (s : <span class="nb">set</span> A)
  (Hx : x ∈ s)
  : length s = S (length (set_remove x s)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length s = S (length (set_remove x s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1a6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1a6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length s = S (length (set_remove x s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1a7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1a7"><span class="nb">generalize dependent</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">x</span> : A,
  x ∈ s → length s = S (length (set_remove x s))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1a8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1a8"><span class="nb">induction</span> s; <span class="nb">intros</span>; <span class="nb">inversion</span> Hx; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A,
  x ∈ s → length s = S (length (set_remove x s))</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>a ∈ a :: s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (a :: s) = S (length (set_remove a (a :: s)))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk1a9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A,
  x ∈ s → length s = S (length (set_remove x s))</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ a :: s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk1a9"><hr></label><div class="goal-conclusion">length (a :: s) = S (length (set_remove x (a :: s)))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1aa" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1aa">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A,
  x ∈ s → length s = S (length (set_remove x s))</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>a ∈ a :: s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (a :: s) = S (length (set_remove a (a :: s)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> set_remove_first;  <span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1ab" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1ab">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A,
  x ∈ s → length s = S (length (set_remove x s))</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ a :: s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (a :: s) = S (length (set_remove x (a :: s)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1ac" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1ac"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A,
  x ∈ s → length s = S (length (set_remove x s))</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ a :: s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (length s) =
S
  (length
     (<span class="kr">if</span> decide (x = a)
      <span class="kr">then</span> s
      <span class="kr">else</span> a :: set_remove x s))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1ad" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1ad"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A,
  x ∈ s → length s = S (length (set_remove x s))</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ a :: s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length s =
length
  (<span class="kr">if</span> decide (x = a) <span class="kr">then</span> s <span class="kr">else</span> a :: set_remove x s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1ae" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1ae"><span class="nb">destruct</span> (decide (x = a)); <span class="kp">try</span> <span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A,
  x ∈ s → length s = S (length (set_remove x s))</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ a :: s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length s = length (a :: set_remove x s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1af" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1af"><span class="nb">apply</span> IHs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A,
  x ∈ s → length s = S (length (set_remove x s))</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ a :: s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ≠ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1b0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1b0"><span class="kn">Lemma</span> <span class="nf">set_eq_remove</span> `{EqDecision A} : <span class="kr">forall</span> <span class="nv">x</span> (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1 -&gt;
  NoDup s2 -&gt;
  set_eq s1 s2 -&gt;
  set_eq (set_remove x s1) (set_remove x s2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1
  → NoDup s2
    → set_eq s1 s2
      → set_eq (set_remove x s1) (set_remove x s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1b1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1b1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1
  → NoDup s2
    → set_eq s1 s2
      → set_eq (set_remove x s1) (set_remove x s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1b2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1b2"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>set_eq s1 s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (set_remove x s1) (set_remove x s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1b3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1b3"><span class="nb">destruct</span> H1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>s1 ⊆ s2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>s2 ⊆ s1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (set_remove x s1) (set_remove x s2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1b4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1b4"><span class="nb">split</span>; <span class="nb">intros</span> a Hin
  ; <span class="nb">apply</span> set_remove_iff; <span class="kp">try</span> <span class="bp">assumption</span>
  ; <span class="nb">apply</span> set_remove_iff <span class="kr">in</span> Hin; <span class="kp">try</span> <span class="bp">assumption</span>; <span class="nb">destruct</span> Hin
  ; <span class="nb">split</span>; <span class="kp">try</span> <span class="bp">assumption</span>
  .</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>s1 ⊆ s2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>s2 ⊆ s1</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a ∈ s1</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>a ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ s2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk1b5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>s1 ⊆ s2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>s2 ⊆ s1</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a ∈ s2</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>a ≠ x</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk1b5"><hr></label><div class="goal-conclusion">a ∈ s1</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1b6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1b6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>s1 ⊆ s2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>s2 ⊆ s1</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a ∈ s1</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>a ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1b7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1b7"><span class="nb">apply</span> H1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>s1 ⊆ s2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>s2 ⊆ s1</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a ∈ s1</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>a ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ s1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1b8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1b8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>s1 ⊆ s2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>s2 ⊆ s1</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a ∈ s2</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>a ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ s1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1b9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1b9"><span class="nb">apply</span> H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>s1 ⊆ s2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>s2 ⊆ s1</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a ∈ s2</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>a ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1ba" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1ba"><span class="kn">Lemma</span> <span class="nf">subseteq_remove_union</span> `{EqDecision A} : <span class="kr">forall</span> <span class="nv">x</span> (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1 -&gt;
  NoDup s2 -&gt;
  (set_remove x (set_union s1 s2)) ⊆
  (set_union s1 (set_remove x s2)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1
  → NoDup s2
    → set_remove x (set_union s1 s2)
      ⊆ set_union s1 (set_remove x s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1bb" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1bb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1
  → NoDup s2
    → set_remove x (set_union s1 s2)
      ⊆ set_union s1 (set_remove x s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1bc" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1bc"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove x (set_union s1 s2)
⊆ set_union s1 (set_remove x s2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1bd" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1bd"><span class="nb">intros</span> y Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>y ∈ set_remove x (set_union s1 s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ∈ set_union s1 (set_remove x s2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1be" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1be"><span class="nb">apply</span> set_remove_iff <span class="kr">in</span> Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>y ∈ set_union s1 s2 ∧ y ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ∈ set_union s1 (set_remove x s2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk1bf" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>y ∈ set_remove x (set_union s1 s2)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">l</span> : <span class="nb">set</span> A),
  NoDup l → a ∈ set_remove b l → a ∈ l ∧ a ≠ b</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk1bf"><hr></label><div class="goal-conclusion">NoDup (set_union s1 s2)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1c0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1c0">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>y ∈ set_union s1 s2 ∧ y ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ∈ set_union s1 (set_remove x s2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1c1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1c1"><span class="nb">apply</span> set_union_intro.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>y ∈ set_union s1 s2 ∧ y ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ∈ s1 ∨ y ∈ set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1c2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1c2"><span class="nb">destruct</span> Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>y ∈ set_union s1 s2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>y ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ∈ s1 ∨ y ∈ set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1c3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1c3"><span class="nb">apply</span> set_union_elim <span class="kr">in</span> H1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>y ∈ s1 ∨ y ∈ s2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>y ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ∈ s1 ∨ y ∈ set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1c4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1c4"><span class="nb">destruct</span> H1; <span class="kp">try</span> (<span class="nb">left</span>; <span class="bp">assumption</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>y ∈ s2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>y ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ∈ s1 ∨ y ∈ set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1c5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1c5"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>y ∈ s2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>y ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ∈ set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> set_remove_3; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1c6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1c6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>y ∈ set_remove x (set_union s1 s2)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">l</span> : <span class="nb">set</span> A),
  NoDup l → a ∈ set_remove b l → a ∈ l ∧ a ≠ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_union s1 s2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> set_union_nodup; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1c7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1c7"><span class="kn">Lemma</span> <span class="nf">set_eq_remove_union_elem_of</span>  `{EqDecision A} : <span class="kr">forall</span> <span class="nv">x</span> (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1 -&gt;
  NoDup s2 -&gt;
  x ∈ s1 -&gt;
  set_eq (set_union s1 (set_remove x s2)) (set_union s1 s2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1
  → NoDup s2
    → x ∈ s1
      → set_eq (set_union s1 (set_remove x s2))
          (set_union s1 s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1c8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1c8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1
  → NoDup s2
    → x ∈ s1
      → set_eq (set_union s1 (set_remove x s2))
          (set_union s1 s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1c9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1c9"><span class="nb">split</span>; <span class="nb">intros</span> msg Hin; <span class="nb">apply</span> set_union_iff; <span class="nb">apply</span> set_union_iff <span class="kr">in</span> Hin
  ; <span class="nb">destruct</span> Hin; <span class="kp">try</span> (<span class="nb">left</span>; <span class="bp">assumption</span>)
  .</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s1</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ set_remove x s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ s1 ∨ msg ∈ s2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk1ca" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s1</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s2</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk1ca"><hr></label><div class="goal-conclusion">msg ∈ s1 ∨ msg ∈ set_remove x s2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1cb" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1cb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s1</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ set_remove x s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ s1 ∨ msg ∈ s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1cc" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1cc"><span class="nb">apply</span> set_remove_iff <span class="kr">in</span> H2; <span class="kp">try</span> <span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s1</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s2 ∧ msg ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ s1 ∨ msg ∈ s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1cd" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1cd"><span class="nb">destruct</span> H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s1</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s2</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>msg ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ s1 ∨ msg ∈ s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1ce" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1ce"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s1</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s2</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>msg ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1cf" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1cf">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s1</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ s1 ∨ msg ∈ set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1d0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1d0"><span class="nb">destruct</span> (decide (msg = x)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s1</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s2</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>msg = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ s1 ∨ msg ∈ set_remove x s2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk1d1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s1</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s2</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>msg ≠ x</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk1d1"><hr></label><div class="goal-conclusion">msg ∈ s1 ∨ msg ∈ set_remove x s2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1d2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1d2">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s1</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s2</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>msg = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ s1 ∨ msg ∈ set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1d3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1d3"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s1</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ∈ s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s1 ∨ x ∈ set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1d4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1d4"><span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s1</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ∈ s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1d5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1d5">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s1</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s2</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>msg ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ s1 ∨ msg ∈ set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1d6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1d6"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s1</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s2</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>msg ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1d7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1d7"><span class="nb">apply</span> set_remove_iff; <span class="kp">try</span> <span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∈ s1</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s2</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>msg ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ s2 ∧ msg ≠ x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1d8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1d8"><span class="kn">Lemma</span> <span class="nf">set_eq_remove_union_not_elem_of</span>  `{EqDecision A} : <span class="kr">forall</span> <span class="nv">x</span> (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1 -&gt;
  NoDup s2 -&gt;
  ~ x ∈ s1 -&gt;
  set_eq (set_union s1 (set_remove x s2)) (set_remove x (set_union s1 s2)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1
  → NoDup s2
    → x ∉ s1
      → set_eq (set_union s1 (set_remove x s2))
          (set_remove x (set_union s1 s2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1d9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1d9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">x</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1
  → NoDup s2
    → x ∉ s1
      → set_eq (set_union s1 (set_remove x s2))
          (set_remove x (set_union s1 s2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1da" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1da"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (set_union s1 (set_remove x s2))
  (set_remove x (set_union s1 s2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1db" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1db"><span class="nb">assert</span> (HnodupUs1s2 := H0).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (set_union s1 (set_remove x s2))
  (set_remove x (set_union s1 s2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1dc" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1dc"><span class="nb">apply</span> (set_union_nodup _ _ H) <span class="kr">in</span> HnodupUs1s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (set_union s1 (set_remove x s2))
  (set_remove x (set_union s1 s2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1dd" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1dd"><span class="nb">split</span>; <span class="nb">intros</span> msg Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>msg ∈ set_union s1 (set_remove x s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ set_remove x (set_union s1 s2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk1de" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>msg ∈ set_remove x (set_union s1 s2)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk1de"><hr></label><div class="goal-conclusion">msg ∈ set_union s1 (set_remove x s2)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1df" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1df">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>msg ∈ set_union s1 (set_remove x s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ set_remove x (set_union s1 s2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1e0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1e0"><span class="nb">apply</span> set_remove_iff; <span class="kp">try</span> <span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>msg ∈ set_union s1 (set_remove x s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ set_union s1 s2 ∧ msg ≠ x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1e1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1e1"><span class="nb">apply</span> set_union_iff <span class="kr">in</span> Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>msg ∈ s1 ∨ msg ∈ set_remove x s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ set_union s1 s2 ∧ msg ≠ x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1e2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1e2"><span class="nb">destruct</span> Hin; <span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ set_union s1 s2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk1e3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s1</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk1e3"><hr></label><div class="goal-conclusion">msg ≠ x</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk1e4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ set_remove x s2</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk1e4"><hr></label><div class="goal-conclusion">msg ∈ set_union s1 s2</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk1e5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ set_remove x s2</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk1e5"><hr></label><div class="goal-conclusion">msg ≠ x</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1e6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1e6">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ set_union s1 s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1e7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1e7"><span class="nb">apply</span> set_union_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ s1 ∨ msg ∈ s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1e8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1e8"><span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ s1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1e9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1e9">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ≠ x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1ea" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1ea"><span class="nb">intro</span>; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ∈ s1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1eb" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1eb"><span class="nb">apply</span> H1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ∈ s1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ s1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1ec" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1ec">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ set_remove x s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ set_union s1 s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1ed" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1ed"><span class="nb">apply</span> set_remove_iff <span class="kr">in</span> H2; <span class="kp">try</span> <span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s2 ∧ msg ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ set_union s1 s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1ee" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1ee"><span class="nb">destruct</span> H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s2</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>msg ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ set_union s1 s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1ef" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1ef"><span class="nb">apply</span> set_union_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s2</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>msg ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ s1 ∨ msg ∈ s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1f0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1f0"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s2</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>msg ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1f1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1f1">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ set_remove x s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ≠ x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1f2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1f2"><span class="nb">intro</span>; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ∈ set_remove x s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1f3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1f3"><span class="nb">apply</span> set_remove_iff <span class="kr">in</span> H2; <span class="kp">try</span> <span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ∈ s2 ∧ x ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1f4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1f4"><span class="nb">destruct</span> H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ∈ s2</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>x ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1f5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1f5"><span class="nb">apply</span> H3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ∈ s2</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>x ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1f6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1f6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>msg ∈ set_remove x (set_union s1 s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ set_union s1 (set_remove x s2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1f7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1f7"><span class="nb">apply</span> set_union_iff; <span class="kp">try</span> <span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>msg ∈ set_remove x (set_union s1 s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ s1 ∨ msg ∈ set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1f8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1f8"><span class="nb">apply</span> set_remove_iff <span class="kr">in</span> Hin; <span class="kp">try</span> <span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>msg ∈ set_union s1 s2 ∧ msg ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ s1 ∨ msg ∈ set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1f9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1f9"><span class="nb">destruct</span> Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ set_union s1 s2</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>msg ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ s1 ∨ msg ∈ set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1fa" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1fa"><span class="nb">apply</span> set_union_iff <span class="kr">in</span> H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s1 ∨ msg ∈ s2</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>msg ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ s1 ∨ msg ∈ set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1fb" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1fb"><span class="nb">destruct</span> H2; <span class="kp">try</span> (<span class="nb">left</span>; <span class="bp">assumption</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s2</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>msg ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ s1 ∨ msg ∈ set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1fc" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1fc"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s2</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>msg ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1fd" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1fd"><span class="nb">apply</span> set_remove_iff; <span class="kp">try</span> <span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ∉ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ∈ s2</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>msg ≠ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ∈ s2 ∧ msg ≠ x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
An improved version of the <span class="inlinecode"><span class="id" title="var">set_diff_nodup</span></span> Lemma not requiring <span class="inlinecode"><span class="id" title="var">NoDup</span></span>
for the second argument.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp"><span class="c">(* TODO(palmskog): consider submitting a PR to Coq&#39;s stdlib. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1fe" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1fe"><span class="kn">Lemma</span> <span class="nf">set_diff_nodup&#39;</span> `{EqDecision A} (l l&#39; : list A)
  : NoDup l -&gt; NoDup (set_diff l l&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l, l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup l → NoDup (set_diff l l&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1ff" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1ff"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l, l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup l → NoDup (set_diff l l&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk200" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk200"><span class="nb">induction</span> <span class="mi">1</span> <span class="kr">as</span> [|x l H H&#39; IH]; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk201" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>H'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>NoDup (set_diff l l&#39;)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk201"><hr></label><div class="goal-conclusion">NoDup
  (<span class="kr">if</span> decide (x ∈ l&#39;)
   <span class="kr">then</span> set_diff l l&#39;
   <span class="kr">else</span> set_add x (set_diff l l&#39;))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk202" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk202">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk203" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk203">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>H'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>NoDup (set_diff l l&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup
  (<span class="kr">if</span> decide (x ∈ l&#39;)
   <span class="kr">then</span> set_diff l l&#39;
   <span class="kr">else</span> set_add x (set_diff l l&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk204" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk204">case_decide.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>H'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>NoDup (set_diff l l&#39;)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ∈ l&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_diff l l&#39;)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk205" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>H'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>NoDup (set_diff l l&#39;)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ∉ l&#39;</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk205"><hr></label><div class="goal-conclusion">NoDup (set_add x (set_diff l l&#39;))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk206" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk206">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>H'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>NoDup (set_diff l l&#39;)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ∈ l&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_diff l l&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> IH; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk207" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk207">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>H'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>NoDup (set_diff l l&#39;)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ∉ l&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_add x (set_diff l l&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk208" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk208"><span class="nb">apply</span> set_add_nodup.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>H'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>NoDup (set_diff l l&#39;)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ∉ l&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_diff l l&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> IH.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk209" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk209"><span class="kn">Lemma</span> <span class="nf">diff_app_nodup</span> `{EqDecision A} : <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1 -&gt;
  NoDup s2 -&gt;
  NoDup ((set_diff s1 s2) ++ s2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s1</span> <span class="nv">s2</span> : list A,
  NoDup s1 → NoDup s2 → NoDup (set_diff s1 s2 ++ s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk20a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk20a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s1</span> <span class="nv">s2</span> : list A,
  NoDup s1 → NoDup s2 → NoDup (set_diff s1 s2 ++ s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk20b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk20b"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_diff s1 s2 ++ s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk20c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk20c"><span class="nb">apply</span> nodup_append; <span class="kp">try</span> <span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_diff s1 s2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk20d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk20d"><hr></label><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">a</span> : A, a ∈ set_diff s1 s2 → a ∉ s2</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk20e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk20e"><hr></label><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">a</span> : A, a ∈ s2 → a ∉ set_diff s1 s2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk20f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk20f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_diff s1 s2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> set_diff_nodup; <span class="kp">try</span> <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk210" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk210">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">a</span> : A, a ∈ set_diff s1 s2 → a ∉ s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk211" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk211"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ set_diff s1 s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∉ s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (set_diff_elim2 a s1); <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk212" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk212">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">a</span> : A, a ∈ s2 → a ∉ set_diff s1 s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk213" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk213"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∉ set_diff s1 s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk214" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk214"><span class="nb">intro</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ s2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ set_diff s1 s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk215" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk215"><span class="nb">apply</span> set_diff_iff <span class="kr">in</span> H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ s2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ s1 ∧ a ∉ s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk216" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk216"><span class="nb">destruct</span> H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ s2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ s1</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a ∉ s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk217" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk217"><span class="nb">apply</span> H3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ s2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ s1</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a ∉ s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk218" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk218"><span class="kn">Lemma</span> <span class="nf">add_remove_inverse</span> `{EqDecision X}:
  <span class="kr">forall</span> (<span class="nv">lv</span> : list X) (<span class="nv">v</span> : X),
    ~ v ∈ lv -&gt;
    set_remove v (set_add v lv) = lv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">lv</span> : list X) (<span class="nv">v</span> : X),
  v ∉ lv → set_remove v (set_add v lv) = lv</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk219" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk219"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">lv</span> : list X) (<span class="nv">v</span> : X),
  v ∉ lv → set_remove v (set_add v lv) = lv</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk21a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk21a"><span class="nb">induction</span> lv <span class="kr">as</span> [|hd tl IHlv]; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove v (set_add v []) = []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk21b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">v</span> : X,
  v ∉ tl → set_remove v (set_add v tl) = tl</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ hd :: tl</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk21b"><hr></label><div class="goal-conclusion">set_remove v (set_add v (hd :: tl)) = hd :: tl</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk21c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk21c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove v (set_add v []) = []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk21d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk21d"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (v = v) <span class="kr">then</span> [] <span class="kr">else</span> v :: empty_set) = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> decide_True; <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk21e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk21e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">v</span> : X,
  v ∉ tl → set_remove v (set_add v tl) = tl</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ hd :: tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove v (set_add v (hd :: tl)) = hd :: tl</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk21f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk21f"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">v</span> : X,
  v ∉ tl → set_remove v (set_add v tl) = tl</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ hd :: tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove v
  (<span class="kr">if</span> decide (v = hd)
   <span class="kr">then</span> hd :: tl
   <span class="kr">else</span> hd :: set_add v tl) = hd :: tl</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk220" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk220"><span class="nb">destruct</span> (decide (v = hd)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">v</span> : X,
  v ∉ tl → set_remove v (set_add v tl) = tl</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ hd :: tl</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>v = hd</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove v (hd :: tl) = hd :: tl</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk221" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">v</span> : X,
  v ∉ tl → set_remove v (set_add v tl) = tl</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ hd :: tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>v ≠ hd</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk221"><hr></label><div class="goal-conclusion">set_remove v (hd :: set_add v tl) = hd :: tl</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk222" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk222"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">v</span> : X,
  v ∉ tl → set_remove v (set_add v tl) = tl</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hd ∉ hd :: tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove hd (hd :: tl) = hd :: tl</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk223" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">v</span> : X,
  v ∉ tl → set_remove v (set_add v tl) = tl</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ hd :: tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>v ≠ hd</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk223"><hr></label><div class="goal-conclusion">set_remove v (hd :: set_add v tl) = hd :: tl</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk224" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk224"><span class="nb">exfalso</span>; <span class="nb">apply</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">v</span> : X,
  v ∉ tl → set_remove v (set_add v tl) = tl</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hd ∉ hd :: tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hd ∈ hd :: tl</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk225" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">v</span> : X,
  v ∉ tl → set_remove v (set_add v tl) = tl</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ hd :: tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>v ≠ hd</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk225"><hr></label><div class="goal-conclusion">set_remove v (hd :: set_add v tl) = hd :: tl</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk226" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk226"><span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">v</span> : X,
  v ∉ tl → set_remove v (set_add v tl) = tl</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ hd :: tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>v ≠ hd</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove v (hd :: set_add v tl) = hd :: tl</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk227" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk227">spec IHlv v.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ hd :: tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>v ≠ hd</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span>v ∉ tl → set_remove v (set_add v tl) = tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove v (hd :: set_add v tl) = hd :: tl</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk228" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk228">spec IHlv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ hd :: tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>v ≠ hd</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span>v ∉ tl → set_remove v (set_add v tl) = tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ∉ tl</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk229" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ hd :: tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>v ≠ hd</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span>set_remove v (set_add v tl) = tl</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk229"><hr></label><div class="goal-conclusion">set_remove v (hd :: set_add v tl) = hd :: tl</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk22a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk22a"><span class="nb">intro</span> Habsurd.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ hd :: tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>v ≠ hd</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span>v ∉ tl → set_remove v (set_add v tl) = tl</span></span></span><br><span><var>Habsurd</var><span class="hyp-type"><b>: </b><span>v ∈ tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk22b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ hd :: tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>v ≠ hd</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span>set_remove v (set_add v tl) = tl</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk22b"><hr></label><div class="goal-conclusion">set_remove v (hd :: set_add v tl) = hd :: tl</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk22c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk22c"><span class="nb">apply</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ hd :: tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>v ≠ hd</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span>v ∉ tl → set_remove v (set_add v tl) = tl</span></span></span><br><span><var>Habsurd</var><span class="hyp-type"><b>: </b><span>v ∈ tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ∈ hd :: tl</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk22d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ hd :: tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>v ≠ hd</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span>set_remove v (set_add v tl) = tl</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk22d"><hr></label><div class="goal-conclusion">set_remove v (hd :: set_add v tl) = hd :: tl</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk22e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk22e"><span class="nb">right</span>; <span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ hd :: tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>v ≠ hd</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span>set_remove v (set_add v tl) = tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove v (hd :: set_add v tl) = hd :: tl</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk22f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk22f"><span class="nb">rewrite</span> &lt;- IHlv <span class="nb">at</span> <span class="mi">2</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ hd :: tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>v ≠ hd</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span>set_remove v (set_add v tl) = tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove v (hd :: set_add v tl) =
hd :: set_remove v (set_add v tl)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk230" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk230"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ hd :: tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>v ≠ hd</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span>set_remove v (set_add v tl) = tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (v = hd)
 <span class="kr">then</span> set_add v tl
 <span class="kr">else</span> hd :: set_remove v (set_add v tl)) =
hd :: set_remove v (set_add v tl)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk231" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk231"><span class="nb">destruct</span> (decide (v = hd)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ hd :: tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>v ≠ hd</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span>set_remove v (set_add v tl) = tl</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>v = hd</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_add v tl = hd :: set_remove v (set_add v tl)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk232" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ hd :: tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>v ≠ hd</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span>set_remove v (set_add v tl) = tl</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>v ≠ hd</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk232"><hr></label><div class="goal-conclusion">hd :: set_remove v (set_add v tl) =
hd :: set_remove v (set_add v tl)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk233" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk233"><span class="bp">contradiction</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ∉ hd :: tl</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>v ≠ hd</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span>set_remove v (set_add v tl) = tl</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>v ≠ hd</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hd :: set_remove v (set_add v tl) =
hd :: set_remove v (set_add v tl)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk234" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk234"><span class="kn">Lemma</span> <span class="nf">set_union_iterated_empty</span> `{EqDecision A} :
   <span class="kr">forall</span> <span class="nv">ss</span>,
   (<span class="kr">forall</span> (<span class="nv">s</span> : list A),
   s ∈ ss -&gt; s = []) -&gt; (fold_right set_union [] ss) = [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">ss</span> : list (<span class="nb">set</span> A),
  (<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
  → foldr set_union [] ss = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk235" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk235"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">ss</span> : list (<span class="nb">set</span> A),
  (<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
  → foldr set_union [] ss = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">   </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk236" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk236"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldr set_union [] ss = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">   </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk237" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk237"><span class="nb">induction</span> ss.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ [] → s = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldr set_union [] [] = []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk238" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → s = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk238"><hr></label><div class="goal-conclusion">foldr set_union [] (a :: ss) = []</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">   </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk239" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk239">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ [] → s = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldr set_union [] [] = []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk23a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk23a"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ [] → s = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">   </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk23b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk23b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → s = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldr set_union [] (a :: ss) = []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk23c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk23c"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → s = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_union a (foldr set_union [] ss) = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk23d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk23d"><span class="nb">assert</span> (fold_right set_union [] ss = []).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → s = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldr set_union [] ss = []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk23e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → s = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>foldr set_union [] ss = []</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk23e"><hr></label><div class="goal-conclusion">set_union a (foldr set_union [] ss) = []</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk23f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk23f">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → s = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldr set_union [] ss = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk240" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk240"><span class="nb">apply</span> IHss.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → s = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk241" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk241"><span class="nb">simpl</span> <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → s = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk242" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk242"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → s = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>s ∈ ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk243" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk243"><span class="nb">specialize</span> (H s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>s ∈ a :: ss → s = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>s ∈ ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk244" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk244"><span class="nb">apply</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>s ∈ a :: ss → s = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>s ∈ ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s ∈ a :: ss</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk245" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk245"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>s ∈ a :: ss → s = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>s ∈ ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s ∈ ss</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk246" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk246">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → s = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>foldr set_union [] ss = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_union a (foldr set_union [] ss) = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk247" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk247"><span class="nb">rewrite</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → s = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>foldr set_union [] ss = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_union a [] = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk248" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk248"><span class="nb">assert</span> (a = []).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → s = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>foldr set_union [] ss = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a = []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk249" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → s = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>foldr set_union [] ss = []</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a = []</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk249"><hr></label><div class="goal-conclusion">set_union a [] = []</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk24a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk24a">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → s = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>foldr set_union [] ss = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk24b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk24b"><span class="nb">specialize</span> (H a).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a ∈ a :: ss → a = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>foldr set_union [] ss = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk24c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk24c"><span class="nb">apply</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a ∈ a :: ss → a = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>foldr set_union [] ss = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ a :: ss</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk24d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk24d">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → s = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>foldr set_union [] ss = []</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_union a [] = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk24e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk24e"><span class="nb">rewrite</span> H1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → s = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>foldr set_union [] ss = []</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_union [] [] = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk24f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk24f"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ a :: ss → s = []</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∀</span> <span class="nv">s</span> : list A, s ∈ ss → s = [])
→ foldr set_union [] ss = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>foldr set_union [] ss = []</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
For each element X of l1, exactly one occurrence of X is removed
   from l2. If no such occurrence exists, nothing happens. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">set_remove_list</span> `{EqDecision A} (l1 l2 : list A) : list A :=
  fold_right set_remove l2 l1.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk250" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk250"><span class="kn">Example</span> <span class="nf">set_remove_list1</span> : set_remove_list [<span class="mi">3</span>;<span class="mi">1</span>;<span class="mi">3</span>] [<span class="mi">1</span>;<span class="mi">1</span>;<span class="mi">2</span>;<span class="mi">3</span>;<span class="mi">3</span>;<span class="mi">3</span>;<span class="mi">3</span>] = [<span class="mi">1</span>;<span class="mi">2</span>;<span class="mi">3</span>;<span class="mi">3</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove_list [<span class="mi">3</span>; <span class="mi">1</span>; <span class="mi">3</span>] [<span class="mi">1</span>; <span class="mi">1</span>; <span class="mi">2</span>; <span class="mi">3</span>; <span class="mi">3</span>; <span class="mi">3</span>; <span class="mi">3</span>] =
[<span class="mi">1</span>; <span class="mi">2</span>; <span class="mi">3</span>; <span class="mi">3</span>]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk251" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk251"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove_list [<span class="mi">3</span>; <span class="mi">1</span>; <span class="mi">3</span>] [<span class="mi">1</span>; <span class="mi">1</span>; <span class="mi">2</span>; <span class="mi">3</span>; <span class="mi">3</span>; <span class="mi">3</span>; <span class="mi">3</span>] =
[<span class="mi">1</span>; <span class="mi">2</span>; <span class="mi">3</span>; <span class="mi">3</span>]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk252" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk252"><span class="kn">Example</span> <span class="nf">set_remove_list2</span> : set_remove_list [<span class="mi">4</span>] [<span class="mi">1</span>;<span class="mi">2</span>;<span class="mi">3</span>] = [<span class="mi">1</span>;<span class="mi">2</span>;<span class="mi">3</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove_list [<span class="mi">4</span>] [<span class="mi">1</span>; <span class="mi">2</span>; <span class="mi">3</span>] = [<span class="mi">1</span>; <span class="mi">2</span>; <span class="mi">3</span>]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk253" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk253"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove_list [<span class="mi">4</span>] [<span class="mi">1</span>; <span class="mi">2</span>; <span class="mi">3</span>] = [<span class="mi">1</span>; <span class="mi">2</span>; <span class="mi">3</span>]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk254" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk254"><span class="kn">Lemma</span> <span class="nf">set_remove_list_1</span>
  `{EqDecision A}
  (a : A)
  (l1 l2 : list A)
  (Hin : a ∈ (set_remove_list l1 l2)) :
  a ∈ l2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a ∈ set_remove_list l1 l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk255" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk255"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a ∈ set_remove_list l1 l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk256" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk256"><span class="nb">unfold</span> set_remove_list <span class="kr">in</span> Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_remove l2 l1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk257" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk257"><span class="nb">induction</span> l1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_remove l2 []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ l2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk258" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_remove l2 (a0 :: l1)</span></span></span><br><span><var>IHl1</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_remove l2 l1 → a ∈ l2</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk258"><hr></label><div class="goal-conclusion">a ∈ l2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk259" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk259">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_remove l2 []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ l2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">simpl</span> <span class="kr">in</span> Hin; <span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk25a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk25a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_remove l2 (a0 :: l1)</span></span></span><br><span><var>IHl1</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_remove l2 l1 → a ∈ l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ l2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk25b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk25b"><span class="nb">simpl</span> <span class="kr">in</span> Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a ∈ set_remove a0 (foldr set_remove l2 l1)</span></span></span><br><span><var>IHl1</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_remove l2 l1 → a ∈ l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk25c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk25c"><span class="nb">apply</span> set_remove_1 <span class="kr">in</span> Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_remove l2 l1</span></span></span><br><span><var>IHl1</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_remove l2 l1 → a ∈ l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk25d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk25d"><span class="nb">apply</span> IHl1 <span class="kr">in</span> Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a ∈ l2</span></span></span><br><span><var>IHl1</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_remove l2 l1 → a ∈ l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk25e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk25e"><span class="kn">Lemma</span> <span class="nf">set_prod_nodup</span> `(s1: <span class="nb">set</span> A) `(s2: <span class="nb">set</span> B):
  NoDup s1 -&gt;
  NoDup s2 -&gt;
  NoDup (set_prod s1 s2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup s1 → NoDup s2 → NoDup (set_prod s1 s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk25f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk25f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup s1 → NoDup s2 → NoDup (set_prod s1 s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk260" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk260"><span class="nb">intros</span> Hs1 HS2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>HS2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_prod s1 s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk261" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk261"><span class="nb">induction</span> Hs1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>HS2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_prod [] s2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk262" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>HS2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk262"><hr></label><div class="goal-conclusion">NoDup (set_prod (x :: l) s2)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk263" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk263">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>HS2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_prod [] s2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk264" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk264">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>HS2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_prod (x :: l) s2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk265" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk265"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>HS2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (map (<span class="kr">λ</span> <span class="nv">y</span> : B, (x, y)) s2 ++ set_prod l s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk266" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk266"><span class="nb">apply</span> nodup_append.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>HS2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (map (<span class="kr">λ</span> <span class="nv">y</span> : B, (x, y)) s2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk267" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>HS2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk267"><hr></label><div class="goal-conclusion">NoDup (set_prod l s2)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk268" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>HS2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk268"><hr></label><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">a</span> : A * B,
  a ∈ map (<span class="kr">λ</span> <span class="nv">y</span> : B, (x, y)) s2 → a ∉ set_prod l s2</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk269" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>HS2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk269"><hr></label><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">a</span> : A * B,
  a ∈ set_prod l s2 → a ∉ map (<span class="kr">λ</span> <span class="nv">y</span> : B, (x, y)) s2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk26a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk26a">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>HS2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (map (<span class="kr">λ</span> <span class="nv">y</span> : B, (x, y)) s2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> NoDup_fmap;[<span class="bp">congruence</span>|<span class="bp">assumption</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk26b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk26b">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>HS2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_prod l s2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk26c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk26c">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>HS2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">a</span> : A * B,
  a ∈ map (<span class="kr">λ</span> <span class="nv">y</span> : B, (x, y)) s2 → a ∉ set_prod l s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk26d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk26d"><span class="nb">intros</span> [a b].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>HS2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(a, b) ∈ map (<span class="kr">λ</span> <span class="nv">y</span> : B, (x, y)) s2
→ (a, b) ∉ set_prod l s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk26e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk26e"><span class="nb">rewrite</span> elem_of_list_fmap, elem_of_list_prod.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>HS2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">∃</span> <span class="nv">y</span> : B, (a, b) = (x, y) ∧ y ∈ s2)
→ ¬ (a ∈ l ∧ b ∈ s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk26f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk26f"><span class="nb">intros</span> [_ [[= &lt;- _] _]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a ∉ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>HS2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬ (a ∈ l ∧ b ∈ s2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">tauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk270" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk270">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>HS2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">a</span> : A * B,
  a ∈ set_prod l s2 → a ∉ map (<span class="kr">λ</span> <span class="nv">y</span> : B, (x, y)) s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk271" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk271"><span class="nb">intros</span> [a b].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>HS2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(a, b) ∈ set_prod l s2
→ (a, b) ∉ map (<span class="kr">λ</span> <span class="nv">y</span> : B, (x, y)) s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk272" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk272"><span class="nb">rewrite</span> elem_of_list_prod, elem_of_list_fmap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>HS2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ l ∧ b ∈ s2 → ¬ (<span class="kr">∃</span> <span class="nv">y</span> : B, (a, b) = (x, y) ∧ y ∈ s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk273" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk273"><span class="nb">intros</span> [Ha _] [_ [[= Hax _] _]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∉ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>HS2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br><span><var>Hax</var><span class="hyp-type"><b>: </b><span>a = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
An alternative to <span class="inlinecode"><span class="id" title="var">set_diff</span></span>.
    Unlike <span class="inlinecode"><span class="id" title="var">set_diff</span></span>, the result may contain
    duplicates if the first argument list <code>l</code> does.

<div class="paragraph"> </div>

    This definition exists to make proving
    <span class="inlinecode"><span class="id" title="var">len_set_diff_decrease</span></span> more convenient,
    because <code>length</code> of <code>filter</code> can be simplified
    step by step while doing induction over <code>l</code>.
 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">set_diff_filter</span> `{EqDecision A} (l r : list A) :=
  filter (.∉ r) l.</span></span></pre><div class="doc">
   The characteristic membership property, parallel to
   <span class="inlinecode"><span class="id" title="var">set_diff_iff</span></span>.
 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk274" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk274"><span class="kn">Lemma</span> <span class="nf">set_diff_filter_iff</span> `{EqDecision A} (a:A) l r:
  a ∈ (set_diff_filter l r) &lt;-&gt; (a ∈ l /\ ~a ∈ r).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ set_diff_filter l r ↔ a ∈ l ∧ a ∉ r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk275" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk275"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ set_diff_filter l r ↔ a ∈ l ∧ a ∉ r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk276" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk276"><span class="nb">induction</span> l;<span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ set_diff_filter [] r ↔ a ∈ [] ∧ a ∉ r</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk277" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>a ∈ set_diff_filter l r ↔ a ∈ l ∧ a ∉ r</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk277"><hr></label><div class="goal-conclusion">a ∈ set_diff_filter (a0 :: l) r ↔ a ∈ a0 :: l ∧ a ∉ r</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk278" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk278">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ set_diff_filter [] r ↔ a ∈ [] ∧ a ∉ r</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk279" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk279"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ [] ↔ a ∈ [] ∧ a ∉ r</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk27a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk27a"><span class="nb">split</span>; <span class="nb">intuition</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a ∈ []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>a ∈ r</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">inversion</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk27b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk27b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>a ∈ set_diff_filter l r ↔ a ∈ l ∧ a ∉ r</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ set_diff_filter (a0 :: l) r ↔ a ∈ a0 :: l ∧ a ∉ r</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk27c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk27c"><span class="nb">unfold</span> set_diff_filter <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>a ∈ filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ r) l ↔ a ∈ l ∧ a ∉ r</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ r) (a0 :: l)
↔ a ∈ a0 :: l ∧ a ∉ r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk27d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk27d"><span class="nb">rewrite</span> filter_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>a ∈ filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ r) l ↔ a ∈ l ∧ a ∉ r</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a
∈ (<span class="kr">if</span> decide (a0 ∉ r)
   <span class="kr">then</span> a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ r) l
   <span class="kr">else</span> filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ r) l)
↔ a ∈ a0 :: l ∧ a ∉ r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk27e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk27e"><span class="nb">destruct</span> (decide (~ a0 ∈ r)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>a ∈ filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ r) l ↔ a ∈ l ∧ a ∉ r</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ∉ r</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ r) l
↔ a ∈ a0 :: l ∧ a ∉ r</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk27f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>a ∈ filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ r) l ↔ a ∈ l ∧ a ∉ r</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ r)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk27f"><hr></label><div class="goal-conclusion">a ∈ filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ r) l ↔ a ∈ a0 :: l ∧ a ∉ r</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk280" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk280">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>a ∈ filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ r) l ↔ a ∈ l ∧ a ∉ r</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ∉ r</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ r) l
↔ a ∈ a0 :: l ∧ a ∉ r</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk281" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk281"><span class="nb">rewrite</span> <span class="mi">2</span> elem_of_cons, IHl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>a ∈ filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ r) l ↔ a ∈ l ∧ a ∉ r</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ∉ r</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a = a0 ∨ a ∈ l ∧ a ∉ r ↔ (a = a0 ∨ a ∈ l) ∧ a ∉ r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span> <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk282" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk282">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>a ∈ filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ r) l ↔ a ∈ l ∧ a ∉ r</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ r)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ r) l ↔ a ∈ a0 :: l ∧ a ∉ r</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk283" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk283"><span class="nb">rewrite</span> elem_of_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>a ∈ filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ r) l ↔ a ∈ l ∧ a ∉ r</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ r)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ r) l
↔ (a = a0 ∨ a ∈ l) ∧ a ∉ r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span> <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk284" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk284"><span class="kn">Lemma</span> <span class="nf">set_diff_filter_nodup</span> `{EqDecision A} (l r:list A):
  NoDup l -&gt; NoDup (set_diff_filter l r).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup l → NoDup (set_diff_filter l r)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk285" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk285"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup l → NoDup (set_diff_filter l r)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk286" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk286"><span class="nb">intros</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_diff_filter l r)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk287" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk287"><span class="nb">apply</span> NoDup_filter.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
   Prove that subtracting a superset cannot produce
   a smaller result.
   This lemma is used to prove <span class="inlinecode"><span class="id" title="var">len_set_diff_decrease</span></span>.
 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk288" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk288"><span class="kn">Lemma</span> <span class="nf">len_set_diff_incl_le</span> `{EqDecision A} (l a b: list A)
      (H_subseteq: <span class="kr">forall</span> <span class="nv">x</span>, x ∈ b -&gt; x ∈ a):
  length (set_diff_filter l a) &lt;= length (set_diff_filter l b).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter l a)
≤ length (set_diff_filter l b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk289" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk289"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter l a)
≤ length (set_diff_filter l b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk28a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk28a"><span class="nb">induction</span> l;[<span class="bp">reflexivity</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
≤ length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter (a0 :: l) a)
≤ length (set_diff_filter (a0 :: l) b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk28b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk28b"><span class="nb">unfold</span> set_diff_filter.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
≤ length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) (a0 :: l))
≤ length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) (a0 :: l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk28c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk28c"><span class="nb">rewrite</span> <span class="mi">2</span> filter_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
≤ length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length
  (<span class="kr">if</span> decide (a0 ∉ a)
   <span class="kr">then</span> a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l
   <span class="kr">else</span> filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l)
≤ length
    (<span class="kr">if</span> decide (a0 ∉ b)
     <span class="kr">then</span> a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l
     <span class="kr">else</span> filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk28d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk28d"><span class="nb">destruct</span> (decide (~ a0 ∈ a)); <span class="nb">destruct</span> (decide (~ a0 ∈ b)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
≤ length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ∉ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ∉ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l)
≤ length (a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk28e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
≤ length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ∉ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ b)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk28e"><hr></label><div class="goal-conclusion">length (a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l)
≤ length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk28f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
≤ length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ∉ b</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk28f"><hr></label><div class="goal-conclusion">length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l)
≤ length (a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk290" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
≤ length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ b)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk290"><hr></label><div class="goal-conclusion">length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l)
≤ length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk291" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk291">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
≤ length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ∉ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ∉ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l)
≤ length (a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk292" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk292"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
≤ length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ∉ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ∉ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l))
≤ S (length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk293" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk293"><span class="nb">unfold</span> set_diff_filter <span class="kr">in</span> IHl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l)
≤ length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ∉ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ∉ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l))
≤ S (length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk294" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk294">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
≤ length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ∉ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l)
≤ length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk295" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk295"><span class="bp">contradict</span> n0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
≤ length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ∉ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∉ b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk296" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk296"><span class="nb">intro</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
≤ length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ∉ a</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0 ∈ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk297" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk297"><span class="bp">contradict</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
≤ length (set_diff_filter l b)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0 ∈ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk298" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk298"><span class="nb">apply</span> H_subseteq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
≤ length (set_diff_filter l b)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0 ∈ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk299" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk299">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
≤ length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ∉ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l)
≤ length (a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk29a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk29a"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
≤ length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ∉ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l)
≤ S (length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk29b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk29b"><span class="nb">apply</span> le_S.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
≤ length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ∉ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l)
≤ length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> IHl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk29c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk29c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
≤ length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l)
≤ length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> IHl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
   Prove that strictly increasing the set to be subtracted,
   by adding an element actually found in <code>l</code> will decrease
   the size of the result.
 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk29d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk29d"><span class="kn">Lemma</span> <span class="nf">len_set_diff_decrease</span> `{EqDecision A} (new:A) (l a b: list A)
      (H_subseteq: <span class="kr">forall</span> <span class="nv">x</span>, x ∈ b -&gt; x ∈ a)
      (H_new_is_new: new ∈ a /\ ~new ∈ b)
      (H_new_is_relevant: new ∈ l):
  length (set_diff_filter l a) &lt; length (set_diff_filter l b).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>new ∈ l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk29e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk29e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>new ∈ l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk29f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk29f"><span class="nb">induction</span> l; [<span class="nb">inversion</span> H_new_is_relevant|];
    <span class="nb">apply</span> elem_of_cons <span class="kr">in</span> H_new_is_relevant; <span class="nb">destruct</span> H_new_is_relevant.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>new = a0</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>new ∈ l
→ length (set_diff_filter l a) &lt;
  length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter (a0 :: l) a) &lt;
length (set_diff_filter (a0 :: l) b)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk2a0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>new ∈ l</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>new ∈ l
→ length (set_diff_filter l a) &lt;
  length (set_diff_filter l b)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk2a0"><hr></label><div class="goal-conclusion">length (set_diff_filter (a0 :: l) a) &lt;
length (set_diff_filter (a0 :: l) b)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2a1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2a1">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>new = a0</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>new ∈ l
→ length (set_diff_filter l a) &lt;
  length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter (a0 :: l) a) &lt;
length (set_diff_filter (a0 :: l) b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2a2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2a2"><span class="nb">subst</span> a0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>new ∈ l
→ length (set_diff_filter l a) &lt;
  length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter (new :: l) a) &lt;
length (set_diff_filter (new :: l) b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2a3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2a3"><span class="nb">unfold</span> set_diff_filter.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>new ∈ l
→ length (set_diff_filter l a) &lt;
  length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) (new :: l)) &lt;
length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) (new :: l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2a4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2a4"><span class="nb">rewrite</span> <span class="mi">2</span> filter_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>new ∈ l
→ length (set_diff_filter l a) &lt;
  length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length
  (<span class="kr">if</span> decide (new ∉ a)
   <span class="kr">then</span> new :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l
   <span class="kr">else</span> filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l) &lt;
length
  (<span class="kr">if</span> decide (new ∉ b)
   <span class="kr">then</span> new :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l
   <span class="kr">else</span> filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2a5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2a5"><span class="nb">destruct</span> (decide (~ new ∈ a)); [<span class="bp">tauto</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>new ∈ l
→ length (set_diff_filter l a) &lt;
  length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬ (new ∉ a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l) &lt;
length
  (<span class="kr">if</span> decide (new ∉ b)
   <span class="kr">then</span> new :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l
   <span class="kr">else</span> filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2a6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2a6"><span class="nb">destruct</span> (decide (~ new ∈ b));[|<span class="bp">contradict</span> n0; <span class="bp">tauto</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>new ∈ l
→ length (set_diff_filter l a) &lt;
  length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬ (new ∉ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>new ∉ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l) &lt;
length (new :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2a7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2a7"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>new ∈ l
→ length (set_diff_filter l a) &lt;
  length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬ (new ∉ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>new ∉ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l) &lt;
S (length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2a8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2a8"><span class="nb">apply</span> le_n_S.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>new ∈ l
→ length (set_diff_filter l a) &lt;
  length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬ (new ∉ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>new ∉ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l)
≤ length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> len_set_diff_incl_le;<span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2a9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2a9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>new ∈ l</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>new ∈ l
→ length (set_diff_filter l a) &lt;
  length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter (a0 :: l) a) &lt;
length (set_diff_filter (a0 :: l) b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2aa" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2aa"><span class="nb">specialize</span> (IHl H);<span class="nb">clear</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter (a0 :: l) a) &lt;
length (set_diff_filter (a0 :: l) b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2ab" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2ab"><span class="nb">unfold</span> set_diff_filter.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) (a0 :: l)) &lt;
length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) (a0 :: l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2ac" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2ac"><span class="nb">rewrite</span> <span class="mi">2</span> filter_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length
  (<span class="kr">if</span> decide (a0 ∉ a)
   <span class="kr">then</span> a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l
   <span class="kr">else</span> filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l) &lt;
length
  (<span class="kr">if</span> decide (a0 ∉ b)
   <span class="kr">then</span> a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l
   <span class="kr">else</span> filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2ad" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2ad"><span class="nb">destruct</span> (decide (~ a0 ∈ a)); <span class="nb">destruct</span> (decide (~ a0 ∈ b)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ∉ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ∉ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l) &lt;
length (a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk2ae" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ∉ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ b)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk2ae"><hr></label><div class="goal-conclusion">length (a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l) &lt;
length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk2af" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ∉ b</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk2af"><hr></label><div class="goal-conclusion">length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l) &lt;
length (a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk2b0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ b)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk2b0"><hr></label><div class="goal-conclusion">length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l) &lt;
length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2b1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2b1">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ∉ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ∉ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l) &lt;
length (a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2b2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2b2"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ∉ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ∉ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l)) &lt;
S (length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2b3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2b3"><span class="nb">apply</span> lt_n_S.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ∉ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ∉ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l) &lt;
length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> IHl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2b4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2b4">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ∉ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l) &lt;
length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2b5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2b5"><span class="bp">contradict</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2b6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2b6"><span class="nb">apply</span> H_subseteq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2b7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2b7"><span class="nb">destruct</span> (decide (a0 ∈ b)); [<span class="bp">assumption</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ∉ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2b8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2b8"><span class="bp">contradict</span> n0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ∉ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∉ b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2b9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2b9">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ∉ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l) &lt;
length (a0 :: filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2ba" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2ba"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ∉ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l) &lt;
S (length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2bb" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2bb"><span class="nb">apply</span> lt_S.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ∉ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l) &lt;
length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> IHl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2bc" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2bc">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ b → x ∈ a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ∈ a ∧ new ∉ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬ (a0 ∉ b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ a) l) &lt;
length (filter (<span class="kr">λ</span> <span class="nv">x</span> : A, x ∉ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> IHl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2bd" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2bd"><span class="kn">Lemma</span> <span class="nf">len_set_diff_map_set_add</span> `{EqDecision B} (new:B) `{EqDecision A} (f: B -&gt; A)
      (a: list B) (l: list A)
      (H_new_is_new: ~(f new) ∈ (map f a))
      (H_new_is_relevant: (f new) ∈ l):
  length (set_diff_filter l (map f (set_add new a))) &lt;
    length (set_diff_filter l (map f a)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ∉ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ∈ l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter l (map f (set_add new a))) &lt;
length (set_diff_filter l (map f a))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2be" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2be"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ∉ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ∈ l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter l (map f (set_add new a))) &lt;
length (set_diff_filter l (map f a))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2bf" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2bf"><span class="nb">apply</span> len_set_diff_decrease <span class="kr">with</span> (f new).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ∉ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ∈ l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ map f a → x ∈ map f (set_add new a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk2c0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ∉ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ∈ l</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk2c0"><hr></label><div class="goal-conclusion">f new ∈ map f (set_add new a) ∧ f new ∉ map f a</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk2c1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ∉ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ∈ l</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk2c1"><hr></label><div class="goal-conclusion">f new ∈ l</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2c2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2c2">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ∉ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ∈ l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ map f a → x ∈ map f (set_add new a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2c3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2c3"><span class="nb">intro</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ∉ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ∈ l</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ map f a → x ∈ map f (set_add new a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2c4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2c4"><span class="nb">rewrite</span> <span class="mi">2</span> elem_of_list_fmap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ∉ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ∈ l</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">∃</span> <span class="nv">y</span> : B, x = f y ∧ y ∈ a)
→ <span class="kr">∃</span> <span class="nv">y</span> : B, x = f y ∧ y ∈ set_add new a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2c5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2c5"><span class="nb">intros</span> [x0 [Hx0 Hin]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ∉ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ∈ l</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x0</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>Hx0</var><span class="hyp-type"><b>: </b><span>x = f x0</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x0 ∈ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">y</span> : B, x = f y ∧ y ∈ set_add new a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2c6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2c6"><span class="kr">exists</span> <span class="nv">x0</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ∉ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ∈ l</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x0</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>Hx0</var><span class="hyp-type"><b>: </b><span>x = f x0</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x0 ∈ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = f x0 ∧ x0 ∈ set_add new a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2c7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2c7"><span class="nb">rewrite</span> set_add_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ∉ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ∈ l</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x0</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>Hx0</var><span class="hyp-type"><b>: </b><span>x = f x0</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x0 ∈ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = f x0 ∧ (x0 = new ∨ x0 ∈ a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">tauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2c8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2c8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ∉ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ∈ l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f new ∈ map f (set_add new a) ∧ f new ∉ map f a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2c9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2c9"><span class="nb">split</span>;[|<span class="bp">assumption</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ∉ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ∈ l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f new ∈ map f (set_add new a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2ca" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2ca"><span class="nb">apply</span> elem_of_list_fmap_1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ∉ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ∈ l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">new ∈ set_add new a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2cb" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2cb"><span class="nb">apply</span> set_add_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ∉ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ∈ l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">new = new ∨ new ∈ a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2cc" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2cc"><span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ∉ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ∈ l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">new = new</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2cd" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2cd">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B → A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ∉ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ∈ l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f new ∈ l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Setoid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Add</span> Parametric Relation A : (<span class="nb">set</span> A) (@set_eq A)
 <span class="bp">reflexivity</span> proved <span class="bp">by</span> (@set_eq_refl A)
 <span class="nb">transitivity</span> proved <span class="bp">by</span> (@set_eq_tran A) <span class="kr">as</span> set_eq_rel.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2ce" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2ce"><span class="kn">Add Parametric Morphism</span> <span class="nv">A</span> : (@elem_of_list A)
  <span class="kn">with signature</span> @eq A ==&gt; @set_eq A ==&gt; iff <span class="kr">as</span> set_eq_elem_of.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">y</span> : A) (<span class="nv">x</span> <span class="nv">y0</span> : <span class="nb">set</span> A),
  set_eq x y0 → elem_of_list y x ↔ elem_of_list y y0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2cf" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2cf"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">y</span> : A) (<span class="nv">x</span> <span class="nv">y0</span> : <span class="nb">set</span> A),
  set_eq x y0 → elem_of_list y x ↔ elem_of_list y y0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2d0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2d0"><span class="nb">intros</span> a l1 l2 H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_eq l1 l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">elem_of_list a l1 ↔ elem_of_list a l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>;<span class="nb">apply</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2d1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2d1"><span class="kn">Add Parametric Morphism</span> <span class="nv">A</span> : (@elem_of_list A)
  <span class="kn">with signature</span> @eq A ==&gt; @list_subseteq A ==&gt; Basics.impl <span class="kr">as</span> set_elem_of_subseteq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">y</span> : A) (<span class="nv">x</span> <span class="nv">y0</span> : list A),
  list_subseteq x y0
  → impl (elem_of_list y x) (elem_of_list y y0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2d2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2d2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">y</span> : A) (<span class="nv">x</span> <span class="nv">y0</span> : list A),
  list_subseteq x y0
  → impl (elem_of_list y x) (elem_of_list y y0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">firstorder</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2d3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2d3"><span class="kn">Lemma</span> <span class="nf">set_union_iterated_preserves_prop</span>
  `{EqDecision A}
  (ss : list (<span class="nb">set</span> A))
  (P : A -&gt; <span class="kt">Prop</span>)
  (Hp : <span class="kr">forall</span> (<span class="nv">s</span> : <span class="nb">set</span> A), <span class="kr">forall</span> (<span class="nv">a</span> : A), (s ∈ ss /\ a ∈ s) -&gt; P a) :
  <span class="kr">forall</span> (<span class="nv">a</span> : A), a ∈ (fold_right set_union [] ss) -&gt; P a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A → <span class="kt">Prop</span></span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> (<span class="nv">s</span> : <span class="nb">set</span> A) (<span class="nv">a</span> : A), s ∈ ss ∧ a ∈ s → P a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">a</span> : A, a ∈ foldr set_union [] ss → P a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2d4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2d4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A → <span class="kt">Prop</span></span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> (<span class="nv">s</span> : <span class="nb">set</span> A) (<span class="nv">a</span> : A), s ∈ ss ∧ a ∈ s → P a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">a</span> : A, a ∈ foldr set_union [] ss → P a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2d5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2d5"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A → <span class="kt">Prop</span></span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> (<span class="nv">s</span> : <span class="nb">set</span> A) (<span class="nv">a</span> : A), s ∈ ss ∧ a ∈ s → P a</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2d6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2d6"><span class="nb">apply</span> set_union_in_iterated <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A → <span class="kt">Prop</span></span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> (<span class="nv">s</span> : <span class="nb">set</span> A) (<span class="nv">a</span> : A), s ∈ ss ∧ a ∈ s → P a</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Exists (<span class="kr">λ</span> <span class="nv">s</span> : <span class="nb">set</span> A, a ∈ s) ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2d7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2d7"><span class="nb">rewrite</span> Exists_exists <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A → <span class="kt">Prop</span></span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> (<span class="nv">s</span> : <span class="nb">set</span> A) (<span class="nv">a</span> : A), s ∈ ss ∧ a ∈ s → P a</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∃</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ∈ ss ∧ a ∈ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2d8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2d8"><span class="nb">destruct</span> H <span class="kr">as</span> [s [Hins Hina]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A → <span class="kt">Prop</span></span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> (<span class="nv">s</span> : <span class="nb">set</span> A) (<span class="nv">a</span> : A), s ∈ ss ∧ a ∈ s → P a</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hins</var><span class="hyp-type"><b>: </b><span>s ∈ ss</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2d9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2d9"><span class="nb">apply</span> Hp <span class="kr">with</span> (s := s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A → <span class="kt">Prop</span></span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> (<span class="nv">s</span> : <span class="nb">set</span> A) (<span class="nv">a</span> : A), s ∈ ss ∧ a ∈ s → P a</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hins</var><span class="hyp-type"><b>: </b><span>s ∈ ss</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ∈ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s ∈ ss ∧ a ∈ s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2da" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2da"><span class="kn">Lemma</span> <span class="nf">filter_set_eq</span> {<span class="nv">X</span>} <span class="nv">P</span> <span class="nv">Q</span>
 `{<span class="kr">∀</span> (<span class="nv">x</span>:X), Decision (P x)} `{<span class="kr">∀</span> (<span class="nv">x</span>:X), Decision (Q x)}
   (l : list X)
   (resf := filter P l)
   (resg := filter Q l) :
   set_eq resf resg -&gt; resf = resg.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq resf resg → resf = resg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2db" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2db"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq resf resg → resf = resg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2dc" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2dc"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>set_eq resf resg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">resf = resg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2dd" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2dd"><span class="nb">unfold</span> resf, resg <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>set_eq (filter P l) (filter Q l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">filter P l = filter Q l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2de" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2de"><span class="nb">apply</span> filter_ext_elem_of.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>set_eq (filter P l) (filter Q l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">a</span> : X, a ∈ l → P a ↔ Q a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2df" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2df"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>set_eq (filter P l) (filter Q l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a ↔ Q a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2e0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2e0"><span class="nb">unfold</span> set_eq <span class="kr">in</span> H1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>filter P l ⊆ filter Q l ⊆ filter P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a ↔ Q a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2e1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2e1"><span class="nb">destruct</span> H1 <span class="kr">as</span> [H1 H1&#39;].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>filter P l ⊆ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>filter Q l ⊆ filter P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a ↔ Q a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2e2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2e2"><span class="nb">unfold</span> incl <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>filter P l ⊆ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>filter Q l ⊆ filter P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a ↔ Q a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2e3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2e3"><span class="nb">specialize</span> (H1 a).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l → a ∈ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>filter Q l ⊆ filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a ↔ Q a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2e4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2e4"><span class="nb">specialize</span> (H1&#39; a).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l → a ∈ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l → a ∈ filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a ↔ Q a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2e5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2e5"><span class="nb">split</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l → a ∈ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l → a ∈ filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk2e6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l → a ∈ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l → a ∈ filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Q a</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk2e6"><hr></label><div class="goal-conclusion">P a</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2e7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2e7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l → a ∈ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l → a ∈ filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2e8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2e8"><span class="nb">assert</span> (a ∈ filter P l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l → a ∈ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l → a ∈ filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ filter P l</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk2e9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l → a ∈ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l → a ∈ filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk2e9"><hr></label><div class="goal-conclusion">Q a</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2ea" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2ea">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l → a ∈ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l → a ∈ filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ filter P l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2eb" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2eb"><span class="nb">apply</span> elem_of_list_filter.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l → a ∈ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l → a ∈ filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a ∧ a ∈ l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2ec" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2ec">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l → a ∈ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l → a ∈ filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2ed" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2ed"><span class="nb">specialize</span> (H1 H4).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l → a ∈ filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2ee" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2ee"><span class="nb">apply</span> elem_of_list_filter <span class="kr">in</span> H1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Q a ∧ a ∈ l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l → a ∈ filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> H1; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2ef" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2ef">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l → a ∈ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l → a ∈ filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Q a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2f0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2f0"><span class="nb">assert</span> (a ∈ filter Q l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l → a ∈ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l → a ∈ filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Q a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ filter Q l</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk2f1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l → a ∈ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l → a ∈ filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Q a</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk2f1"><hr></label><div class="goal-conclusion">P a</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2f2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2f2">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l → a ∈ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l → a ∈ filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Q a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ filter Q l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2f3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2f3"><span class="nb">apply</span> elem_of_list_filter.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l → a ∈ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l → a ∈ filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Q a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q a ∧ a ∈ l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2f4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2f4">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l → a ∈ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l → a ∈ filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Q a</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2f5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2f5"><span class="nb">specialize</span> (H1&#39; H4).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l → a ∈ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Q a</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2f6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2f6"><span class="nb">apply</span> elem_of_list_filter <span class="kr">in</span> H1&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X → <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ∈ filter P l → a ∈ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>P a ∧ a ∈ l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ∈ l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Q a</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>a ∈ filter Q l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> H1&#39;; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2f7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2f7"><span class="kn">Lemma</span> <span class="nf">subseteq_appr</span> : <span class="kr">forall</span> <span class="nv">A</span> (<span class="nv">l</span> <span class="nv">m</span> <span class="nv">n</span> : list A), l ⊆ n -&gt; l ⊆ (m ++ n).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">l</span> <span class="nv">m</span> <span class="nv">n</span> : list A), l ⊆ n → l ⊆ m ++ n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2f8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2f8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">l</span> <span class="nv">m</span> <span class="nv">n</span> : list A), l ⊆ n → l ⊆ m ++ n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2f9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2f9"><span class="nb">intros</span> A l m n x y yinl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l, m, n</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>l ⊆ n</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>yinl</var><span class="hyp-type"><b>: </b><span>y ∈ l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ∈ m ++ n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2fa" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2fa"><span class="nb">apply</span> x <span class="kr">in</span> yinl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l, m, n</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>l ⊆ n</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>yinl</var><span class="hyp-type"><b>: </b><span>y ∈ n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ∈ m ++ n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2fb" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2fb"><span class="nb">apply</span> elem_of_app.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l, m, n</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>l ⊆ n</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>yinl</var><span class="hyp-type"><b>: </b><span>y ∈ n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ∈ m ∨ y ∈ n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">right</span>; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2fc" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2fc"><span class="kn">Lemma</span> <span class="nf">elem_of_union_fold</span>
  `{EqDecision A}
  (haystack : list (list A))
  (a : A) :
  a ∈ (fold_right set_union [] haystack)
  &lt;-&gt;
  <span class="kr">exists</span> (<span class="nv">needle</span> : list A), (a ∈ needle) /\ (needle ∈ haystack).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ foldr set_union [] haystack
↔ (<span class="kr">∃</span> <span class="nv">needle</span> : list A, a ∈ needle ∧ needle ∈ haystack)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2fd" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2fd"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ foldr set_union [] haystack
↔ (<span class="kr">∃</span> <span class="nv">needle</span> : list A, a ∈ needle ∧ needle ∈ haystack)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2fe" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2fe"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ foldr set_union [] haystack
→ <span class="kr">∃</span> <span class="nv">needle</span> : list A, a ∈ needle ∧ needle ∈ haystack</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk2ff" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk2ff"><hr></label><div class="goal-conclusion">(<span class="kr">∃</span> <span class="nv">needle</span> : list A, a ∈ needle ∧ needle ∈ haystack)
→ a ∈ foldr set_union [] haystack</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk300" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk300">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ foldr set_union [] haystack
→ <span class="kr">∃</span> <span class="nv">needle</span> : list A, a ∈ needle ∧ needle ∈ haystack</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk301" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk301"><span class="nb">generalize dependent</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">a</span> : A,
  a ∈ foldr set_union [] haystack
  → <span class="kr">∃</span> <span class="nv">needle</span> : list A, a ∈ needle ∧ needle ∈ haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk302" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk302"><span class="nb">generalize dependent</span> haystack.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">haystack</span> : list (list A)) (<span class="nv">a</span> : A),
  a ∈ foldr set_union [] haystack
  → <span class="kr">∃</span> <span class="nv">needle</span> : list A, a ∈ needle ∧ needle ∈ haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk303" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk303"><span class="nb">induction</span> haystack.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">a</span> : A,
  a ∈ foldr set_union [] []
  → <span class="kr">∃</span> <span class="nv">needle</span> : list A, a ∈ needle ∧ needle ∈ []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk304" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  a ∈ foldr set_union [] haystack
  → <span class="kr">∃</span> <span class="nv">needle</span> : list A,
      a ∈ needle ∧ needle ∈ haystack</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk304"><hr></label><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">a0</span> : A,
  a0 ∈ foldr set_union [] (a :: haystack)
  → <span class="kr">∃</span> <span class="nv">needle</span> : list A,
      a0 ∈ needle ∧ needle ∈ a :: haystack</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk305" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk305">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">a</span> : A,
  a ∈ foldr set_union [] []
  → <span class="kr">∃</span> <span class="nv">needle</span> : list A, a ∈ needle ∧ needle ∈ []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk306" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk306"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a ∈ foldr set_union [] []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">needle</span> : list A, a ∈ needle ∧ needle ∈ []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk307" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk307"><span class="nb">simpl</span> <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a ∈ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">needle</span> : list A, a ∈ needle ∧ needle ∈ []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">inversion</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk308" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk308">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  a ∈ foldr set_union [] haystack
  → <span class="kr">∃</span> <span class="nv">needle</span> : list A,
      a ∈ needle ∧ needle ∈ haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">a0</span> : A,
  a0 ∈ foldr set_union [] (a :: haystack)
  → <span class="kr">∃</span> <span class="nv">needle</span> : list A,
      a0 ∈ needle ∧ needle ∈ a :: haystack</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk309" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk309"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  a ∈ foldr set_union [] haystack
  → <span class="kr">∃</span> <span class="nv">needle</span> : list A,
      a ∈ needle ∧ needle ∈ haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0 ∈ foldr set_union [] (a :: haystack)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">needle</span> : list A,
  a0 ∈ needle ∧ needle ∈ a :: haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk30a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk30a"><span class="nb">unfold</span> fold_right <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  a ∈ foldr set_union [] haystack
  → <span class="kr">∃</span> <span class="nv">needle</span> : list A,
      a ∈ needle ∧ needle ∈ haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0
∈ set_union a
    ((<span class="kr">fix</span> fold_right (l : list (<span class="nb">set</span> A)) : <span class="nb">set</span> A :=
        <span class="kr">match</span> l <span class="kr">with</span>
        | [] =&gt; []
        | b :: t =&gt; set_union b (fold_right t)
        <span class="kr">end</span>) haystack)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">needle</span> : list A,
  a0 ∈ needle ∧ needle ∈ a :: haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk30b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk30b"><span class="nb">rewrite</span> set_union_iff <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  a ∈ foldr set_union [] haystack
  → <span class="kr">∃</span> <span class="nv">needle</span> : list A,
      a ∈ needle ∧ needle ∈ haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0 ∈ a
∨ a0
  ∈ (<span class="kr">fix</span> fold_right (l : list (<span class="nb">set</span> A)) : <span class="nb">set</span> A :=
       <span class="kr">match</span> l <span class="kr">with</span>
       | [] =&gt; []
       | b :: t =&gt; set_union b (fold_right t)
       <span class="kr">end</span>) haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">needle</span> : list A,
  a0 ∈ needle ∧ needle ∈ a :: haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk30c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk30c"><span class="nb">destruct</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  a ∈ foldr set_union [] haystack
  → <span class="kr">∃</span> <span class="nv">needle</span> : list A,
      a ∈ needle ∧ needle ∈ haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0 ∈ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">needle</span> : list A,
  a0 ∈ needle ∧ needle ∈ a :: haystack</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk30d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  a ∈ foldr set_union [] haystack
  → <span class="kr">∃</span> <span class="nv">needle</span> : list A,
      a ∈ needle ∧ needle ∈ haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0
∈ (<span class="kr">fix</span> fold_right (l : list (<span class="nb">set</span> A)) : <span class="nb">set</span> A :=
     <span class="kr">match</span> l <span class="kr">with</span>
     | [] =&gt; []
     | b :: t =&gt; set_union b (fold_right t)
     <span class="kr">end</span>) haystack</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk30d"><hr></label><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">needle</span> : list A,
  a0 ∈ needle ∧ needle ∈ a :: haystack</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk30e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk30e">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  a ∈ foldr set_union [] haystack
  → <span class="kr">∃</span> <span class="nv">needle</span> : list A,
      a ∈ needle ∧ needle ∈ haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0 ∈ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">needle</span> : list A,
  a0 ∈ needle ∧ needle ∈ a :: haystack</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk30f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk30f"><span class="kr">exists</span> <span class="nv">a</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  a ∈ foldr set_union [] haystack
  → <span class="kr">∃</span> <span class="nv">needle</span> : list A,
      a ∈ needle ∧ needle ∈ haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0 ∈ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ a ∧ a ∈ a :: haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk310" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk310"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  a ∈ foldr set_union [] haystack
  → <span class="kr">∃</span> <span class="nv">needle</span> : list A,
      a ∈ needle ∧ needle ∈ haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0 ∈ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk311" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  a ∈ foldr set_union [] haystack
  → <span class="kr">∃</span> <span class="nv">needle</span> : list A,
      a ∈ needle ∧ needle ∈ haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0 ∈ a</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk311"><hr></label><div class="goal-conclusion">a ∈ a :: haystack</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk312" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk312"><span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  a ∈ foldr set_union [] haystack
  → <span class="kr">∃</span> <span class="nv">needle</span> : list A,
      a ∈ needle ∧ needle ∈ haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0 ∈ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ a :: haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk313" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk313"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  a ∈ foldr set_union [] haystack
  → <span class="kr">∃</span> <span class="nv">needle</span> : list A,
      a ∈ needle ∧ needle ∈ haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0 ∈ a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ a :: haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk314" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk314">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  a ∈ foldr set_union [] haystack
  → <span class="kr">∃</span> <span class="nv">needle</span> : list A,
      a ∈ needle ∧ needle ∈ haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0
∈ (<span class="kr">fix</span> fold_right (l : list (<span class="nb">set</span> A)) : <span class="nb">set</span> A :=
     <span class="kr">match</span> l <span class="kr">with</span>
     | [] =&gt; []
     | b :: t =&gt; set_union b (fold_right t)
     <span class="kr">end</span>) haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">needle</span> : list A,
  a0 ∈ needle ∧ needle ∈ a :: haystack</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk315" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk315"><span class="nb">unfold</span> fold_right <span class="kr">in</span> IHhaystack.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  a
  ∈ (<span class="kr">fix</span> fold_right (l : list (<span class="nb">set</span> A)) :
         <span class="nb">set</span> A :=
       <span class="kr">match</span> l <span class="kr">with</span>
       | [] =&gt; []
       | b :: t =&gt;
           set_union b (fold_right t)
       <span class="kr">end</span>) haystack
  → <span class="kr">∃</span> <span class="nv">needle</span> : list A,
      a ∈ needle ∧ needle ∈ haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0
∈ (<span class="kr">fix</span> fold_right (l : list (<span class="nb">set</span> A)) : <span class="nb">set</span> A :=
     <span class="kr">match</span> l <span class="kr">with</span>
     | [] =&gt; []
     | b :: t =&gt; set_union b (fold_right t)
     <span class="kr">end</span>) haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">needle</span> : list A,
  a0 ∈ needle ∧ needle ∈ a :: haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk316" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk316"><span class="nb">specialize</span> (IHhaystack a0 H).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∃</span> <span class="nv">needle</span> : list A,
  a0 ∈ needle ∧ needle ∈ haystack</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0
∈ (<span class="kr">fix</span> fold_right (l : list (<span class="nb">set</span> A)) : <span class="nb">set</span> A :=
     <span class="kr">match</span> l <span class="kr">with</span>
     | [] =&gt; []
     | b :: t =&gt; set_union b (fold_right t)
     <span class="kr">end</span>) haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">needle</span> : list A,
  a0 ∈ needle ∧ needle ∈ a :: haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk317" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk317"><span class="nb">destruct</span> IHhaystack <span class="kr">as</span> [needle [Hin1 Hin2]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin1</var><span class="hyp-type"><b>: </b><span>a0 ∈ needle</span></span></span><br><span><var>Hin2</var><span class="hyp-type"><b>: </b><span>needle ∈ haystack</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0
∈ (<span class="kr">fix</span> fold_right (l : list (<span class="nb">set</span> A)) : <span class="nb">set</span> A :=
     <span class="kr">match</span> l <span class="kr">with</span>
     | [] =&gt; []
     | b :: t =&gt; set_union b (fold_right t)
     <span class="kr">end</span>) haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">needle</span> : list A,
  a0 ∈ needle ∧ needle ∈ a :: haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk318" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk318"><span class="kr">exists</span> <span class="nv">needle</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin1</var><span class="hyp-type"><b>: </b><span>a0 ∈ needle</span></span></span><br><span><var>Hin2</var><span class="hyp-type"><b>: </b><span>needle ∈ haystack</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0
∈ (<span class="kr">fix</span> fold_right (l : list (<span class="nb">set</span> A)) : <span class="nb">set</span> A :=
     <span class="kr">match</span> l <span class="kr">with</span>
     | [] =&gt; []
     | b :: t =&gt; set_union b (fold_right t)
     <span class="kr">end</span>) haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ needle ∧ needle ∈ a :: haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk319" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk319"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin1</var><span class="hyp-type"><b>: </b><span>a0 ∈ needle</span></span></span><br><span><var>Hin2</var><span class="hyp-type"><b>: </b><span>needle ∈ haystack</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0
∈ (<span class="kr">fix</span> fold_right (l : list (<span class="nb">set</span> A)) : <span class="nb">set</span> A :=
     <span class="kr">match</span> l <span class="kr">with</span>
     | [] =&gt; []
     | b :: t =&gt; set_union b (fold_right t)
     <span class="kr">end</span>) haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ needle</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk31a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin1</var><span class="hyp-type"><b>: </b><span>a0 ∈ needle</span></span></span><br><span><var>Hin2</var><span class="hyp-type"><b>: </b><span>needle ∈ haystack</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0
∈ (<span class="kr">fix</span> fold_right (l : list (<span class="nb">set</span> A)) : <span class="nb">set</span> A :=
     <span class="kr">match</span> l <span class="kr">with</span>
     | [] =&gt; []
     | b :: t =&gt; set_union b (fold_right t)
     <span class="kr">end</span>) haystack</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk31a"><hr></label><div class="goal-conclusion">needle ∈ a :: haystack</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk31b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk31b"><span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin1</var><span class="hyp-type"><b>: </b><span>a0 ∈ needle</span></span></span><br><span><var>Hin2</var><span class="hyp-type"><b>: </b><span>needle ∈ haystack</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0
∈ (<span class="kr">fix</span> fold_right (l : list (<span class="nb">set</span> A)) : <span class="nb">set</span> A :=
     <span class="kr">match</span> l <span class="kr">with</span>
     | [] =&gt; []
     | b :: t =&gt; set_union b (fold_right t)
     <span class="kr">end</span>) haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">needle ∈ a :: haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">right</span>; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">   </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk31c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk31c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">∃</span> <span class="nv">needle</span> : list A, a ∈ needle ∧ needle ∈ haystack)
→ a ∈ foldr set_union [] haystack</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk31d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk31d"><span class="nb">generalize dependent</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">a</span> : A,
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A, a ∈ needle ∧ needle ∈ haystack)
  → a ∈ foldr set_union [] haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk31e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk31e"><span class="nb">generalize dependent</span> haystack.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> (<span class="nv">haystack</span> : list (list A)) (<span class="nv">a</span> : A),
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A, a ∈ needle ∧ needle ∈ haystack)
  → a ∈ foldr set_union [] haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk31f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk31f"><span class="nb">induction</span> haystack.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">a</span> : A,
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A, a ∈ needle ∧ needle ∈ [])
  → a ∈ foldr set_union [] []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk320" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A,
     a ∈ needle ∧ needle ∈ haystack)
  → a ∈ foldr set_union [] haystack</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk320"><hr></label><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">a0</span> : A,
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A,
     a0 ∈ needle ∧ needle ∈ a :: haystack)
  → a0 ∈ foldr set_union [] (a :: haystack)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk321" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk321">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">a</span> : A,
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A, a ∈ needle ∧ needle ∈ [])
  → a ∈ foldr set_union [] []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk322" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk322"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∃</span> <span class="nv">needle</span> : list A, a ∈ needle ∧ needle ∈ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ foldr set_union [] []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">       </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk323" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk323"><span class="nb">simpl</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∃</span> <span class="nv">needle</span> : list A, a ∈ needle ∧ needle ∈ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">       </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk324" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk324"><span class="nb">destruct</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a ∈ x ∧ x ∈ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">       </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk325" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk325"><span class="nb">destruct</span> H <span class="kr">as</span> [Ha Hx].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ∈ x</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ∈ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ∈ []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">       </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">inversion</span> Hx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk326" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk326">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A,
     a ∈ needle ∧ needle ∈ haystack)
  → a ∈ foldr set_union [] haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">a0</span> : A,
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A,
     a0 ∈ needle ∧ needle ∈ a :: haystack)
  → a0 ∈ foldr set_union [] (a :: haystack)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk327" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk327"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A,
     a ∈ needle ∧ needle ∈ haystack)
  → a ∈ foldr set_union [] haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">∃</span> <span class="nv">needle</span> : list A,
  a0 ∈ needle ∧ needle ∈ a :: haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ foldr set_union [] (a :: haystack)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">       </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk328" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk328"><span class="nb">destruct</span> H <span class="kr">as</span> [needle [Hin Hin2]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A,
     a ∈ needle ∧ needle ∈ haystack)
  → a ∈ foldr set_union [] haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ∈ needle</span></span></span><br><span><var>Hin2</var><span class="hyp-type"><b>: </b><span>needle ∈ a :: haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ foldr set_union [] (a :: haystack)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">       </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk329" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk329"><span class="nb">rewrite</span> elem_of_cons <span class="kr">in</span> Hin2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A,
     a ∈ needle ∧ needle ∈ haystack)
  → a ∈ foldr set_union [] haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ∈ needle</span></span></span><br><span><var>Hin2</var><span class="hyp-type"><b>: </b><span>needle = a ∨ needle ∈ haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ foldr set_union [] (a :: haystack)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">       </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk32a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk32a"><span class="nb">destruct</span> Hin2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A,
     a ∈ needle ∧ needle ∈ haystack)
  → a ∈ foldr set_union [] haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ∈ needle</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>needle = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ foldr set_union [] (a :: haystack)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk32b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A,
     a ∈ needle ∧ needle ∈ haystack)
  → a ∈ foldr set_union [] haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ∈ needle</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>needle ∈ haystack</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk32b"><hr></label><div class="goal-conclusion">a0 ∈ foldr set_union [] (a :: haystack)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">       </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk32c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk32c">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A,
     a ∈ needle ∧ needle ∈ haystack)
  → a ∈ foldr set_union [] haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ∈ needle</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>needle = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ foldr set_union [] (a :: haystack)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk32d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk32d"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A,
     a ∈ needle ∧ needle ∈ haystack)
  → a ∈ foldr set_union [] haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ∈ needle</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>needle = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ set_union a (foldr set_union [] haystack)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">         </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk32e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk32e"><span class="nb">rewrite</span> set_union_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A,
     a ∈ needle ∧ needle ∈ haystack)
  → a ∈ foldr set_union [] haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ∈ needle</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>needle = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ a ∨ a0 ∈ foldr set_union [] haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">         </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk32f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk32f"><span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A,
     a ∈ needle ∧ needle ∈ haystack)
  → a ∈ foldr set_union [] haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ∈ needle</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>needle = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">         </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk330" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk330"><span class="nb">rewrite</span> &lt;- H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A,
     a ∈ needle ∧ needle ∈ haystack)
  → a ∈ foldr set_union [] haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ∈ needle</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>needle = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ needle</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">         </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">       </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk331" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk331">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A,
     a ∈ needle ∧ needle ∈ haystack)
  → a ∈ foldr set_union [] haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ∈ needle</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>needle ∈ haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ foldr set_union [] (a :: haystack)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk332" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk332"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A,
     a ∈ needle ∧ needle ∈ haystack)
  → a ∈ foldr set_union [] haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ∈ needle</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>needle ∈ haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ set_union a (foldr set_union [] haystack)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">         </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk333" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk333"><span class="nb">rewrite</span> set_union_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A,
     a ∈ needle ∧ needle ∈ haystack)
  → a ∈ foldr set_union [] haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ∈ needle</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>needle ∈ haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ a ∨ a0 ∈ foldr set_union [] haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">         </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk334" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk334"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">a</span> : A,
  (<span class="kr">∃</span> <span class="nv">needle</span> : list A,
     a ∈ needle ∧ needle ∈ haystack)
  → a ∈ foldr set_union [] haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ∈ needle</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>needle ∈ haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ foldr set_union [] haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">         </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk335" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk335"><span class="nb">specialize</span> (IHhaystack a0).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∃</span> <span class="nv">needle</span> : list A,
   a0 ∈ needle ∧ needle ∈ haystack)
→ a0 ∈ foldr set_union [] haystack</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ∈ needle</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>needle ∈ haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ foldr set_union [] haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">         </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk336" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk336"><span class="nb">apply</span> IHhaystack.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∃</span> <span class="nv">needle</span> : list A,
   a0 ∈ needle ∧ needle ∈ haystack)
→ a0 ∈ foldr set_union [] haystack</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ∈ needle</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>needle ∈ haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∃</span> <span class="nv">needle</span> : list A, a0 ∈ needle ∧ needle ∈ haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">         </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk337" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk337"><span class="kr">exists</span> <span class="nv">needle</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span>(<span class="kr">∃</span> <span class="nv">needle</span> : list A,
   a0 ∈ needle ∧ needle ∈ haystack)
→ a0 ∈ foldr set_union [] haystack</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ∈ needle</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>needle ∈ haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ∈ needle ∧ needle ∈ haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">         </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>;
         <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk338" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk338"><span class="kn">Lemma</span> <span class="nf">subseteq_Forall</span> (<span class="nv">A</span>:<span class="kt">Type</span>) (<span class="nv">P</span> : A -&gt; <span class="kt">Prop</span>) (<span class="nv">l1</span> <span class="nv">l2</span> : list A) :
 l2 ⊆ l1 -&gt; Forall P l1 -&gt; Forall P l2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A → <span class="kt">Prop</span></span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l2 ⊆ l1 → Forall P l1 → Forall P l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk339" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk339"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A → <span class="kt">Prop</span></span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l2 ⊆ l1 → Forall P l1 → Forall P l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk33a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk33a"><span class="nb">intros</span> Hsub Hfor.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A → <span class="kt">Prop</span></span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>l2 ⊆ l1</span></span></span><br><span><var>Hfor</var><span class="hyp-type"><b>: </b><span>Forall P l1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall P l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk33b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk33b"><span class="nb">apply</span> Forall_forall.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A → <span class="kt">Prop</span></span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>l2 ⊆ l1</span></span></span><br><span><var>Hfor</var><span class="hyp-type"><b>: </b><span>Forall P l1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ l2 → P x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk33c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk33c"><span class="nb">rewrite</span> Forall_forall <span class="kr">in</span> Hfor.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A → <span class="kt">Prop</span></span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>l2 ⊆ l1</span></span></span><br><span><var>Hfor</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ l1 → P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ l2 → P x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk33d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk33d"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A → <span class="kt">Prop</span></span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>l2 ⊆ l1</span></span></span><br><span><var>Hfor</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ l1 → P x</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∈ l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk33e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk33e"><span class="nb">apply</span> Hfor.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A → <span class="kt">Prop</span></span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>l2 ⊆ l1</span></span></span><br><span><var>Hfor</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ l1 → P x</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∈ l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ l1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk33f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk33f"><span class="nb">apply</span> Hsub.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A → <span class="kt">Prop</span></span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>l2 ⊆ l1</span></span></span><br><span><var>Hfor</var><span class="hyp-type"><b>: </b><span><span class="kr">∀</span> <span class="nv">x</span> : A, x ∈ l1 → P x</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ∈ l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ∈ l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre></article></body></html>