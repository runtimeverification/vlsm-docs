<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>ByzantineTraces.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="alectryon.css" rel="stylesheet"><link href="pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script></head><body><article class="alectryon-root alectryon-windowed alectryon-coqdoc"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.13.0+0.13.0. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> stdpp <span class="kn">Require Import</span> prelude.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Coq <span class="kn">Require Import</span> FinFun.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM <span class="kn">Require Import</span> Lib.Preamble Core.VLSM Core.VLSMProjections Core.Composition Core.ProjectionTraces Core.Validator.</span></span></pre><div class="doc">
<a id="lab1"></a><h1 class="section">VLSM Byzantine Traces</h1>
<div class="paragraph"> </div>

In this section, we introduce two definitions of Byzantine traces,
then show them equivalent (Lemma <span class="inlinecode"><span class="id" title="var">byzantine_alt_byzantine_iff</span></span>),
and equivalent with traces on the corresponding pre-loaded VLSM
(Lemmas <span class="inlinecode"><span class="id" title="var">byzantine_pre_loaded_with_all_messages</span></span> and <span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_alt_eq</span></span>).

<div class="paragraph"> </div>

Note that, contrary to what one might think, the <span class="inlinecode"><span class="id" title="var">byzantine_trace_prop</span></span>erty
does not only capture traces exhibiting byzantine behavior, but also all
<span class="inlinecode"><span class="id" title="var">valid_trace</span></span>s (consequence of Lemma <span class="inlinecode"><span class="id" title="var">vlsm_incl_pre_loaded_with_all_messages_vlsm</span></span>).
Therefore to avoid confusion we will call <i>proper byzantine traces</i>,
or <i>traces exhibiting byzantine behavior</i> the collection of traces with
the <span class="inlinecode"><span class="id" title="var">byzantine_trace_prop</span></span>erty but without the <span class="inlinecode"><span class="id" title="var">valid_trace_prop</span></span>erty.

<div class="paragraph"> </div>

In the remainder of this section, we fix a (regular) VLSM <code>M</code> with
signature <code>S</code> and of type <code>T</code>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
<a id="lab2"></a><h2 class="section">Definition and basic properties</h2>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">ByzantineTraces</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    {<span class="nv">message</span> : <span class="kt">Type</span>}
    (<span class="nv">M</span> : VLSM message)
    .</span></span></pre><div class="doc">
<div class="paragraph"> </div>

The first definition says that a trace has the <span class="inlinecode"><span class="id" title="var">byzantine_trace_prop</span></span>erty
if it is the projection of
a trace which can be obtained by freely composing <code>M</code> with an arbitrary
VLSM <code>M'</code> (of a signatulre <code>S'</code> and type <code>T'</code> over the same set of <code>message</code>s).

<div class="paragraph"> </div>

Below, <span class="inlinecode"><span class="id" title="var">binary_free_composition_fst</span></span> represents the projection of
the free composition between <code>M</code> and <code>M'</code> to the component corresponding
to <code>M</code>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">byzantine_trace_prop</span>
    (<span class="nv">tr</span> : vTrace M) :=
    <span class="kr">exists</span> (<span class="nv">M&#39;</span> : VLSM message)
        (<span class="nv">Proj</span> := binary_free_composition_fst M M&#39;),
        valid_trace_prop Proj tr.</span></span></pre><div class="doc">
<div class="paragraph"> </div>

The first result says that all traces with the <span class="inlinecode"><span class="id" title="var">byzantine_trace_prop</span></span>erty
for a VLSM <code>M</code> are traces of the <span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_vlsm</span></span> associated to <code>M</code>:

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk0"><span class="kn">Lemma</span> <span class="nf">byzantine_pre_loaded_with_all_messages</span>
    (<span class="nv">PreLoaded</span> := pre_loaded_with_all_messages_vlsm M)
    (<span class="nv">tr</span> : vTrace M)
    (<span class="nv">Hbyz</span> : byzantine_trace_prop tr)
    : valid_trace_prop PreLoaded tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace M</span></span></span><br><span><var>Hbyz</var><span class="hyp-type"><b>: </b><span>byzantine_trace_prop tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_trace_prop PreLoaded tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace M</span></span></span><br><span><var>Hbyz</var><span class="hyp-type"><b>: </b><span>byzantine_trace_prop tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_trace_prop PreLoaded tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk2"><span class="nb">destruct</span> Hbyz <span class="kr">as</span> [M&#39; Htr].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace M</span></span></span><br><span><var>M'</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">Proj</span> := binary_free_composition_fst M M&#39; <span class="kr">in</span>
valid_trace_prop Proj tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_trace_prop PreLoaded tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk3"><span class="nb">simpl</span> <span class="kr">in</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace M</span></span></span><br><span><var>M'</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>valid_trace_prop
  (binary_free_composition_fst M M&#39;) tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_trace_prop PreLoaded tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span>
        (proj_pre_loaded_with_all_messages_incl
            (binary_IM M M&#39;)
            (free_constraint _)
            <span class="kp">first</span>
            tr
            Htr
        ).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab3"></a><h2 class="section">An alternative definition</h2>
<div class="paragraph"> </div>

The <span class="inlinecode"><span class="id" title="var">alternate_byzantine_trace_prop</span></span>erty relies on the composition
of the VLSM with a special VLSM which can produce all messages.

<div class="paragraph"> </div>

We will define its type (<span class="inlinecode"><span class="id" title="var">all_messages_type</span></span>),
signature (<span class="inlinecode"><span class="id" title="var">all_messages_sig</span></span>) and the VLSM itself (<span class="inlinecode"><span class="id" title="var">emit_any_message_vlsm</span></span>) below.

<div class="paragraph"> </div>

The type of the <span class="inlinecode"><span class="id" title="var">emit_any_message_vlsm</span></span> sets the <span class="inlinecode"><span class="id" title="var">label</span></span> set to consist of all
<code>message</code>s and the <span class="inlinecode"><span class="id" title="var">state</span></span> to consist of a single state (here <span class="inlinecode"><span class="id" title="var">tt</span></span>).

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">all_messages_type</span> : VLSMType message :=
    {| label := message
     ; state := unit
    |}.</span></span></pre><div class="doc">
<div class="paragraph"> </div>

The <span class="inlinecode"><span class="id" title="var">emit_any_message_vlsm</span></span> signature further says that the (single) state is
initial and no messages are initial.
It takes as parameter a <code>message</code> to ensure that the sets of labels and
messages are both non-empty.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">all_messages_s0</span> := exist (<span class="kr">fun</span> <span class="nv">s</span>: @state _ all_messages_type =&gt; <span class="kt">True</span>) tt I.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Instance</span> <span class="nf">all_messages_state_inh</span> : Inhabited (sig  (<span class="kr">fun</span> <span class="nv">s</span>: @state _ all_messages_type =&gt; <span class="kt">True</span>)) :=
  {| inhabitant := all_messages_s0 |}.</span></span></pre><div class="doc">
<div class="paragraph"> </div>

The <span class="inlinecode"><span class="id" title="var">transition</span></span> function of the <span class="inlinecode"><span class="id" title="var">emit_any_message_vlsm</span></span> generates the
message given as a label:

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">all_messages_transition</span>
    (<span class="nv">l</span> : @label _ all_messages_type)
    (<span class="nv">som</span> : @state _ all_messages_type * option message)
    : @state _ all_messages_type * option message
    := (tt, Some l).</span></span></pre><div class="doc">
<div class="paragraph"> </div>

The <span class="inlinecode"><span class="id" title="var">valid</span></span>ity predicate specifies that all transitions are valid

<div class="paragraph"> </div>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">all_messages_valid</span>
    (<span class="nv">l</span> : @label _ all_messages_type)
    (<span class="nv">som</span> : @state _ all_messages_type * option message)
    : <span class="kt">Prop</span>
    := <span class="kt">True</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">emit_any_message_vlsm_machine</span>
    : VLSMMachine all_messages_type
    :=
    {| initial_state_prop := <span class="kr">fun</span> <span class="nv">s</span> =&gt; <span class="kt">True</span>
     ; initial_message_prop := <span class="kr">fun</span> <span class="nv">m</span> =&gt; <span class="kt">False</span>
     ; transition := all_messages_transition
     ; valid := all_messages_valid
    |}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">emit_any_message_vlsm</span>
    := mk_vlsm emit_any_message_vlsm_machine.</span></span></pre><div class="doc">
<div class="paragraph"> </div>

Using the VLSM defined above, we can define the <span class="inlinecode"><span class="id" title="var">alternate_byzantine_trace_prop</span></span>erty
of a trace <code>tr</code> for the VLSM <code>M</code> as being a trace in the projection
of the free composition between <code>M</code> and the <span class="inlinecode"><span class="id" title="var">emit_any_message_vlsm</span></span>,
to the component corresponding to <code>M</code>:

<div class="paragraph"> </div>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">alternate_byzantine_trace_prop</span>
    (<span class="nv">tr</span> : vTrace M)
    (<span class="nv">Proj</span> := binary_free_composition_fst M emit_any_message_vlsm)
    :=
    valid_trace_prop Proj tr.</span></span></pre><div class="doc">
<div class="paragraph"> </div>

Since the <span class="inlinecode"><span class="id" title="var">byzantine_trace_prop</span></span>erty was referring to the free composition
to any other VLSM, we can instantiate that definition to the
<span class="inlinecode"><span class="id" title="var">emit_any_message_vlsm</span></span> to derive that a trace with the
<span class="inlinecode"><span class="id" title="var">alternate_byzantine_trace_prop</span></span>erty also has the <span class="inlinecode"><span class="id" title="var">byzantine_trace_prop</span></span>erty.

<div class="paragraph"> </div>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk4"><span class="kn">Lemma</span> <span class="nf">byzantine_alt_byzantine</span>
    (<span class="nv">tr</span> : vTrace M)
    (<span class="nv">Halt</span> : alternate_byzantine_trace_prop tr)
    : byzantine_trace_prop tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace M</span></span></span><br><span><var>Halt</var><span class="hyp-type"><b>: </b><span>alternate_byzantine_trace_prop tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">byzantine_trace_prop tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk5"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace M</span></span></span><br><span><var>Halt</var><span class="hyp-type"><b>: </b><span>alternate_byzantine_trace_prop tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">byzantine_trace_prop tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk6"><span class="kr">exists</span> <span class="nv">emit_any_message_vlsm</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace M</span></span></span><br><span><var>Halt</var><span class="hyp-type"><b>: </b><span>alternate_byzantine_trace_prop tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">let</span> <span class="nv">Proj</span> :=
  binary_free_composition_fst M emit_any_message_vlsm
  <span class="kr">in</span>
valid_trace_prop Proj tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab4"></a><h2 class="section">Equivalence between the two Byzantine trace definitions</h2>
<div class="paragraph"> </div>

In this section we prove that the <span class="inlinecode"><span class="id" title="var">alternate_byzantine_trace_prop</span></span>erty is
equivalent to the <span class="inlinecode"><span class="id" title="var">byzantine_trace_prop</span></span>erty.

<div class="paragraph"> </div>

Since we have already proven that the <span class="inlinecode"><span class="id" title="var">alternate_byzantine_trace_prop</span></span>erty
implies the <span class="inlinecode"><span class="id" title="var">byzantine_trace_prop</span></span>erty (Lemma <span class="inlinecode"><span class="id" title="var">byzantine_alt_byzantine</span></span>),
and since we know that the traces with the <span class="inlinecode"><span class="id" title="var">byzantine_trace_prop</span></span>erty
are <span class="inlinecode"><span class="id" title="var">valid_trace</span></span>s for the <span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_vlsm</span></span>, to prove the
equivalence it is enough to close the circle by proving the
<span class="inlinecode"><span class="id" title="var">VLSM_incl</span></span>usion between the <span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_vlsm</span></span> and the projection VLSM used
in the definition of the <span class="inlinecode"><span class="id" title="var">alternate_byzantine_trace_prop</span></span>erty.

<div class="paragraph"> </div>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">pre_loaded_with_all_messages_byzantine_alt</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    (<span class="nv">PreLoaded</span> := pre_loaded_with_all_messages_vlsm M)
    (<span class="nv">Alt1</span> := binary_free_composition_fst M emit_any_message_vlsm)
    (<span class="nv">Alt</span> := binary_free_composition M emit_any_message_vlsm)
    .</span></span></pre><div class="doc">
Let <code>PreLoaded</code> denote the <span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_vlsm</span></span> of <code>M</code>, <code>Alt</code> denote
the free composition of <code>M</code> with the <span class="inlinecode"><span class="id" title="var">emit_any_message_vlsm</span></span>,
and <code>Alt1</code> denote the projection of <code>Alt</code> to the component of <code>M</code>.

<div class="paragraph"> </div>

First, note that using the results above it is easy to prove the inclusion
of <code>Alt1</code> into <code>Preloaded</code>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk7"><span class="kn">Lemma</span> <span class="nf">alt_pre_loaded_with_all_messages_incl</span>
        : VLSM_incl Alt1 PreLoaded.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl Alt1 PreLoaded</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl Alt1 PreLoaded</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk9"><span class="nb">intros</span> t Hvt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Trace</span></span></span><br><span><var>Hvt</var><span class="hyp-type"><b>: </b><span>valid_trace_prop
  {|
    vtype := vtype Alt1;
    vmachine := machine Alt1
  |} t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_trace_prop
  {|
    vtype := vtype Alt1; vmachine := machine PreLoaded
  |} t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chka"><span class="nb">apply</span> byzantine_pre_loaded_with_all_messages.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Trace</span></span></span><br><span><var>Hvt</var><span class="hyp-type"><b>: </b><span>valid_trace_prop
  {|
    vtype := vtype Alt1;
    vmachine := machine Alt1
  |} t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">byzantine_trace_prop t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chkb"><span class="nb">apply</span> byzantine_alt_byzantine.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Trace</span></span></span><br><span><var>Hvt</var><span class="hyp-type"><b>: </b><span>valid_trace_prop
  {|
    vtype := vtype Alt1;
    vmachine := machine Alt1
  |} t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">alternate_byzantine_trace_prop t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
To prove the reverse inclusion (between <code>PreLoaded</code> and <code>Alt1</code>) we will use the
<span class="inlinecode"><span class="id" title="var">basic_VLSM_incl</span></span> meta-result about proving inclusions bewteen
VLSMs which states that
<ul class="doclist">
<li> if all <span class="inlinecode"><span class="id" title="var">valid</span></span> messages in the first are <span class="inlinecode"><span class="id" title="var">valid_message</span></span>s in the second, and

</li>
<li> if all <span class="inlinecode"><span class="id" title="var">valid_state</span></span>s in the first are also <span class="inlinecode"><span class="id" title="var">valid_state</span></span>s in the second,

</li>
<li> and if all <span class="inlinecode"><span class="id" title="var">input_valid_transition</span></span>s in the first are also <span class="inlinecode"><span class="id" title="var">input_valid_transition</span></span>s

</li>
</ul>
in the second,
<ul class="doclist">
<li> then the first VLSM is included in the second.

</li>
</ul>
<div class="paragraph"> </div>

We will tackle each of these properties in the sequel.

<div class="paragraph"> </div>

First note that <i>all</i> messages are <span class="inlinecode"><span class="id" title="var">valid_message</span></span>s for <code>Alt</code>, as
<span class="inlinecode"><span class="id" title="var">emit_any_message_vlsm</span></span> can generate any message without changing state.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chkc"><span class="kn">Lemma</span> <span class="nf">alt_option_valid_message</span>
        (<span class="nv">om</span> : option message)
        : option_valid_message_prop Alt om.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Alt om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chkd"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Alt om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chke"><span class="nb">destruct</span> om <span class="kr">as</span> [m|];[|<span class="nb">apply</span> option_valid_message_None].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Alt (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chkf"><span class="nb">pose</span> (s :=proj1_sig (vs0 Alt): vstate Alt).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s</var><span><span class="hyp-body"><b>:= </b><span>`(vs0 Alt) : vstate Alt</span></span><span class="hyp-type"><b>: </b><span>vstate Alt</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Alt (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk10"><span class="nb">unfold</span> vstate <span class="kr">in</span> s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s</var><span><span class="hyp-body"><b>:= </b><span>`(vs0 Alt)</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Alt (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk11"><span class="kr">exists</span> <span class="nv">s</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s</var><span><span class="hyp-body"><b>:= </b><span>`(vs0 Alt)</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop Alt s (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk12"><span class="nb">assert</span> (valid_state_message_prop Alt s None) <span class="kr">as</span> Hs
          <span class="bp">by</span> (<span class="nb">apply</span> valid_initial_state;<span class="nb">apply</span> proj2_sig).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s</var><span><span class="hyp-body"><b>:= </b><span>`(vs0 Alt)</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Alt s None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop Alt s (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk13"><span class="nb">eapply</span> (valid_generated_state_message Alt) <span class="kr">with</span> s None s None (existT second _)
        ;[<span class="bp">assumption</span>|<span class="bp">assumption</span>|<span class="nb">split</span>; <span class="bp">exact</span> I|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s</var><span><span class="hyp-body"><b>:= </b><span>`(vs0 Alt)</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Alt s None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transition (existT second <span class="nl">?Goal</span>) (s, None) =
(s, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk14"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s</var><span><span class="hyp-body"><b>:= </b><span>`(vs0 Alt)</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Alt s None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(state_update (binary_IM M emit_any_message_vlsm) s
   second (), Some <span class="nl">?Goal</span>) = (s, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk15"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s</var><span><span class="hyp-body"><b>:= </b><span>`(vs0 Alt)</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Alt s None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update (binary_IM M emit_any_message_vlsm) s
  second () = s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> state_update_id; <span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
Using the above, it is straight-forward to show that:

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk16"><span class="kn">Lemma</span> <span class="nf">alt_proj_option_valid_message</span>
        (<span class="nv">m</span> : option message)
        : option_valid_message_prop Alt1 m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Alt1 m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk17"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Alt1 m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk18"><span class="nb">apply</span> valid_message_projection.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop
  (composite_vlsm (binary_IM M emit_any_message_vlsm)
     (free_constraint
        (binary_IM M emit_any_message_vlsm))) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> alt_option_valid_message.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
Next we define the "lifing" of a <span class="inlinecode"><span class="id" title="var">state</span></span> <code>s</code> from <code>M</code> to <code>Alt</code>,
by simply setting to <code>s</code> the  corresponding component of the initial
(composed) state <span class="inlinecode"><span class="id" title="var">s0</span></span> of <code>Alt</code>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">lifted_alt_state</span>
        (<span class="nv">s</span> : vstate M)
        : vstate Alt
        := lift_to_composite_state
             (binary_IM M emit_any_message_vlsm) <span class="kp">first</span> s.</span></span></pre><div class="doc">
Lifting a <span class="inlinecode"><span class="id" title="var">valid_state</span></span> of <code>PreLoaded</code> we obtain a <span class="inlinecode"><span class="id" title="var">valid_state</span></span> of <code>Alt</code>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk19"><span class="kn">Lemma</span> <span class="nf">preloaded_alt_valid_state</span>
        (<span class="nv">sj</span> : state)
        (<span class="nv">om</span> : option message)
        (<span class="nv">Hp</span> : valid_state_message_prop PreLoaded sj om)
        : valid_state_prop Alt (lifted_alt_state sj).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded sj om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Alt (lifted_alt_state sj)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk1a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded sj om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Alt (lifted_alt_state sj)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk1b"><span class="nb">assert</span> (valid_state_prop PreLoaded sj) <span class="kr">as</span> Hsj
        <span class="bp">by</span> (<span class="kr">exists</span> <span class="nv">om</span>;<span class="bp">assumption</span>);<span class="nb">clear</span> Hp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreLoaded sj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Alt (lifted_alt_state sj)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk1c"><span class="nb">induction</span> Hsj <span class="nb">using</span> valid_state_prop_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Alt (lifted_alt_state s)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ByzantineTraces-v-chk1d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om0, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHsj</var><span class="hyp-type"><b>: </b><span>valid_state_prop Alt (lifted_alt_state s)</span></span></span><br></div><label class="goal-separator" for="ByzantineTraces-v-chk1d"><hr></label><div class="goal-conclusion">valid_state_prop Alt (lifted_alt_state s&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk1e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Alt (lifted_alt_state s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk1f"><span class="nb">apply</span> initial_state_is_valid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">initial_state_prop (lifted_alt_state s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> [];[<span class="bp">exact</span> Hs|<span class="bp">exact</span> I].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk20">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om0, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHsj</var><span class="hyp-type"><b>: </b><span>valid_state_prop Alt (lifted_alt_state s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Alt (lifted_alt_state s&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk21"><span class="kr">exists</span> <span class="nv">om&#39;</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om0, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHsj</var><span class="hyp-type"><b>: </b><span>valid_state_prop Alt (lifted_alt_state s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop Alt (lifted_alt_state s&#39;) om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk22"><span class="nb">assert</span> (option_valid_message_prop Alt om0) <span class="kr">as</span> Hom0
          <span class="bp">by</span> <span class="nb">apply</span> alt_option_valid_message.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om0, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHsj</var><span class="hyp-type"><b>: </b><span>valid_state_prop Alt (lifted_alt_state s)</span></span></span><br><span><var>Hom0</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Alt om0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop Alt (lifted_alt_state s&#39;) om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk23"><span class="nb">cut</span> (input_valid_transition Alt (existT <span class="kp">first</span> l) (lifted_alt_state s,om0) (lifted_alt_state s&#39;, om&#39;))
          ;[<span class="nb">apply</span> input_valid_transition_outputs_valid_state_message|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om0, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHsj</var><span class="hyp-type"><b>: </b><span>valid_state_prop Alt (lifted_alt_state s)</span></span></span><br><span><var>Hom0</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Alt om0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition Alt (existT <span class="kp">first</span> l)
  (lifted_alt_state s, om0) (lifted_alt_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk24"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om0, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHsj</var><span class="hyp-type"><b>: </b><span>valid_state_prop Alt (lifted_alt_state s)</span></span></span><br><span><var>Hom0</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Alt om0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid Alt (existT <span class="kp">first</span> l)
  (lifted_alt_state s, om0)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ByzantineTraces-v-chk25" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om0, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHsj</var><span class="hyp-type"><b>: </b><span>valid_state_prop Alt (lifted_alt_state s)</span></span></span><br><span><var>Hom0</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Alt om0</span></span></span><br></div><label class="goal-separator" for="ByzantineTraces-v-chk25"><hr></label><div class="goal-conclusion">transition (existT <span class="kp">first</span> l) (lifted_alt_state s, om0) =
(lifted_alt_state s&#39;, om&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk26">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om0, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHsj</var><span class="hyp-type"><b>: </b><span>valid_state_prop Alt (lifted_alt_state s)</span></span></span><br><span><var>Hom0</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Alt om0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid Alt (existT <span class="kp">first</span> l)
  (lifted_alt_state s, om0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk27"><span class="nb">split</span>;[<span class="bp">assumption</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om0, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHsj</var><span class="hyp-type"><b>: </b><span>valid_state_prop Alt (lifted_alt_state s)</span></span></span><br><span><var>Hom0</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Alt om0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Alt om0
‚àß valid (existT <span class="kp">first</span> l) (lifted_alt_state s, om0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk28"><span class="nb">split</span>;[<span class="bp">assumption</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om0, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHsj</var><span class="hyp-type"><b>: </b><span>valid_state_prop Alt (lifted_alt_state s)</span></span></span><br><span><var>Hom0</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Alt om0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid (existT <span class="kp">first</span> l) (lifted_alt_state s, om0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk29"><span class="nb">split</span>;[|<span class="bp">exact</span> I].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om0, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHsj</var><span class="hyp-type"><b>: </b><span>valid_state_prop Alt (lifted_alt_state s)</span></span></span><br><span><var>Hom0</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Alt om0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid (binary_IM M emit_any_message_vlsm)
  (existT <span class="kp">first</span> l) (lifted_alt_state s, om0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk2a"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om0, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHsj</var><span class="hyp-type"><b>: </b><span>valid_state_prop Alt (lifted_alt_state s)</span></span></span><br><span><var>Hom0</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Alt om0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid M l (lifted_alt_state s <span class="kp">first</span>, om0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Ht.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk2b">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om0, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHsj</var><span class="hyp-type"><b>: </b><span>valid_state_prop Alt (lifted_alt_state s)</span></span></span><br><span><var>Hom0</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Alt om0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transition (existT <span class="kp">first</span> l) (lifted_alt_state s, om0) =
(lifted_alt_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk2c"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om0, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHsj</var><span class="hyp-type"><b>: </b><span>valid_state_prop Alt (lifted_alt_state s)</span></span></span><br><span><var>Hom0</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Alt om0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition M l (lifted_alt_state s <span class="kp">first</span>, om0) <span class="kr">in</span>
 (state_update (binary_IM M emit_any_message_vlsm)
    (lifted_alt_state s) <span class="kp">first</span> si&#39;, om&#39;)) =
(lifted_alt_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk2d"><span class="nb">replace</span> (lifted_alt_state s <span class="kp">first</span>) <span class="kr">with</span> s
            <span class="bp">by</span> (<span class="nb">unfold</span> lifted_alt_state,lift_to_composite_state
               ;<span class="nb">rewrite</span> state_update_eq;<span class="bp">reflexivity</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om0, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHsj</var><span class="hyp-type"><b>: </b><span>valid_state_prop Alt (lifted_alt_state s)</span></span></span><br><span><var>Hom0</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Alt om0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := vtransition M l (s, om0) <span class="kr">in</span>
 (state_update (binary_IM M emit_any_message_vlsm)
    (lifted_alt_state s) <span class="kp">first</span> si&#39;, om&#39;)) =
(lifted_alt_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk2e"><span class="nb">apply</span> proj2 <span class="kr">in</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om0, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om0) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHsj</var><span class="hyp-type"><b>: </b><span>valid_state_prop Alt (lifted_alt_state s)</span></span></span><br><span><var>Hom0</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Alt om0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := vtransition M l (s, om0) <span class="kr">in</span>
 (state_update (binary_IM M emit_any_message_vlsm)
    (lifted_alt_state s) <span class="kp">first</span> si&#39;, om&#39;)) =
(lifted_alt_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk2f"><span class="nb">change</span> (vtransition M l (s: vstate M,om0) = (s&#39;,om&#39;)) <span class="kr">in</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om0, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition M l (s : vstate M, om0) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHsj</var><span class="hyp-type"><b>: </b><span>valid_state_prop Alt (lifted_alt_state s)</span></span></span><br><span><var>Hom0</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Alt om0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := vtransition M l (s, om0) <span class="kr">in</span>
 (state_update (binary_IM M emit_any_message_vlsm)
    (lifted_alt_state s) <span class="kp">first</span> si&#39;, om&#39;)) =
(lifted_alt_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk30"><span class="nb">rewrite</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om0, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition M l (s : vstate M, om0) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHsj</var><span class="hyp-type"><b>: </b><span>valid_state_prop Alt (lifted_alt_state s)</span></span></span><br><span><var>Hom0</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Alt om0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(state_update (binary_IM M emit_any_message_vlsm)
   (lifted_alt_state s) <span class="kp">first</span> s&#39;, om&#39;) =
(lifted_alt_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk31"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om0, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition M l (s : vstate M, om0) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHsj</var><span class="hyp-type"><b>: </b><span>valid_state_prop Alt (lifted_alt_state s)</span></span></span><br><span><var>Hom0</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Alt om0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update (binary_IM M emit_any_message_vlsm)
  (lifted_alt_state s) <span class="kp">first</span> s&#39; = lifted_alt_state s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> state_update_twice.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
Finally, we can use <span class="inlinecode"><span class="id" title="var">basic_VLSM_incl</span></span> together with the
results above to show that <code>Preloaded</code> is included in <code>Alt1</code>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk32"><span class="kn">Lemma</span> <span class="nf">pre_loaded_with_all_messages_alt_incl</span>
        : VLSM_incl PreLoaded Alt1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl PreLoaded Alt1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk33"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl PreLoaded Alt1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk34"><span class="nb">apply</span> (basic_VLSM_incl (machine PreLoaded) (machine Alt1))
        ; <span class="nb">intro</span>; <span class="nb">intros</span>; [<span class="bp">assumption</span>| | |<span class="nb">apply</span> H].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} (id s)</span></span></span><br><span><var>HmX</var><span class="hyp-type"><b>: </b><span>vinitial_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop
  {|
    vtype := vtype PreLoaded; vmachine := machine Alt1
  |} m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ByzantineTraces-v-chk35" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} om</span></span></span><br></div><label class="goal-separator" for="ByzantineTraces-v-chk35"><hr></label><div class="goal-conclusion">vvalid
  {|
    vtype := vtype PreLoaded; vmachine := machine Alt1
  |} (id l) (id s, om)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk36">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} (id s)</span></span></span><br><span><var>HmX</var><span class="hyp-type"><b>: </b><span>vinitial_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop
  {|
    vtype := vtype PreLoaded; vmachine := machine Alt1
  |} m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> alt_proj_option_valid_message.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk37">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid
  {|
    vtype := vtype PreLoaded; vmachine := machine Alt1
  |} (id l) (id s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk38"><span class="kr">exists</span> (<span class="nv">lifted_alt_state</span> <span class="nv">s</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lifted_alt_state s <span class="kp">first</span> = id s
‚àß input_valid
    (composite_vlsm
       (binary_IM M emit_any_message_vlsm)
       (free_constraint
          (binary_IM M emit_any_message_vlsm)))
    (existT <span class="kp">first</span> (id l)) (lifted_alt_state s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk39"><span class="nb">split</span>; [<span class="bp">reflexivity</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid
  (composite_vlsm (binary_IM M emit_any_message_vlsm)
     (free_constraint
        (binary_IM M emit_any_message_vlsm)))
  (existT <span class="kp">first</span> (id l)) (lifted_alt_state s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk3a"><span class="nb">destruct</span> Hv <span class="kr">as</span> [[_om Hps] [Hpm Hv]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om, _om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} om</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid
  (composite_vlsm (binary_IM M emit_any_message_vlsm)
     (free_constraint
        (binary_IM M emit_any_message_vlsm)))
  (existT <span class="kp">first</span> (id l)) (lifted_alt_state s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk3b"><span class="kp">repeat</span> <span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om, _om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} om</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop
  (composite_vlsm (binary_IM M emit_any_message_vlsm)
     (free_constraint
        (binary_IM M emit_any_message_vlsm)))
  (lifted_alt_state s)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ByzantineTraces-v-chk3c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om, _om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} om</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} om</span></span></span><br></div><label class="goal-separator" for="ByzantineTraces-v-chk3c"><hr></label><div class="goal-conclusion">option_valid_message_prop
  (composite_vlsm (binary_IM M emit_any_message_vlsm)
     (free_constraint
        (binary_IM M emit_any_message_vlsm))) om</div></blockquote><input class="alectryon-extra-goal-toggle" id="ByzantineTraces-v-chk3d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om, _om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} om</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} om</span></span></span><br></div><label class="goal-separator" for="ByzantineTraces-v-chk3d"><hr></label><div class="goal-conclusion">composite_valid (binary_IM M emit_any_message_vlsm)
  (existT <span class="kp">first</span> (id l)) 
  (lifted_alt_state s, om)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk3e">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om, _om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} om</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop
  (composite_vlsm (binary_IM M emit_any_message_vlsm)
     (free_constraint
        (binary_IM M emit_any_message_vlsm)))
  (lifted_alt_state s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> preloaded_alt_valid_state <span class="kr">with</span> _om; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk3f">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om, _om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} om</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop
  (composite_vlsm (binary_IM M emit_any_message_vlsm)
     (free_constraint
        (binary_IM M emit_any_message_vlsm))) om</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> alt_option_valid_message.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk40">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om, _om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} om</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine Alt1
  |} om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid (binary_IM M emit_any_message_vlsm)
  (existT <span class="kp">first</span> (id l)) (lifted_alt_state s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
Hence, <code>Preloaded</code> and <code>Alt1</code> are actually trace-equal:

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk41"><span class="kn">Lemma</span> <span class="nf">pre_loaded_with_all_messages_alt_eq</span>
        : VLSM_eq PreLoaded Alt1
        .</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_eq PreLoaded Alt1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk42"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_eq PreLoaded Alt1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk43"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Trace</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_trace_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} t
‚Üí valid_trace_prop
    {|
      vtype := vtype PreLoaded;
      vmachine := machine Alt1
    |} t</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ByzantineTraces-v-chk44" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Trace</span></span></span><br></div><label class="goal-separator" for="ByzantineTraces-v-chk44"><hr></label><div class="goal-conclusion">valid_trace_prop
  {|
    vtype := vtype PreLoaded; vmachine := machine Alt1
  |} t
‚Üí valid_trace_prop
    {|
      vtype := vtype PreLoaded;
      vmachine := machine PreLoaded
    |} t</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk45">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Trace</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_trace_prop
  {|
    vtype := vtype PreLoaded;
    vmachine := machine PreLoaded
  |} t
‚Üí valid_trace_prop
    {|
      vtype := vtype PreLoaded;
      vmachine := machine Alt1
    |} t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> pre_loaded_with_all_messages_alt_incl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk46">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm M</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt1</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition_fst M
  emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Alt</var><span><span class="hyp-body"><b>:= </b><span>binary_free_composition M emit_any_message_vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Trace</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_trace_prop
  {|
    vtype := vtype PreLoaded; vmachine := machine Alt1
  |} t
‚Üí valid_trace_prop
    {|
      vtype := vtype PreLoaded;
      vmachine := machine PreLoaded
    |} t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> alt_pre_loaded_with_all_messages_incl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">pre_loaded_with_all_messages_byzantine_alt</span>.</span></span></pre><div class="doc">
Finally, we can conclude that the two definitions for byzantine traces are
equivalent:

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk47"><span class="kn">Lemma</span> <span class="nf">byzantine_alt_byzantine_iff</span>
    (<span class="nv">tr</span> : vTrace M)
    : alternate_byzantine_trace_prop tr &lt;-&gt; byzantine_trace_prop tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">alternate_byzantine_trace_prop tr
‚Üî byzantine_trace_prop tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk48"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">alternate_byzantine_trace_prop tr
‚Üî byzantine_trace_prop tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk49"><span class="nb">split</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace M</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>alternate_byzantine_trace_prop tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">byzantine_trace_prop tr</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ByzantineTraces-v-chk4a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace M</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>byzantine_trace_prop tr</span></span></span><br></div><label class="goal-separator" for="ByzantineTraces-v-chk4a"><hr></label><div class="goal-conclusion">alternate_byzantine_trace_prop tr</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk4b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace M</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>alternate_byzantine_trace_prop tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">byzantine_trace_prop tr</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> byzantine_alt_byzantine; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk4c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace M</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>byzantine_trace_prop tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">alternate_byzantine_trace_prop tr</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk4d"><span class="nb">apply</span> pre_loaded_with_all_messages_alt_incl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace M</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>byzantine_trace_prop tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_trace_prop
  {|
    vtype :=
      vtype (pre_loaded_with_all_messages_vlsm M);
    vmachine :=
      machine (pre_loaded_with_all_messages_vlsm M)
  |} tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk4e"><span class="nb">apply</span> byzantine_pre_loaded_with_all_messages.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace M</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>byzantine_trace_prop tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">byzantine_trace_prop tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">ByzantineTraces</span>.</span></span></pre><div class="doc">
<a id="lab5"></a><h2 class="section">Byzantine fault tolerance for a single validator</h2>
<div class="paragraph"> </div>

Given that projections of composition of validator VLSMs are equal to their corresponding
pre-loaded with all messages VLSM (<span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_validating_proj_eq</span></span>),
we can derive that for validators, all their byzantine traces are
included in the <span class="inlinecode"><span class="id" title="var">valid_trace</span></span>s of their projection from the composition.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk4f"><span class="kn">Lemma</span> <span class="nf">validator_component_byzantine_fault_tolerance</span>
    <span class="nv">message</span> `{EqDecision index}
    (IM : index -&gt; VLSM message)
    (constraint : composite_label IM -&gt; composite_state IM  * option message -&gt; <span class="kt">Prop</span>)
    (i : index)
    (Hvalidator: component_projection_validator_prop IM constraint i)
    : <span class="kr">forall</span> <span class="nv">tr</span>, byzantine_trace_prop (IM i) tr -&gt;
        valid_trace_prop (composite_vlsm_constrained_projection IM constraint i) tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop IM
  constraint i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">tr</span> : vTrace (IM i),
  byzantine_trace_prop (IM i) tr
  ‚Üí valid_trace_prop
      (composite_vlsm_constrained_projection IM
         constraint i) tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk50"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop IM
  constraint i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">tr</span> : vTrace (IM i),
  byzantine_trace_prop (IM i) tr
  ‚Üí valid_trace_prop
      (composite_vlsm_constrained_projection IM
         constraint i) tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk51"><span class="nb">intros</span> tr Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop IM
  constraint i</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace (IM i)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>byzantine_trace_prop (IM i) tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_trace_prop
  (composite_vlsm_constrained_projection IM constraint
     i) tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk52"><span class="nb">apply</span>
        (VLSM_incl_valid_trace
            (pre_loaded_with_all_messages_validator_component_proj_incl _ _ _ Hvalidator)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop IM
  constraint i</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace (IM i)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>byzantine_trace_prop (IM i) tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_trace_prop
  {|
    vtype :=
      vtype (pre_loaded_with_all_messages_vlsm (IM i));
    vmachine :=
      machine
        (pre_loaded_with_all_messages_vlsm (IM i))
  |} tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk53"><span class="nb">revert</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop IM
  constraint i</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">byzantine_trace_prop (IM i) tr
‚Üí valid_trace_prop
    {|
      vtype :=
        vtype
          (pre_loaded_with_all_messages_vlsm (IM i));
      vmachine :=
        machine
          (pre_loaded_with_all_messages_vlsm (IM i))
    |} tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk54"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop IM
  constraint i</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">byzantine_trace_prop (IM i) tr
‚Üí valid_trace_prop
    {|
      vtype := type (IM i);
      vmachine :=
        pre_loaded_with_all_messages_vlsm_machine
          (IM i)
    |} tr</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> byzantine_pre_loaded_with_all_messages.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab6"></a><h2 class="section">Byzantine fault tolerance for a composition of validators</h2>
<div class="paragraph"> </div>

In this section we show that if all components of a composite VLSM <code>X</code> have
the <span class="inlinecode"><span class="id" title="var">projection_validator_prop</span></span>erty, then its byzantine traces (that is,
traces obtained upon placing this composition in any, possibly adversarial,
context) are <span class="inlinecode"><span class="id" title="var">valid_trace</span></span>s of <code>X</code>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">composite_validator_byzantine_traces</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> {<span class="nv">message</span> : <span class="kt">Type</span>}
            `{EqDecision index}
            (IM : index -&gt; VLSM message)
            (constraint : composite_label IM -&gt; composite_state IM  * option message -&gt; <span class="kt">Prop</span>)
            (X := composite_vlsm IM constraint)
            (PreLoadedX := pre_loaded_with_all_messages_vlsm X)
            (FreeX := free_composite_vlsm IM)
            (Hvalidator: <span class="kr">forall</span> <span class="nv">i</span> : index, component_message_validator_prop IM constraint i)
            .</span></span></pre><div class="doc">
Let us fix an indexed set of VLSMs <code>IM</code> and their composition <code>X</code>
using <code>constraint</code>, and let <code>PreloadedX</code> be the
<span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_vlsm</span></span> associated to <code>X</code>.

<div class="paragraph"> </div>

Since we know that <code>PreloadedX</code> contains precisely the byzantine traces
of <code>X</code>, we just need to show that <code>PreLoadedX</code> is
included in <code>X</code> to prove our main result.

<div class="paragraph"> </div>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk55"><span class="kn">Lemma</span> <span class="nf">validator_pre_loaded_with_all_messages_incl</span>
        : VLSM_incl PreLoadedX X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl PreLoadedX X</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk56"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl PreLoadedX X</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk57"><span class="nb">apply</span> VLSM_incl_finite_traces_characterization.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : vstate
         {|
           vtype := vtype PreLoadedX;
           vmachine :=
             pre_loaded_with_all_messages_vlsm_machine
               X
         |}) (<span class="nv">tr</span> : list
                     (vtransition_item
                        {|
                          vtype := vtype PreLoadedX;
                          vmachine :=
                            pre_loaded_with_all_messages_vlsm_machine
                              X
                        |})),
  finite_valid_trace
    {|
      vtype := vtype PreLoadedX;
      vmachine :=
        pre_loaded_with_all_messages_vlsm_machine X
    |} s tr
  ‚Üí finite_valid_trace
      {|
        vtype := vtype PreLoadedX;
        vmachine :=
          composite_vlsm_machine IM constraint
      |} s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk58"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine X
  |}</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list
  (vtransition_item
     {|
       vtype := vtype PreLoadedX;
       vmachine :=
         pre_loaded_with_all_messages_vlsm_machine
           X
     |})</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine X
  |} s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace
  {|
    vtype := vtype PreLoadedX;
    vmachine := composite_vlsm_machine IM constraint
  |} s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk59"><span class="nb">split</span>; [|<span class="nb">apply</span> H].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine X
  |}</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list
  (vtransition_item
     {|
       vtype := vtype PreLoadedX;
       vmachine :=
         pre_loaded_with_all_messages_vlsm_machine
           X
     |})</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine X
  |} s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine := composite_vlsm_machine IM constraint
  |} s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk5a"><span class="nb">destruct</span> H <span class="kr">as</span> [Htr Hs].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine X
  |}</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list
  (vtransition_item
     {|
       vtype := vtype PreLoadedX;
       vmachine :=
         pre_loaded_with_all_messages_vlsm_machine
           X
     |})</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine := composite_vlsm_machine IM constraint
  |} s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk5b"><span class="nb">induction</span> Htr <span class="nb">using</span> finite_valid_trace_from_rev_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine X
  |} s</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine := composite_vlsm_machine IM constraint
  |} s []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ByzantineTraces-v-chk5c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine X
  |} l (finite_trace_last s tr, iom) 
  (sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>initial_state_prop s
‚Üí finite_valid_trace_from
    {|
      vtype := vtype PreLoadedX;
      vmachine :=
        composite_vlsm_machine IM constraint
    |} s tr</span></span></span><br></div><label class="goal-separator" for="ByzantineTraces-v-chk5c"><hr></label><div class="goal-conclusion">finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine := composite_vlsm_machine IM constraint
  |} s (tr ++ [x])</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk5d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine X
  |} s</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine := composite_vlsm_machine IM constraint
  |} s []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk5e"><span class="nb">apply</span> (finite_valid_trace_from_empty X).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine X
  |} s</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> initial_state_is_valid; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk5f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine X
  |} l (finite_trace_last s tr, iom) 
  (sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>initial_state_prop s
‚Üí finite_valid_trace_from
    {|
      vtype := vtype PreLoadedX;
      vmachine :=
        composite_vlsm_machine IM constraint
    |} s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine := composite_vlsm_machine IM constraint
  |} s (tr ++ [x])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk60"><span class="nb">specialize</span> (IHHtr Hs) <span class="kr">as</span> IHtr; <span class="nb">clear</span> IHHtr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine X
  |} l (finite_trace_last s tr, iom) 
  (sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      composite_vlsm_machine IM constraint
  |} s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine := composite_vlsm_machine IM constraint
  |} s (tr ++ [x])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk61"><span class="nb">apply</span> (extend_right_finite_trace_from X).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine X
  |} l (finite_trace_last s tr, iom) 
  (sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      composite_vlsm_machine IM constraint
  |} s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from X s tr</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ByzantineTraces-v-chk62" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine X
  |} l (finite_trace_last s tr, iom) 
  (sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      composite_vlsm_machine IM constraint
  |} s tr</span></span></span><br></div><label class="goal-separator" for="ByzantineTraces-v-chk62"><hr></label><div class="goal-conclusion">input_valid_transition X l
  (finite_trace_last s tr, iom) 
  (sf, oom)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk63"><span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine X
  |} l (finite_trace_last s tr, iom) 
  (sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      composite_vlsm_machine IM constraint
  |} s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition X l
  (finite_trace_last s tr, iom) (sf, oom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk64"><span class="nb">destruct</span> Hx <span class="kr">as</span> [Hvx Htx].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hvx</var><span class="hyp-type"><b>: </b><span>input_valid
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} l (finite_trace_last s tr, iom)</span></span></span><br><span><var>Htx</var><span class="hyp-type"><b>: </b><span>transition l (finite_trace_last s tr, iom) =
(sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      composite_vlsm_machine IM constraint
  |} s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition X l
  (finite_trace_last s tr, iom) (sf, oom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk65"><span class="nb">split</span>; [|<span class="bp">assumption</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hvx</var><span class="hyp-type"><b>: </b><span>input_valid
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} l (finite_trace_last s tr, iom)</span></span></span><br><span><var>Htx</var><span class="hyp-type"><b>: </b><span>transition l (finite_trace_last s tr, iom) =
(sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      composite_vlsm_machine IM constraint
  |} s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid X l (finite_trace_last s tr, iom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk66"><span class="nb">apply</span> finite_valid_trace_last_pstate <span class="kr">in</span> IHtr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hvx</var><span class="hyp-type"><b>: </b><span>input_valid
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} l (finite_trace_last s tr, iom)</span></span></span><br><span><var>Htx</var><span class="hyp-type"><b>: </b><span>transition l (finite_trace_last s tr, iom) =
(sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype PreLoadedX;
    vmachine :=
      composite_vlsm_machine IM constraint
  |} (finite_trace_last s tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid X l (finite_trace_last s tr, iom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk67"><span class="nb">simpl</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>_composite_label IM</span></span></span><br><span><var>Hvx</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} (finite_trace_last s tr)
‚àß option_valid_message_prop
    {|
      vtype := composite_type IM;
      vmachine :=
        pre_loaded_with_all_messages_vlsm_machine
          X
    |} iom
  ‚àß vvalid X l (finite_trace_last s tr, iom)</span></span></span><br><span><var>Htx</var><span class="hyp-type"><b>: </b><span>vtransition X l (finite_trace_last s tr, iom) =
(sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X s</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      composite_vlsm_machine IM constraint
  |} (finite_trace_last s tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (finite_trace_last s tr)
‚àß option_valid_message_prop X iom
  ‚àß constrained_composite_valid IM constraint l
      (finite_trace_last s tr, iom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk68"><span class="kr">match</span> <span class="kp">type of</span> IHtr <span class="kr">with</span>
          | valid_state_prop _ <span class="nl">?s</span> =&gt; <span class="nb">remember</span> s <span class="kr">as</span> lst
          <span class="kr">end</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>_composite_label IM</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst = finite_trace_last s tr</span></span></span><br><span><var>Hvx</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} lst
‚àß option_valid_message_prop
    {|
      vtype := composite_type IM;
      vmachine :=
        pre_loaded_with_all_messages_vlsm_machine
          X
    |} iom ‚àß vvalid X l (lst, iom)</span></span></span><br><span><var>Htx</var><span class="hyp-type"><b>: </b><span>vtransition X l (lst, iom) = (sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X s</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      composite_vlsm_machine IM constraint
  |} lst</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X lst
‚àß option_valid_message_prop X iom
  ‚àß constrained_composite_valid IM constraint l
      (lst, iom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk69"><span class="nb">split</span>; [<span class="bp">assumption</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>_composite_label IM</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst = finite_trace_last s tr</span></span></span><br><span><var>Hvx</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} lst
‚àß option_valid_message_prop
    {|
      vtype := composite_type IM;
      vmachine :=
        pre_loaded_with_all_messages_vlsm_machine
          X
    |} iom ‚àß vvalid X l (lst, iom)</span></span></span><br><span><var>Htx</var><span class="hyp-type"><b>: </b><span>vtransition X l (lst, iom) = (sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X s</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      composite_vlsm_machine IM constraint
  |} lst</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X iom
‚àß constrained_composite_valid IM constraint l
    (lst, iom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk6a"><span class="kp">repeat</span> <span class="nb">split</span>; [|<span class="nb">apply</span> Hvx|<span class="nb">apply</span> Hvx].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>_composite_label IM</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst = finite_trace_last s tr</span></span></span><br><span><var>Hvx</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} lst
‚àß option_valid_message_prop
    {|
      vtype := composite_type IM;
      vmachine :=
        pre_loaded_with_all_messages_vlsm_machine
          X
    |} iom ‚àß vvalid X l (lst, iom)</span></span></span><br><span><var>Htx</var><span class="hyp-type"><b>: </b><span>vtransition X l (lst, iom) = (sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X s</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      composite_vlsm_machine IM constraint
  |} lst</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X iom</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk6b"><span class="nb">destruct</span> Hvx <span class="kr">as</span> [Hlst [_ [Hv _]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>_composite_label IM</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst = finite_trace_last s tr</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} lst</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM l (lst, iom)</span></span></span><br><span><var>Htx</var><span class="hyp-type"><b>: </b><span>vtransition X l (lst, iom) = (sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X s</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      composite_vlsm_machine IM constraint
  |} lst</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X iom</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk6c"><span class="nb">destruct</span> l <span class="kr">as</span> (i, li).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst = finite_trace_last s tr</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} lst</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM (existT i li) (lst, iom)</span></span></span><br><span><var>Htx</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i li) (lst, iom) =
(sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := existT i li;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X s</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      composite_vlsm_machine IM constraint
  |} lst</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X iom</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk6d"><span class="nb">simpl</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst = finite_trace_last s tr</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} lst</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (lst i, iom)</span></span></span><br><span><var>Htx</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i li) (lst, iom) =
(sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := existT i li;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X s</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      composite_vlsm_machine IM constraint
  |} lst</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X iom</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk6e"><span class="nb">specialize</span> (valid_state_project_preloaded_to_preloaded _ IM constraint lst i Hlst)
            <span class="kr">as</span> Hlsti.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst = finite_trace_last s tr</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} lst</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (lst i, iom)</span></span></span><br><span><var>Htx</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i li) (lst, iom) =
(sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := existT i li;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X s</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      composite_vlsm_machine IM constraint
  |} lst</span></span></span><br><span><var>Hlsti</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm (IM i))
  (lst i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X iom</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk6f"><span class="nb">destruct</span> iom <span class="kr">as</span> [im |]; [| <span class="nb">apply</span> option_valid_message_None].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst = finite_trace_last s tr</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} lst</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (lst i, Some im)</span></span></span><br><span><var>Htx</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i li) (lst, Some im) =
(sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := existT i li;
  input := Some im;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X s</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      composite_vlsm_machine IM constraint
  |} lst</span></span></span><br><span><var>Hlsti</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm (IM i))
  (lst i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X (Some im)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk70"><span class="nb">eapply</span> Hvalidator; <span class="nb">split</span>; [<span class="bp">eassumption</span> |]; <span class="nb">split</span>; [| <span class="bp">eassumption</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst = finite_trace_last s tr</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} lst</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (lst i, Some im)</span></span></span><br><span><var>Htx</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i li) (lst, Some im) =
(sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := existT i li;
  input := Some im;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X s</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      composite_vlsm_machine IM constraint
  |} lst</span></span></span><br><span><var>Hlsti</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm (IM i))
  (lst i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop
  (pre_loaded_with_all_messages_vlsm (IM i)) (Some im)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk71"><span class="nb">eexists</span> _.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst = finite_trace_last s tr</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        X
  |} lst</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (lst i, Some im)</span></span></span><br><span><var>Htx</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i li) (lst, Some im) =
(sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := existT i li;
  input := Some im;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X s</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := composite_type IM;
    vmachine :=
      composite_vlsm_machine IM constraint
  |} lst</span></span></span><br><span><var>Hlsti</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm (IM i))
  (lst i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop
  (pre_loaded_with_all_messages_vlsm (IM i)) <span class="nl">?Goal</span>
  (Some im)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (pre_loaded_with_all_messages_message_valid_initial_state_message (IM i)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
Finally, we can conclude that a composition of validator components can
resist any kind of external influence:

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk72"><span class="kn">Lemma</span> <span class="nf">composite_validator_byzantine_traces_are_not_byzantine</span>
        (<span class="nv">tr</span> : vTrace X)
        (<span class="nv">Hbyz</span> : byzantine_trace_prop X tr)
        : valid_trace_prop X tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace X</span></span></span><br><span><var>Hbyz</var><span class="hyp-type"><b>: </b><span>byzantine_trace_prop X tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_trace_prop X tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk73"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace X</span></span></span><br><span><var>Hbyz</var><span class="hyp-type"><b>: </b><span>byzantine_trace_prop X tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_trace_prop X tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk74"><span class="nb">apply</span> validator_pre_loaded_with_all_messages_incl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace X</span></span></span><br><span><var>Hbyz</var><span class="hyp-type"><b>: </b><span>byzantine_trace_prop X tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_trace_prop
  {|
    vtype := vtype PreLoadedX;
    vmachine := machine PreLoadedX
  |} tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk75"><span class="nb">apply</span> alt_pre_loaded_with_all_messages_incl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace X</span></span></span><br><span><var>Hbyz</var><span class="hyp-type"><b>: </b><span>byzantine_trace_prop X tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_trace_prop
  {|
    vtype :=
      vtype
        (binary_free_composition_fst X
           emit_any_message_vlsm);
    vmachine :=
      machine
        (binary_free_composition_fst X
           emit_any_message_vlsm)
  |} tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk76"><span class="nb">apply</span> byzantine_alt_byzantine_iff <span class="kr">in</span> Hbyz.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoadedX</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm X</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>FreeX</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_message_validator_prop IM
    constraint i</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>vTrace X</span></span></span><br><span><var>Hbyz</var><span class="hyp-type"><b>: </b><span>alternate_byzantine_trace_prop X tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_trace_prop
  {|
    vtype :=
      vtype
        (binary_free_composition_fst X
           emit_any_message_vlsm);
    vmachine :=
      machine
        (binary_free_composition_fst X
           emit_any_message_vlsm)
  |} tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">composite_validator_byzantine_traces</span>.</span></span></pre></article></body></html>